"use strict";(self.webpackChunkspa_angular_typescript_hello_world=self.webpackChunkspa_angular_typescript_hello_world||[]).push([[610],{2610:(q,u,l)=>{l.r(u),l.d(u,{ProfileModule:()=>z});var g=l(6895),f=l(1316),p=l(5477),h=l(4004),e=l(4650),_=l(6502),d=l(7185),c=l(5247),m=l(7921),v=l(4704),x=l(4852),a=l(433);const Z=["confirmDialog"],P=["confirmFreezeDialog"],b=["fileInput"];function T(t,r){1&t&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"Willkommen auf deinem K\xfcnstler Profil. Als K\xfcnstler kannst du "),e.qZA()())}function F(t,r){1&t&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"Willkomen auf deinem Gast Profil, als Gast kannst du die Seite besuchen und Plakate erstellen, sowie am Polylog teilnehmen."),e.qZA()())}function C(t,r){1&t&&(e.TgZ(0,"div")(1,"h2",15),e._uU(2,"Hallo"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Willkommen auf deinem Institutions Profil. Als Institution kannst du neben den Plakaten auch noch Postkarten erstellen und dein Logo auf kreative Weise umgestalten."),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"a",20),e._uU(7," Klicke hier und werde kreativ \u2192 "),e.qZA()())}function A(t,r){1&t&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"Willkommen auf deinem Otto Team Profil.Als Team Mitglied kannst du neue Forschungsfragen einstellen, den Polylog konfigurieren und Benutzerrechte konfigurieren."),e.qZA()())}function U(t,r){if(1&t&&(e.TgZ(0,"div",19)(1,"h2",15),e._uU(2),e.qZA(),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e.YNc(5,T,3,0,"div",5),e.YNc(6,F,3,0,"div",5),e.YNc(7,C,8,0,"div",5),e.YNc(8,A,3,0,"div",5),e.qZA()),2&t){const i=e.oxw().ngIf,n=e.oxw();e.xp6(2),e.hij("Hallo, ",i.username,""),e.xp6(2),e.hij("Hallo, ",i.username?i.username:i.name,""),e.xp6(1),e.Q6J("ngIf","K\xfcnstler"===n.role),e.xp6(1),e.Q6J("ngIf","Gast"===n.role),e.xp6(1),e.Q6J("ngIf","Institution"===n.role),e.xp6(1),e.Q6J("ngIf","Team"===n.role)}}function w(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"div",11)(2,"div",12),e._UZ(3,"img",13),e.TgZ(4,"div",14)(5,"h2",15),e._uU(6),e.qZA(),e.TgZ(7,"h3",16),e._uU(8),e.qZA(),e.TgZ(9,"span",17),e._uU(10),e.qZA()()()(),e.YNc(11,U,9,6,"div",18),e.BQk()),2&t){const i=r.ngIf,n=e.oxw();e.xp6(3),e.Q6J("src",n.avatarUrl,e.LSH),e.xp6(3),e.hij("Hallo, ",i.username,""),e.xp6(2),e.hij("Angemeldet als: ",n.role,""),e.xp6(2),e.hij("Email: ",i.email,""),e.xp6(1),e.Q6J("ngIf",n.role)}}function I(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"form",null,21)(2,"input",22,23),e.NdJ("ngModelChange",function(o){e.CHM(i);const s=e.oxw();return e.KtG(s.forschungsfrage=o)}),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",24,25),e.NdJ("change",function(o){e.CHM(i);const s=e.oxw();return e.KtG(s.onFileSelected(o))}),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"button",26),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openConfirmDialog())}),e._uU(9," Neue Forschungsfrage stellen "),e.qZA(),e.TgZ(10,"button",27),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openFreezeDialog())}),e._uU(11),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"h3"),e._uU(14," Polylog Status: "),e.TgZ(15,"span"),e._uU(16),e.qZA()()()}if(2&t){const i=e.MAs(1),n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.forschungsfrage),e.xp6(6),e.Q6J("disabled",!i.valid),e.xp6(3),e.hij(" ",n.VKb2xiYiQ2?"Polylog auftauen":"Polylog einfrieren"," "),e.xp6(5),e.Oqu(n.VKb2xiYiQ2?"Inaktiv":"Aktiv")}}function k(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"Kein Logo ausgew\xe4hlt."),e.qZA())}function J(t,r){if(1&t&&e._UZ(0,"img",40),2&t){const i=e.oxw().$implicit;e.Q6J("src",i.imagePath,e.LSH)}}function y(t,r){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"p"),e._uU(3," Logo: "),e.YNc(4,k,2,0,"span",5),e.YNc(5,J,1,1,"img",39),e.qZA()()),2&t){const i=r.$implicit;e.xp6(1),e.hij(" ",i.title," "),e.xp6(3),e.Q6J("ngIf",!i.imagePath),e.xp6(1),e.Q6J("ngIf",i.imagePath)}}function D(t,r){if(1&t&&(e.TgZ(0,"div")(1,"ul"),e.YNc(2,y,6,3,"li",38),e.qZA()()),2&t){const i=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",i.paginatedForschungsfragen)}}function M(t,r){if(1&t){const i=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div"),e.YNc(1,D,3,1,"div",5),e.TgZ(2,"div",31)(3,"button",32),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.changePage(o.currentPage-1))}),e._UZ(4,"span"),e.O4$(),e.TgZ(5,"svg",33),e._UZ(6,"path",34),e.qZA()(),e.kcU(),e.TgZ(7,"span")(8,"span",35),e._uU(9),e.qZA()(),e.TgZ(10,"button",32),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.changePage(o.currentPage+1))}),e.O4$(),e.TgZ(11,"svg",36),e._UZ(12,"path",37),e.qZA()()()()}if(2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.forschungsfragen.length),e.xp6(8),e.AsE("",i.currentPage," / ",i.totalPages,"")}}function Q(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",28)(1,"h1"),e._uU(2,"\xdcbersicht Forschungsfragen"),e.qZA(),e.TgZ(3,"p"),e._uU(4," Hier ist eine \xdcbersicht von allen bereits gestellten Forschungsfragen, die in der Datenbank gespeichert sind. "),e.qZA(),e.O4$(),e.TgZ(5,"svg",29),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.toggleForschungsfragen())}),e._UZ(6,"path",30),e.qZA(),e.YNc(7,M,13,3,"div",5),e.qZA()}if(2&t){const i=e.oxw();e.xp6(5),e.ekj("rotated",i.isExpanded),e.xp6(2),e.Q6J("ngIf",i.isExpanded)}}let N=(()=>{class t{constructor(i,n,o,s,S,Y,O){this.auth=i,this.toastr=n,this.forschungsfrageService=o,this.freezePolylogService=s,this.userService=S,this.roleService=Y,this.route=O,this.forschungsfrage="",this.forschungsfragen=[],this.selectedFile=null,this.title="Decoded ID Token",this.user$=this.auth.user$,this.code$=this.user$.pipe((0,h.U)(K=>JSON.stringify(K,null,2))),this.role=null,this.isAdmin=!1,this.roleAvatarMap={Gast:"https://ottoblob.blob.core.windows.net/images/*image00040 Kopie.png",Institution:"https://ottoblob.blob.core.windows.net/images/*image00021 Kopie.png",Team:"https://ottoblob.blob.core.windows.net/images/*image00013 Kopie 2.png",K\u00fcnstler:"https://ottoblob.blob.core.windows.net/images/*image00042 Kopie.png"},this.currentPage=1,this.itemsPerPage=5,this.totalItems=0,this.isExpanded=!1,this.isDialogOpen=!1,this.isFreezeDialogOpen=!1,this.VKb2xiYiQ2=!1}ngOnInit(){this.subscribeToForschungsfragen(),this.fetchAllForschungsfragen(),this.freezePolylogService.getFreezeState().subscribe(i=>{this.VKb2xiYiQ2=i}),this.role=this.roleService.getRole(),this.isAdmin="true"===localStorage.getItem("isAdmin"),console.log(this.role),this.auth.user$.subscribe(i=>{console.log("User after login:",i),i&&this.userService.saveUser({email:i.email,role:this.role||"guest"}).subscribe({next:s=>console.log("User saved successfully to the database",s),error:s=>console.error("Error saving user to the database",s)})})}toggleForschungsfragen(){this.isExpanded=!this.isExpanded}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get avatarUrl(){return this.roleAvatarMap[this.role||""]}fetchAllForschungsfragen(){this.forschungsfrageService.getAllForschungsfragen().subscribe()}changePage(i){this.itemsPerPage>0&&(this.currentPage=i)}get paginatedForschungsfragen(){const i=(this.currentPage-1)*this.itemsPerPage;return this.forschungsfragen.slice(i,i+this.itemsPerPage)}onFileSelected(i){const n=i.target.files[0];if(n){if(!n.type.match("image.*"))return void this.toastr.warning("W\xe4hle ein Logo f\xfcr die Forschungsfrage!","Achtung");this.selectedFile=n}}subscribeToForschungsfragen(){this.forschungsfrageService.forschungsfragen$.subscribe(i=>{this.forschungsfragen=i,this.totalItems=i.length},i=>console.error("Error fetching Forschungsfragen:",i))}clearFileInput(){this.fileInput&&this.fileInput.nativeElement&&(this.fileInput.nativeElement.value="",this.selectedFile=null)}openConfirmDialog(){this.selectedFile?(this.confirmDialog.imageFile=this.selectedFile,this.confirmDialog.forschungsfrage=this.forschungsfrage,this.confirmDialog.isOpen=!0):(console.log("No File Selected"),this.toastr.info("Kein Logo f\xfcr die Forschungsfrage ausgew\xe4hlt!","Info"))}closeDialog(i){this.isDialogOpen=!1,this.isFreezeDialogOpen=!1,i&&(this.toastr.success("Forschungsfrage erfolgreich gestellt!","Success"),this.forschungsfrage="",this.selectedFile=null)}openFreezeDialog(){this.isFreezeDialogOpen=!0}unfreezePolylog(){this.freezePolylogService.setFreezeState(!1),this.openFreezeDialog()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(_.e8),e.Y36(d._W),e.Y36(c.$G),e.Y36(c.Ih),e.Y36(c.KD),e.Y36(c.Nj),e.Y36(f.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile"]],viewQuery:function(i,n){if(1&i&&(e.Gf(Z,5),e.Gf(P,5),e.Gf(b,5)),2&i){let o;e.iGM(o=e.CRH())&&(n.confirmDialog=o.first),e.iGM(o=e.CRH())&&(n.confirmFreezeDialog=o.first),e.iGM(o=e.CRH())&&(n.fileInput=o.first)}},decls:16,vars:7,consts:[[1,"content-layout"],["id","page-title",1,"content__title"],[1,"content__body"],["id","page1",2,"height","90vh"],["id","page-description"],[4,"ngIf"],["class","forschungsfragen",4,"ngIf"],[3,"isOpen","close","onSuccessfulUpload"],["confirmDialog",""],[3,"isOpen","close"],["confirmFreezeDialog",""],[1,"profile-grid"],[1,"profile__header"],["alt","Profile",1,"profile__avatar",2,"margin-top","50px",3,"src"],[1,"profile__headline"],[1,"profile__title"],[1,"profile__role"],[1,"profile__description"],["style","margin-top:5vh;",4,"ngIf"],[2,"margin-top","5vh"],["routerLink","/plakate/mein-plakat","target","_blank","rel","noopener noreferrer",1,"button","button--secondary",2,"border","1px solid black"],["frageForm","ngForm"],["id","input-forschungsfrage","type","text","name","forschungsfrage","required","","placeholder","Neue Forschungsfrage...",2,"margin-bottom","50px","width","350px",3,"ngModel","ngModelChange"],["forschungsfrageInput","ngModel"],["type","file","accept","image/*",2,"display","block","margin-bottom","0px","border","none",3,"change"],["fileInput",""],[1,"submit-button",3,"disabled","click"],[1,"submit-button",3,"click"],[1,"forschungsfragen"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-down",3,"click"],["fill-rule","evenodd","d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"],[1,"pagination-controls"],[1,"controlls-button",3,"click"],["color","black","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-left"],["fill-rule","evenodd","d","M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],[2,"font-size","1.5rem"],["color","black","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-right"],["fill-rule","evenodd","d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"],[4,"ngFor","ngForOf"],["style","height: 50px","alt","Uploaded Image",3,"src",4,"ngIf"],["alt","Uploaded Image",2,"height","50px",3,"src"]],template:function(i,n){1&i&&(e.TgZ(0,"app-page-layout")(1,"div",0)(2,"h1",1),e._uU(3," Profil "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"p",4),e.YNc(7,w,12,5,"ng-container",5),e.ALo(8,"async"),e._UZ(9,"br"),e.qZA(),e.YNc(10,I,17,4,"form",5),e.qZA(),e.YNc(11,Q,8,3,"div",6),e.qZA()(),e.TgZ(12,"app-confirm-dialog",7,8),e.NdJ("close",function(s){return n.closeDialog(s)})("onSuccessfulUpload",function(){return n.clearFileInput()}),e.qZA(),e.TgZ(14,"app-confirm-freeze-dialog",9,10),e.NdJ("close",function(s){return n.closeDialog(s)}),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,5,n.user$)),e.xp6(3),e.Q6J("ngIf",n.isAdmin),e.xp6(1),e.Q6J("ngIf",n.isAdmin),e.xp6(1),e.Q6J("isOpen",n.isDialogOpen),e.xp6(2),e.Q6J("isOpen",n.isFreezeDialogOpen))},dependencies:[g.sg,g.O5,m.z,v.k,x.w,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,f.rH,g.Ov],encapsulation:2}),t})(),z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,p.m,a.u5,f.Bz.forChild([{path:"",component:N}])]}),t})()}}]);