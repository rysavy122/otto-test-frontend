(self.webpackChunkspa_angular_typescript_hello_world=self.webpackChunkspa_angular_typescript_hello_world||[]).push([[925],{5925:(Hi,yi,we)=>{"use strict";we.r(yi),we.d(yi,{MeinPlakatModule:()=>Ks});var wt=we(6895),Ot=we(1316),ti=we(5477),Zi=we(5861),Xe=we(8946),w=we(4650);function qe(k){return null!=k&&"false"!=`${k}`}function We(k,h=0){return function W(k){return!isNaN(parseFloat(k))&&!isNaN(Number(k))}(k)?Number(k):h}function $e(k){return k instanceof w.SBq?k.nativeElement:k}var ye=we(7579),Me=we(9646),ot=we(9751),J=we(8421),Rt=we(5577),fe=we(1144),O=we(576),xe=we(3268);const Ri=["addListener","removeListener"],Ze=["addEventListener","removeEventListener"],ft=["on","off"];function Wt(k,h,a,p){if((0,O.m)(a)&&(p=a,a=void 0),p)return Wt(k,h,a).pipe((0,xe.Z)(p));const[x,F]=function St(k){return(0,O.m)(k.addEventListener)&&(0,O.m)(k.removeEventListener)}(k)?Ze.map($=>ie=>k[$](h,ie,a)):function Ft(k){return(0,O.m)(k.addListener)&&(0,O.m)(k.removeListener)}(k)?Ri.map(ke(k,h)):function ai(k){return(0,O.m)(k.on)&&(0,O.m)(k.off)}(k)?ft.map(ke(k,h)):[];if(!x&&(0,fe.z)(k))return(0,Rt.z)($=>Wt($,h,a))((0,J.Xf)(k));if(!x)throw new TypeError("Invalid event target");return new ot.y($=>{const ie=(...ue)=>$.next(1<ue.length?ue:ue[0]);return x(ie),()=>F(ie)})}function ke(k,h){return a=>p=>k[a](h,p)}var Nt=we(4408),Ht=we(727);const ht={schedule(k){let h=requestAnimationFrame,a=cancelAnimationFrame;const{delegate:p}=ht;p&&(h=p.requestAnimationFrame,a=p.cancelAnimationFrame);const x=h(F=>{a=void 0,k(F)});return new Ht.w0(()=>a?.(x))},requestAnimationFrame(...k){const{delegate:h}=ht;return(h?.requestAnimationFrame||requestAnimationFrame)(...k)},cancelAnimationFrame(...k){const{delegate:h}=ht;return(h?.cancelAnimationFrame||cancelAnimationFrame)(...k)},delegate:void 0};var Ee=we(7565);const de=new class Gt extends Ee.v{flush(h){this._active=!0;const a=this._scheduled;this._scheduled=void 0;const{actions:p}=this;let x;h=h||p.shift();do{if(x=h.execute(h.state,h.delay))break}while((h=p[0])&&h.id===a&&p.shift());if(this._active=!1,x){for(;(h=p[0])&&h.id===a&&p.shift();)h.unsubscribe();throw x}}}(class gt extends Nt.o{constructor(h,a){super(h,a),this.scheduler=h,this.work=a}requestAsyncId(h,a,p=0){return null!==p&&p>0?super.requestAsyncId(h,a,p):(h.actions.push(this),h._scheduled||(h._scheduled=ht.requestAnimationFrame(()=>h.flush(void 0))))}recycleAsyncId(h,a,p=0){if(null!=p&&p>0||null==p&&this.delay>0)return super.recycleAsyncId(h,a,p);h.actions.some(x=>x.id===a)||(ht.cancelAnimationFrame(a),h._scheduled=void 0)}});let Ue,Zt=1;const Ct={};function wi(k){return k in Ct&&(delete Ct[k],!0)}const oi={setImmediate(k){const h=Zt++;return Ct[h]=!0,Ue||(Ue=Promise.resolve()),Ue.then(()=>wi(h)&&k()),h},clearImmediate(k){wi(k)}},{setImmediate:xi,clearImmediate:st}=oi,Yt={setImmediate(...k){const{delegate:h}=Yt;return(h?.setImmediate||xi)(...k)},clearImmediate(k){const{delegate:h}=Yt;return(h?.clearImmediate||st)(k)},delegate:void 0};new class ui extends Ee.v{flush(h){this._active=!0;const a=this._scheduled;this._scheduled=void 0;const{actions:p}=this;let x;h=h||p.shift();do{if(x=h.execute(h.state,h.delay))break}while((h=p[0])&&h.id===a&&p.shift());if(this._active=!1,x){for(;(h=p[0])&&h.id===a&&p.shift();)h.unsubscribe();throw x}}}(class fi extends Nt.o{constructor(h,a){super(h,a),this.scheduler=h,this.work=a}requestAsyncId(h,a,p=0){return null!==p&&p>0?super.requestAsyncId(h,a,p):(h.actions.push(this),h._scheduled||(h._scheduled=Yt.setImmediate(h.flush.bind(h,void 0))))}recycleAsyncId(h,a,p=0){if(null!=p&&p>0||null==p&&this.delay>0)return super.recycleAsyncId(h,a,p);h.actions.some(x=>x.id===a)||(Yt.clearImmediate(a),h._scheduled=void 0)}});var Qe=we(4986),Si=we(4482),Jt=we(5403),Vt=we(3532);function ki(k=0,h,a=Qe.P){let p=-1;return null!=h&&((0,Vt.K)(h)?a=h:p=h),new ot.y(x=>{let F=function Li(k){return k instanceof Date&&!isNaN(k)}(k)?+k-a.now():k;F<0&&(F=0);let $=0;return a.schedule(function(){x.closed||(x.next($++),0<=p?this.schedule(void 0,p):x.complete())},F)})}function Ii(k,h=Qe.z){return function Ci(k){return(0,Si.e)((h,a)=>{let p=!1,x=null,F=null,$=!1;const ie=()=>{if(F?.unsubscribe(),F=null,p){p=!1;const ve=x;x=null,a.next(ve)}$&&a.complete()},ue=()=>{F=null,$&&a.complete()};h.subscribe((0,Jt.x)(a,ve=>{p=!0,x=ve,F||(0,J.Xf)(k(ve)).subscribe(F=(0,Jt.x)(a,ie,ue))},()=>{$=!0,(!p||!F||F.closed)&&a.complete()}))})}(()=>ki(k,h))}var it=we(9300);let kt;try{kt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{kt=!1}let e,l,He=(()=>{class k{constructor(a){this._platformId=a,this.isBrowser=this._platformId?(0,wt.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!kt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(w.Lbi))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function i(k){return function t(){if(null==e&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>e=!0}))}finally{e=e||!1}return e}()?k:!!k.capture}function d(k){if(function f(){if(null==l){const k=typeof document<"u"?document.head:null;l=!(!k||!k.createShadowRoot&&!k.attachShadow)}return l}()){const h=k.getRootNode?k.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&h instanceof ShadowRoot)return h}return null}function _(k){return k.composedPath?k.composedPath()[0]:k.target}let I=(()=>{class k{constructor(a,p,x){this._ngZone=a,this._platform=p,this._scrolled=new ye.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=x}register(a){this.scrollContainers.has(a)||this.scrollContainers.set(a,a.elementScrolled().subscribe(()=>this._scrolled.next(a)))}deregister(a){const p=this.scrollContainers.get(a);p&&(p.unsubscribe(),this.scrollContainers.delete(a))}scrolled(a=20){return this._platform.isBrowser?new ot.y(p=>{this._globalSubscription||this._addGlobalListener();const x=a>0?this._scrolled.pipe(Ii(a)).subscribe(p):this._scrolled.subscribe(p);return this._scrolledCount++,()=>{x.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Me.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((a,p)=>this.deregister(p)),this._scrolled.complete()}ancestorScrolled(a,p){const x=this.getAncestorScrollContainers(a);return this.scrolled(p).pipe((0,it.h)(F=>!F||x.indexOf(F)>-1))}getAncestorScrollContainers(a){const p=[];return this.scrollContainers.forEach((x,F)=>{this._scrollableContainsElement(F,a)&&p.push(F)}),p}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(a,p){let x=$e(p),F=a.getElementRef().nativeElement;do{if(x==F)return!0}while(x=x.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Wt(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(w.R0b),w.LFG(He),w.LFG(wt.K0,8))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),T=(()=>{class k{constructor(a,p,x){this._platform=a,this._change=new ye.x,this._changeListener=F=>{this._change.next(F)},this._document=x,p.runOutsideAngular(()=>{if(a.isBrowser){const F=this._getWindow();F.addEventListener("resize",this._changeListener),F.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const a=this._getWindow();a.removeEventListener("resize",this._changeListener),a.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const a={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),a}getViewportRect(){const a=this.getViewportScrollPosition(),{width:p,height:x}=this.getViewportSize();return{top:a.top,left:a.left,bottom:a.top+x,right:a.left+p,height:x,width:p}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const a=this._document,p=this._getWindow(),x=a.documentElement,F=x.getBoundingClientRect();return{top:-F.top||a.body.scrollTop||p.scrollY||x.scrollTop||0,left:-F.left||a.body.scrollLeft||p.scrollX||x.scrollLeft||0}}change(a=20){return a>0?this._change.pipe(Ii(a)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const a=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:a.innerWidth,height:a.innerHeight}:{width:0,height:0}}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(He),w.LFG(w.R0b),w.LFG(wt.K0,8))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),ee=(()=>{class k{}return k.\u0275fac=function(a){return new(a||k)},k.\u0275mod=w.oAB({type:k}),k.\u0275inj=w.cJS({}),k})();var Dr=we(6451),mn=we(2722),zn=we(8675),hs=we(4004),Rr=we(5698),cs=we(8505),fs=we(3900);const ds=new w.OlP("cdk-dir-doc",{providedIn:"root",factory:function ps(){return(0,w.f3M)(wt.K0)}}),gs=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Lr=(()=>{class k{constructor(a){if(this.value="ltr",this.change=new w.vpe,a){const x=a.documentElement?a.documentElement.dir:null;this.value=function _s(k){const h=k?.toLowerCase()||"";return"auto"===h&&typeof navigator<"u"&&navigator?.language?gs.test(navigator.language)?"rtl":"ltr":"rtl"===h?"rtl":"ltr"}((a.body?a.body.dir:null)||x||"ltr")}}ngOnDestroy(){this.change.complete()}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(ds,8))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Bn(k,h,a){for(let p in h)if(h.hasOwnProperty(p)){const x=h[p];x?k.setProperty(p,x,a?.has(p)?"important":""):k.removeProperty(p)}return k}function Bi(k,h){const a=h?"":"none";Bn(k.style,{"touch-action":h?"":"none","-webkit-user-drag":h?"":"none","-webkit-tap-highlight-color":h?"":"transparent","user-select":a,"-ms-user-select":a,"-webkit-user-select":a,"-moz-user-select":a})}function Mr(k,h,a){Bn(k.style,{position:h?"":"fixed",top:h?"":"0",opacity:h?"":"0",left:h?"":"-999em"},a)}function vn(k,h){return h&&"none"!=h?k+" "+h:k}function Or(k){const h=k.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(k)*h}function Un(k,h){return k.getPropertyValue(h).split(",").map(p=>p.trim())}function Hn(k){const h=k.getBoundingClientRect();return{top:h.top,right:h.right,bottom:h.bottom,left:h.left,width:h.width,height:h.height,x:h.x,y:h.y}}function Zn(k,h,a){const{top:p,bottom:x,left:F,right:$}=k;return a>=p&&a<=x&&h>=F&&h<=$}function Xi(k,h,a){k.top+=h,k.bottom=k.top+k.height,k.left+=a,k.right=k.left+k.width}function Fr(k,h,a,p){const{top:x,right:F,bottom:$,left:ie,width:ue,height:ve}=k,Pe=ue*h,Je=ve*h;return p>x-Je&&p<$+Je&&a>ie-Pe&&a<F+Pe}class Nr{constructor(h){this._document=h,this.positions=new Map}clear(){this.positions.clear()}cache(h){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),h.forEach(a=>{this.positions.set(a,{scrollPosition:{top:a.scrollTop,left:a.scrollLeft},clientRect:Hn(a)})})}handleScroll(h){const a=_(h),p=this.positions.get(a);if(!p)return null;const x=p.scrollPosition;let F,$;if(a===this._document){const ve=this.getViewportScrollPosition();F=ve.top,$=ve.left}else F=a.scrollTop,$=a.scrollLeft;const ie=x.top-F,ue=x.left-$;return this.positions.forEach((ve,Pe)=>{ve.clientRect&&a!==Pe&&a.contains(Pe)&&Xi(ve.clientRect,ie,ue)}),x.top=F,x.left=$,{top:ie,left:ue}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Vr(k){const h=k.cloneNode(!0),a=h.querySelectorAll("[id]"),p=k.nodeName.toLowerCase();h.removeAttribute("id");for(let x=0;x<a.length;x++)a[x].removeAttribute("id");return"canvas"===p?Ur(k,h):("input"===p||"select"===p||"textarea"===p)&&Br(k,h),zr("canvas",k,h,Ur),zr("input, textarea, select",k,h,Br),h}function zr(k,h,a,p){const x=h.querySelectorAll(k);if(x.length){const F=a.querySelectorAll(k);for(let $=0;$<x.length;$++)p(x[$],F[$])}}let vs=0;function Br(k,h){"file"!==h.type&&(h.value=k.value),"radio"===h.type&&h.name&&(h.name=`mat-clone-${h.name}-${vs++}`)}function Ur(k,h){const a=h.getContext("2d");if(a)try{a.drawImage(k,0,0)}catch{}}const Hr=i({passive:!0}),bn=i({passive:!1}),jn=new Set(["position"]);class ys{constructor(h,a,p,x,F,$){this._config=a,this._document=p,this._ngZone=x,this._viewportRuler=F,this._dragDropRegistry=$,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ye.x,this._pointerMoveSubscription=Ht.w0.EMPTY,this._pointerUpSubscription=Ht.w0.EMPTY,this._scrollSubscription=Ht.w0.EMPTY,this._resizeSubscription=Ht.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ye.x,this.started=new ye.x,this.released=new ye.x,this.ended=new ye.x,this.entered=new ye.x,this.exited=new ye.x,this.dropped=new ye.x,this.moved=this._moveEvents,this._pointerDown=ie=>{if(this.beforeStarted.next(),this._handles.length){const ue=this._getTargetHandle(ie);ue&&!this._disabledHandles.has(ue)&&!this.disabled&&this._initializeDragSequence(ue,ie)}else this.disabled||this._initializeDragSequence(this._rootElement,ie)},this._pointerMove=ie=>{const ue=this._getPointerPositionOnPage(ie);if(!this._hasStartedDragging){if(Math.abs(ue.x-this._pickupPositionOnPage.x)+Math.abs(ue.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const bi=Date.now()>=this._dragStartTime+this._getDragStartDelay(ie),si=this._dropContainer;if(!bi)return void this._endDragSequence(ie);(!si||!si.isDragging()&&!si.isReceiving())&&(ie.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(ie)))}return}ie.preventDefault();const ve=this._getConstrainedPointerPosition(ue);if(this._hasMoved=!0,this._lastKnownPointerPosition=ue,this._updatePointerDirectionDelta(ve),this._dropContainer)this._updateActiveDropContainer(ve,ue);else{const Pe=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,Je=this._activeTransform;Je.x=ve.x-Pe.x+this._passiveTransform.x,Je.y=ve.y-Pe.y+this._passiveTransform.y,this._applyRootElementTransform(Je.x,Je.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:ve,event:ie,distance:this._getDragDistance(ve),delta:this._pointerDirectionDelta})})},this._pointerUp=ie=>{this._endDragSequence(ie)},this._nativeDragStart=ie=>{if(this._handles.length){const ue=this._getTargetHandle(ie);ue&&!this._disabledHandles.has(ue)&&!this.disabled&&ie.preventDefault()}else this.disabled||ie.preventDefault()},this.withRootElement(h).withParent(a.parentDragRef||null),this._parentPositions=new Nr(p),$.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(h){const a=qe(h);a!==this._disabled&&(this._disabled=a,this._toggleNativeDragInteractions(),this._handles.forEach(p=>Bi(p,a)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(h){this._handles=h.map(p=>$e(p)),this._handles.forEach(p=>Bi(p,this.disabled)),this._toggleNativeDragInteractions();const a=new Set;return this._disabledHandles.forEach(p=>{this._handles.indexOf(p)>-1&&a.add(p)}),this._disabledHandles=a,this}withPreviewTemplate(h){return this._previewTemplate=h,this}withPlaceholderTemplate(h){return this._placeholderTemplate=h,this}withRootElement(h){const a=$e(h);return a!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{a.addEventListener("mousedown",this._pointerDown,bn),a.addEventListener("touchstart",this._pointerDown,Hr),a.addEventListener("dragstart",this._nativeDragStart,bn)}),this._initialTransform=void 0,this._rootElement=a),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(h){return this._boundaryElement=h?$e(h):null,this._resizeSubscription.unsubscribe(),h&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(h){return this._parentDragRef=h,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(h){!this._disabledHandles.has(h)&&this._handles.indexOf(h)>-1&&(this._disabledHandles.add(h),Bi(h,!0))}enableHandle(h){this._disabledHandles.has(h)&&(this._disabledHandles.delete(h),Bi(h,this.disabled))}withDirection(h){return this._direction=h,this}_withDropContainer(h){this._dropContainer=h}getFreeDragPosition(){const h=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:h.x,y:h.y}}setFreeDragPosition(h){return this._activeTransform={x:0,y:0},this._passiveTransform.x=h.x,this._passiveTransform.y=h.y,this._dropContainer||this._applyRootElementTransform(h.x,h.y),this}withPreviewContainer(h){return this._previewContainer=h,this}_sortFromLastPointerPosition(){const h=this._lastKnownPointerPosition;h&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(h),h)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(h){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:h}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(h),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const a=this._getPointerPositionOnPage(h);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(a),dropPoint:a,event:h})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(h){en(h)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const a=this._dropContainer;if(a){const p=this._rootElement,x=p.parentNode,F=this._placeholder=this._createPlaceholderElement(),$=this._anchor=this._anchor||this._document.createComment(""),ie=this._getShadowRoot();x.insertBefore($,p),this._initialTransform=p.style.transform||"",this._preview=this._createPreviewElement(),Mr(p,!1,jn),this._document.body.appendChild(x.replaceChild(F,p)),this._getPreviewInsertionPoint(x,ie).appendChild(this._preview),this.started.next({source:this,event:h}),a.start(),this._initialContainer=a,this._initialIndex=a.getItemIndex(this)}else this.started.next({source:this,event:h}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(a?a.getScrollableParents():[])}_initializeDragSequence(h,a){this._parentDragRef&&a.stopPropagation();const p=this.isDragging(),x=en(a),F=!x&&0!==a.button,$=this._rootElement,ie=_(a),ue=!x&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),ve=x?function os(k){const h=k.touches&&k.touches[0]||k.changedTouches&&k.changedTouches[0];return!(!h||-1!==h.identifier||null!=h.radiusX&&1!==h.radiusX||null!=h.radiusY&&1!==h.radiusY)}(a):function as(k){return 0===k.buttons||0===k.offsetX&&0===k.offsetY}(a);if(ie&&ie.draggable&&"mousedown"===a.type&&a.preventDefault(),p||F||ue||ve)return;if(this._handles.length){const yt=$.style;this._rootElementTapHighlight=yt.webkitTapHighlightColor||"",yt.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(yt=>this._updateOnScroll(yt)),this._boundaryElement&&(this._boundaryRect=Hn(this._boundaryElement));const Pe=this._previewTemplate;this._pickupPositionInElement=Pe&&Pe.template&&!Pe.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,h,a);const Je=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(a);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:Je.x,y:Je.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,a)}_cleanupDragArtifacts(h){Mr(this._rootElement,!0,jn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const a=this._dropContainer,p=a.getItemIndex(this),x=this._getPointerPositionOnPage(h),F=this._getDragDistance(x),$=a._isOverContainer(x.x,x.y);this.ended.next({source:this,distance:F,dropPoint:x,event:h}),this.dropped.next({item:this,currentIndex:p,previousIndex:this._initialIndex,container:a,previousContainer:this._initialContainer,isPointerOverContainer:$,distance:F,dropPoint:x,event:h}),a.drop(this,p,this._initialIndex,this._initialContainer,$,F,x,h),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:h,y:a},{x:p,y:x}){let F=this._initialContainer._getSiblingContainerFromPosition(this,h,a);!F&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(h,a)&&(F=this._initialContainer),F&&F!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=F,this._dropContainer.enter(this,h,a,F===this._initialContainer&&F.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:F,currentIndex:F.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(p,x),this._dropContainer._sortItem(this,h,a,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(h,a):this._applyPreviewTransform(h-this._pickupPositionInElement.x,a-this._pickupPositionInElement.y))}_createPreviewElement(){const h=this._previewTemplate,a=this.previewClass,p=h?h.template:null;let x;if(p&&h){const F=h.matchSize?this._initialClientRect:null,$=h.viewContainer.createEmbeddedView(p,h.context);$.detectChanges(),x=jr($,this._document),this._previewRef=$,h.matchSize?qr(x,F):x.style.transform=yn(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else x=Vr(this._rootElement),qr(x,this._initialClientRect),this._initialTransform&&(x.style.transform=this._initialTransform);return Bn(x.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},jn),Bi(x,!1),x.classList.add("cdk-drag-preview"),x.setAttribute("dir",this._direction),a&&(Array.isArray(a)?a.forEach(F=>x.classList.add(F)):x.classList.add(a)),x}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const h=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(h.left,h.top);const a=function ms(k){const h=getComputedStyle(k),a=Un(h,"transition-property"),p=a.find(ie=>"transform"===ie||"all"===ie);if(!p)return 0;const x=a.indexOf(p),F=Un(h,"transition-duration"),$=Un(h,"transition-delay");return Or(F[x])+Or($[x])}(this._preview);return 0===a?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(p=>{const x=$=>{(!$||_($)===this._preview&&"transform"===$.propertyName)&&(this._preview?.removeEventListener("transitionend",x),p(),clearTimeout(F))},F=setTimeout(x,1.5*a);this._preview.addEventListener("transitionend",x)}))}_createPlaceholderElement(){const h=this._placeholderTemplate,a=h?h.template:null;let p;return a?(this._placeholderRef=h.viewContainer.createEmbeddedView(a,h.context),this._placeholderRef.detectChanges(),p=jr(this._placeholderRef,this._document)):p=Vr(this._rootElement),p.style.pointerEvents="none",p.classList.add("cdk-drag-placeholder"),p}_getPointerPositionInElement(h,a,p){const x=a===this._rootElement?null:a,F=x?x.getBoundingClientRect():h,$=en(p)?p.targetTouches[0]:p,ie=this._getViewportScrollPosition();return{x:F.left-h.left+($.pageX-F.left-ie.left),y:F.top-h.top+($.pageY-F.top-ie.top)}}_getPointerPositionOnPage(h){const a=this._getViewportScrollPosition(),p=en(h)?h.touches[0]||h.changedTouches[0]||{pageX:0,pageY:0}:h,x=p.pageX-a.left,F=p.pageY-a.top;if(this._ownerSVGElement){const $=this._ownerSVGElement.getScreenCTM();if($){const ie=this._ownerSVGElement.createSVGPoint();return ie.x=x,ie.y=F,ie.matrixTransform($.inverse())}}return{x,y:F}}_getConstrainedPointerPosition(h){const a=this._dropContainer?this._dropContainer.lockAxis:null;let{x:p,y:x}=this.constrainPosition?this.constrainPosition(h,this,this._initialClientRect,this._pickupPositionInElement):h;if("x"===this.lockAxis||"x"===a?x=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===a)&&(p=this._pickupPositionOnPage.x),this._boundaryRect){const{x:F,y:$}=this._pickupPositionInElement,ie=this._boundaryRect,{width:ue,height:ve}=this._getPreviewRect(),Pe=ie.top+$,Je=ie.bottom-(ve-$);p=Zr(p,ie.left+F,ie.right-(ue-F)),x=Zr(x,Pe,Je)}return{x:p,y:x}}_updatePointerDirectionDelta(h){const{x:a,y:p}=h,x=this._pointerDirectionDelta,F=this._pointerPositionAtLastDirectionChange,$=Math.abs(a-F.x),ie=Math.abs(p-F.y);return $>this._config.pointerDirectionChangeThreshold&&(x.x=a>F.x?1:-1,F.x=a),ie>this._config.pointerDirectionChangeThreshold&&(x.y=p>F.y?1:-1,F.y=p),x}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const h=this._handles.length>0||!this.isDragging();h!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=h,Bi(this._rootElement,h))}_removeRootElementListeners(h){h.removeEventListener("mousedown",this._pointerDown,bn),h.removeEventListener("touchstart",this._pointerDown,Hr),h.removeEventListener("dragstart",this._nativeDragStart,bn)}_applyRootElementTransform(h,a){const p=yn(h,a),x=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=x.transform&&"none"!=x.transform?x.transform:""),x.transform=vn(p,this._initialTransform)}_applyPreviewTransform(h,a){const p=this._previewTemplate?.template?void 0:this._initialTransform,x=yn(h,a);this._preview.style.transform=vn(x,p)}_getDragDistance(h){const a=this._pickupPositionOnPage;return a?{x:h.x-a.x,y:h.y-a.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:h,y:a}=this._passiveTransform;if(0===h&&0===a||this.isDragging()||!this._boundaryElement)return;const p=this._rootElement.getBoundingClientRect(),x=this._boundaryElement.getBoundingClientRect();if(0===x.width&&0===x.height||0===p.width&&0===p.height)return;const F=x.left-p.left,$=p.right-x.right,ie=x.top-p.top,ue=p.bottom-x.bottom;x.width>p.width?(F>0&&(h+=F),$>0&&(h-=$)):h=0,x.height>p.height?(ie>0&&(a+=ie),ue>0&&(a-=ue)):a=0,(h!==this._passiveTransform.x||a!==this._passiveTransform.y)&&this.setFreeDragPosition({y:a,x:h})}_getDragStartDelay(h){const a=this.dragStartDelay;return"number"==typeof a?a:en(h)?a.touch:a?a.mouse:0}_updateOnScroll(h){const a=this._parentPositions.handleScroll(h);if(a){const p=_(h);this._boundaryRect&&p!==this._boundaryElement&&p.contains(this._boundaryElement)&&Xi(this._boundaryRect,a.top,a.left),this._pickupPositionOnPage.x+=a.left,this._pickupPositionOnPage.y+=a.top,this._dropContainer||(this._activeTransform.x-=a.left,this._activeTransform.y-=a.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=d(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(h,a){const p=this._previewContainer||"global";if("parent"===p)return h;if("global"===p){const x=this._document;return a||x.fullscreenElement||x.webkitFullscreenElement||x.mozFullScreenElement||x.msFullscreenElement||x.body}return $e(p)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(h){return this._handles.find(a=>h.target&&(h.target===a||a.contains(h.target)))}}function yn(k,h){return`translate3d(${Math.round(k)}px, ${Math.round(h)}px, 0)`}function Zr(k,h,a){return Math.max(h,Math.min(a,k))}function en(k){return"t"===k.type[0]}function jr(k,h){const a=k.rootNodes;if(1===a.length&&a[0].nodeType===h.ELEMENT_NODE)return a[0];const p=h.createElement("div");return a.forEach(x=>p.appendChild(x)),p}function qr(k,h){k.style.width=`${h.width}px`,k.style.height=`${h.height}px`,k.style.transform=yn(h.left,h.top)}function Wr(k,h,a){const p=tn(h,k.length-1),x=tn(a,k.length-1);if(p===x)return;const F=k[p],$=x<p?-1:1;for(let ie=p;ie!==x;ie+=$)k[ie]=k[ie+$];k[x]=F}function tn(k,h){return Math.max(0,Math.min(h,k))}class xs{constructor(h,a){this._element=h,this._dragDropRegistry=a,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(h){this.withItems(h)}sort(h,a,p,x){const F=this._itemPositions,$=this._getItemIndexFromPointerPosition(h,a,p,x);if(-1===$&&F.length>0)return null;const ie="horizontal"===this.orientation,ue=F.findIndex(ei=>ei.drag===h),ve=F[$],Je=ve.clientRect,yt=ue>$?1:-1,bi=this._getItemOffsetPx(F[ue].clientRect,Je,yt),si=this._getSiblingOffsetPx(ue,F,yt),hi=F.slice();return Wr(F,ue,$),F.forEach((ei,Ys)=>{if(hi[Ys]===ei)return;const rs=ei.drag===h,Jn=rs?bi:si,ss=rs?h.getPlaceholderElement():ei.drag.getRootElement();ei.offset+=Jn,ie?(ss.style.transform=vn(`translate3d(${Math.round(ei.offset)}px, 0, 0)`,ei.initialTransform),Xi(ei.clientRect,0,Jn)):(ss.style.transform=vn(`translate3d(0, ${Math.round(ei.offset)}px, 0)`,ei.initialTransform),Xi(ei.clientRect,Jn,0))}),this._previousSwap.overlaps=Zn(Je,a,p),this._previousSwap.drag=ve.drag,this._previousSwap.delta=ie?x.x:x.y,{previousIndex:ue,currentIndex:$}}enter(h,a,p,x){const F=null==x||x<0?this._getItemIndexFromPointerPosition(h,a,p):x,$=this._activeDraggables,ie=$.indexOf(h),ue=h.getPlaceholderElement();let ve=$[F];if(ve===h&&(ve=$[F+1]),!ve&&(null==F||-1===F||F<$.length-1)&&this._shouldEnterAsFirstChild(a,p)&&(ve=$[0]),ie>-1&&$.splice(ie,1),ve&&!this._dragDropRegistry.isDragging(ve)){const Pe=ve.getRootElement();Pe.parentElement.insertBefore(ue,Pe),$.splice(F,0,h)}else $e(this._element).appendChild(ue),$.push(h);ue.style.transform="",this._cacheItemPositions()}withItems(h){this._activeDraggables=h.slice(),this._cacheItemPositions()}withSortPredicate(h){this._sortPredicate=h}reset(){this._activeDraggables.forEach(h=>{const a=h.getRootElement();if(a){const p=this._itemPositions.find(x=>x.drag===h)?.initialTransform;a.style.transform=p||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(h){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(p=>p.drag===h)}updateOnScroll(h,a){this._itemPositions.forEach(({clientRect:p})=>{Xi(p,h,a)}),this._itemPositions.forEach(({drag:p})=>{this._dragDropRegistry.isDragging(p)&&p._sortFromLastPointerPosition()})}_cacheItemPositions(){const h="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(a=>{const p=a.getVisibleElement();return{drag:a,offset:0,initialTransform:p.style.transform||"",clientRect:Hn(p)}}).sort((a,p)=>h?a.clientRect.left-p.clientRect.left:a.clientRect.top-p.clientRect.top)}_getItemOffsetPx(h,a,p){const x="horizontal"===this.orientation;let F=x?a.left-h.left:a.top-h.top;return-1===p&&(F+=x?a.width-h.width:a.height-h.height),F}_getSiblingOffsetPx(h,a,p){const x="horizontal"===this.orientation,F=a[h].clientRect,$=a[h+-1*p];let ie=F[x?"width":"height"]*p;if($){const ue=x?"left":"top",ve=x?"right":"bottom";-1===p?ie-=$.clientRect[ue]-F[ve]:ie+=F[ue]-$.clientRect[ve]}return ie}_shouldEnterAsFirstChild(h,a){if(!this._activeDraggables.length)return!1;const p=this._itemPositions,x="horizontal"===this.orientation;if(p[0].drag!==this._activeDraggables[0]){const $=p[p.length-1].clientRect;return x?h>=$.right:a>=$.bottom}{const $=p[0].clientRect;return x?h<=$.left:a<=$.top}}_getItemIndexFromPointerPosition(h,a,p,x){const F="horizontal"===this.orientation,$=this._itemPositions.findIndex(({drag:ie,clientRect:ue})=>{if(ie===h)return!1;if(x){const ve=F?x.x:x.y;if(ie===this._previousSwap.drag&&this._previousSwap.overlaps&&ve===this._previousSwap.delta)return!1}return F?a>=Math.floor(ue.left)&&a<Math.floor(ue.right):p>=Math.floor(ue.top)&&p<Math.floor(ue.bottom)});return-1!==$&&this._sortPredicate($,h)?$:-1}}class Ss{constructor(h,a,p,x,F){this._dragDropRegistry=a,this._ngZone=x,this._viewportRuler=F,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ye.x,this.entered=new ye.x,this.exited=new ye.x,this.dropped=new ye.x,this.sorted=new ye.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Ht.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ye.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function ls(k=0,h=Qe.z){return k<0&&(k=0),ki(k,k,h)}(0,de).pipe((0,mn.R)(this._stopScrollTimers)).subscribe(()=>{const $=this._scrollNode,ie=this.autoScrollStep;1===this._verticalScrollDirection?$.scrollBy(0,-ie):2===this._verticalScrollDirection&&$.scrollBy(0,ie),1===this._horizontalScrollDirection?$.scrollBy(-ie,0):2===this._horizontalScrollDirection&&$.scrollBy(ie,0)})},this.element=$e(h),this._document=p,this.withScrollableParents([this.element]),a.registerDropContainer(this),this._parentPositions=new Nr(p),this._sortStrategy=new xs(this.element,a),this._sortStrategy.withSortPredicate(($,ie)=>this.sortPredicate($,ie,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(h,a,p,x){this._draggingStarted(),null==x&&this.sortingDisabled&&(x=this._draggables.indexOf(h)),this._sortStrategy.enter(h,a,p,x),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:h,container:this,currentIndex:this.getItemIndex(h)})}exit(h){this._reset(),this.exited.next({item:h,container:this})}drop(h,a,p,x,F,$,ie,ue={}){this._reset(),this.dropped.next({item:h,currentIndex:a,previousIndex:p,container:this,previousContainer:x,isPointerOverContainer:F,distance:$,dropPoint:ie,event:ue})}withItems(h){const a=this._draggables;return this._draggables=h,h.forEach(p=>p._withDropContainer(this)),this.isDragging()&&(a.filter(x=>x.isDragging()).every(x=>-1===h.indexOf(x))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(h){return this._sortStrategy.direction=h,this}connectedTo(h){return this._siblings=h.slice(),this}withOrientation(h){return this._sortStrategy.orientation=h,this}withScrollableParents(h){const a=$e(this.element);return this._scrollableElements=-1===h.indexOf(a)?[a,...h]:h.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(h){return this._isDragging?this._sortStrategy.getItemIndex(h):this._draggables.indexOf(h)}isReceiving(){return this._activeSiblings.size>0}_sortItem(h,a,p,x){if(this.sortingDisabled||!this._clientRect||!Fr(this._clientRect,.05,a,p))return;const F=this._sortStrategy.sort(h,a,p,x);F&&this.sorted.next({previousIndex:F.previousIndex,currentIndex:F.currentIndex,container:this,item:h})}_startScrollingIfNecessary(h,a){if(this.autoScrollDisabled)return;let p,x=0,F=0;if(this._parentPositions.positions.forEach(($,ie)=>{ie===this._document||!$.clientRect||p||Fr($.clientRect,.05,h,a)&&([x,F]=function Cs(k,h,a,p){const x=Yr(h,p),F=Jr(h,a);let $=0,ie=0;if(x){const ue=k.scrollTop;1===x?ue>0&&($=1):k.scrollHeight-ue>k.clientHeight&&($=2)}if(F){const ue=k.scrollLeft;1===F?ue>0&&(ie=1):k.scrollWidth-ue>k.clientWidth&&(ie=2)}return[$,ie]}(ie,$.clientRect,h,a),(x||F)&&(p=ie))}),!x&&!F){const{width:$,height:ie}=this._viewportRuler.getViewportSize(),ue={width:$,height:ie,top:0,right:$,bottom:ie,left:0};x=Yr(ue,a),F=Jr(ue,h),p=window}p&&(x!==this._verticalScrollDirection||F!==this._horizontalScrollDirection||p!==this._scrollNode)&&(this._verticalScrollDirection=x,this._horizontalScrollDirection=F,this._scrollNode=p,(x||F)&&p?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const h=$e(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=h.msScrollSnapType||h.scrollSnapType||"",h.scrollSnapType=h.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const h=$e(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(h).clientRect}_reset(){this._isDragging=!1;const h=$e(this.element).style;h.scrollSnapType=h.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(a=>a._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(h,a){return null!=this._clientRect&&Zn(this._clientRect,h,a)}_getSiblingContainerFromPosition(h,a,p){return this._siblings.find(x=>x._canReceive(h,a,p))}_canReceive(h,a,p){if(!this._clientRect||!Zn(this._clientRect,a,p)||!this.enterPredicate(h,this))return!1;const x=this._getShadowRoot().elementFromPoint(a,p);if(!x)return!1;const F=$e(this.element);return x===F||F.contains(x)}_startReceiving(h,a){const p=this._activeSiblings;!p.has(h)&&a.every(x=>this.enterPredicate(x,this)||this._draggables.indexOf(x)>-1)&&(p.add(h),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(h){this._activeSiblings.delete(h),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>{if(this.isDragging()){const a=this._parentPositions.handleScroll(h);a&&this._sortStrategy.updateOnScroll(a.top,a.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const h=d($e(this.element));this._cachedShadowRoot=h||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const h=this._sortStrategy.getActiveItemsSnapshot().filter(a=>a.isDragging());this._siblings.forEach(a=>a._startReceiving(this,h))}}function Yr(k,h){const{top:a,bottom:p,height:x}=k,F=.05*x;return h>=a-F&&h<=a+F?1:h>=p-F&&h<=p+F?2:0}function Jr(k,h){const{left:a,right:p,width:x}=k,F=.05*x;return h>=a-F&&h<=a+F?1:h>=p-F&&h<=p+F?2:0}const wn=i({passive:!1,capture:!0});let ks=(()=>{class k{constructor(a,p){this._ngZone=a,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=x=>x.isDragging(),this.pointerMove=new ye.x,this.pointerUp=new ye.x,this.scroll=new ye.x,this._preventDefaultWhileDragging=x=>{this._activeDragInstances.length>0&&x.preventDefault()},this._persistentTouchmoveListener=x=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&x.preventDefault(),this.pointerMove.next(x))},this._document=p}registerDropContainer(a){this._dropInstances.has(a)||this._dropInstances.add(a)}registerDragItem(a){this._dragInstances.add(a),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,wn)})}removeDropContainer(a){this._dropInstances.delete(a)}removeDragItem(a){this._dragInstances.delete(a),this.stopDragging(a),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,wn)}startDragging(a,p){if(!(this._activeDragInstances.indexOf(a)>-1)&&(this._activeDragInstances.push(a),1===this._activeDragInstances.length)){const x=p.type.startsWith("touch");this._globalListeners.set(x?"touchend":"mouseup",{handler:F=>this.pointerUp.next(F),options:!0}).set("scroll",{handler:F=>this.scroll.next(F),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:wn}),x||this._globalListeners.set("mousemove",{handler:F=>this.pointerMove.next(F),options:wn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((F,$)=>{this._document.addEventListener($,F.handler,F.options)})})}}stopDragging(a){const p=this._activeDragInstances.indexOf(a);p>-1&&(this._activeDragInstances.splice(p,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(a){return this._activeDragInstances.indexOf(a)>-1}scrolled(a){const p=[this.scroll];return a&&a!==this._document&&p.push(new ot.y(x=>this._ngZone.runOutsideAngular(()=>{const $=ie=>{this._activeDragInstances.length&&x.next(ie)};return a.addEventListener("scroll",$,!0),()=>{a.removeEventListener("scroll",$,!0)}}))),(0,Dr.T)(...p)}ngOnDestroy(){this._dragInstances.forEach(a=>this.removeDragItem(a)),this._dropInstances.forEach(a=>this.removeDropContainer(a)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((a,p)=>{this._document.removeEventListener(p,a.handler,a.options)}),this._globalListeners.clear()}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(w.R0b),w.LFG(wt.K0))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Is={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let qn=(()=>{class k{constructor(a,p,x,F){this._document=a,this._ngZone=p,this._viewportRuler=x,this._dragDropRegistry=F}createDrag(a,p=Is){return new ys(a,p,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(a){return new Ss(a,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return k.\u0275fac=function(a){return new(a||k)(w.LFG(wt.K0),w.LFG(w.R0b),w.LFG(T),w.LFG(ks))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Wn=new w.OlP("CDK_DRAG_PARENT"),Gn=new w.OlP("CdkDropListGroup"),$r=new w.OlP("CDK_DRAG_CONFIG");let Ts=0;const Qr=new w.OlP("CdkDropList");let Xr=(()=>{class k{constructor(a,p,x,F,$,ie,ue){this.element=a,this._changeDetectorRef=x,this._scrollDispatcher=F,this._dir=$,this._group=ie,this._destroyed=new ye.x,this.connectedTo=[],this.id="cdk-drop-list-"+Ts++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new w.vpe,this.entered=new w.vpe,this.exited=new w.vpe,this.sorted=new w.vpe,this._unsortedItems=new Set,this._dropListRef=p.createDropList(a),this._dropListRef.data=this,ue&&this._assignDefaults(ue),this._dropListRef.enterPredicate=(ve,Pe)=>this.enterPredicate(ve.data,Pe.data),this._dropListRef.sortPredicate=(ve,Pe,Je)=>this.sortPredicate(ve,Pe.data,Je.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),k._dropLists.push(this),ie&&ie._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(a){this._dropListRef.disabled=this._disabled=qe(a)}addItem(a){this._unsortedItems.add(a),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(a){this._unsortedItems.delete(a),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((a,p)=>a._dragRef.getVisibleElement().compareDocumentPosition(p._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const a=k._dropLists.indexOf(this);a>-1&&k._dropLists.splice(a,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(a){this._dir&&this._dir.change.pipe((0,zn.O)(this._dir.value),(0,mn.R)(this._destroyed)).subscribe(p=>a.withDirection(p)),a.beforeStarted.subscribe(()=>{const p=function ci(k){return Array.isArray(k)?k:[k]}(this.connectedTo).map(x=>"string"==typeof x?k._dropLists.find($=>$.id===x):x);if(this._group&&this._group._items.forEach(x=>{-1===p.indexOf(x)&&p.push(x)}),!this._scrollableParentsResolved){const x=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(F=>F.getElementRef().nativeElement);this._dropListRef.withScrollableParents(x),this._scrollableParentsResolved=!0}a.disabled=this.disabled,a.lockAxis=this.lockAxis,a.sortingDisabled=qe(this.sortingDisabled),a.autoScrollDisabled=qe(this.autoScrollDisabled),a.autoScrollStep=We(this.autoScrollStep,2),a.connectedTo(p.filter(x=>x&&x!==this).map(x=>x._dropListRef)).withOrientation(this.orientation)})}_handleEvents(a){a.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),a.entered.subscribe(p=>{this.entered.emit({container:this,item:p.item.data,currentIndex:p.currentIndex})}),a.exited.subscribe(p=>{this.exited.emit({container:this,item:p.item.data}),this._changeDetectorRef.markForCheck()}),a.sorted.subscribe(p=>{this.sorted.emit({previousIndex:p.previousIndex,currentIndex:p.currentIndex,container:this,item:p.item.data})}),a.dropped.subscribe(p=>{this.dropped.emit({previousIndex:p.previousIndex,currentIndex:p.currentIndex,previousContainer:p.previousContainer.data,container:p.container.data,item:p.item.data,isPointerOverContainer:p.isPointerOverContainer,distance:p.distance,dropPoint:p.dropPoint,event:p.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(a){const{lockAxis:p,draggingDisabled:x,sortingDisabled:F,listAutoScrollDisabled:$,listOrientation:ie}=a;this.disabled=x??!1,this.sortingDisabled=F??!1,this.autoScrollDisabled=$??!1,this.orientation=ie||"vertical",p&&(this.lockAxis=p)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(a=>a._dragRef))}}return k._dropLists=[],k.\u0275fac=function(a){return new(a||k)(w.Y36(w.SBq),w.Y36(qn),w.Y36(w.sBO),w.Y36(I),w.Y36(Lr,8),w.Y36(Gn,12),w.Y36($r,8))},k.\u0275dir=w.lG2({type:k,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(a,p){2&a&&(w.uIk("id",p.id),w.ekj("cdk-drop-list-disabled",p.disabled)("cdk-drop-list-dragging",p._dropListRef.isDragging())("cdk-drop-list-receiving",p._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[w._Bn([{provide:Gn,useValue:void 0},{provide:Qr,useExisting:k}])]}),k})();const Kn=new w.OlP("CdkDragHandle"),es=new w.OlP("CdkDragPlaceholder"),ts=new w.OlP("CdkDragPreview");let is=(()=>{class k{constructor(a,p,x,F,$,ie,ue,ve,Pe,Je,yt){this.element=a,this.dropContainer=p,this._ngZone=F,this._viewContainerRef=$,this._dir=ue,this._changeDetectorRef=Pe,this._selfHandle=Je,this._parentDrag=yt,this._destroyed=new ye.x,this.started=new w.vpe,this.released=new w.vpe,this.ended=new w.vpe,this.entered=new w.vpe,this.exited=new w.vpe,this.dropped=new w.vpe,this.moved=new ot.y(bi=>{const si=this._dragRef.moved.pipe((0,hs.U)(hi=>({source:this,pointerPosition:hi.pointerPosition,event:hi.event,delta:hi.delta,distance:hi.distance}))).subscribe(bi);return()=>{si.unsubscribe()}}),this._dragRef=ve.createDrag(a,{dragStartThreshold:ie&&null!=ie.dragStartThreshold?ie.dragStartThreshold:5,pointerDirectionChangeThreshold:ie&&null!=ie.pointerDirectionChangeThreshold?ie.pointerDirectionChangeThreshold:5,zIndex:ie?.zIndex}),this._dragRef.data=this,k._dragInstances.push(this),ie&&this._assignDefaults(ie),p&&(this._dragRef._withDropContainer(p._dropListRef),p.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(a){this._disabled=qe(a),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(a){this._dragRef.setFreeDragPosition(a)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Rr.q)(1),(0,mn.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(a){const p=a.rootElementSelector,x=a.freeDragPosition;p&&!p.firstChange&&this._updateRootElement(),x&&!x.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const a=k._dragInstances.indexOf(this);a>-1&&k._dragInstances.splice(a,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const a=this.element.nativeElement;let p=a;this.rootElementSelector&&(p=void 0!==a.closest?a.closest(this.rootElementSelector):a.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(p||a)}_getBoundaryElement(){const a=this.boundaryElement;return a?"string"==typeof a?this.element.nativeElement.closest(a):$e(a):null}_syncInputs(a){a.beforeStarted.subscribe(()=>{if(!a.isDragging()){const p=this._dir,x=this.dragStartDelay,F=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,$=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;a.disabled=this.disabled,a.lockAxis=this.lockAxis,a.dragStartDelay="object"==typeof x&&x?x:We(x),a.constrainPosition=this.constrainPosition,a.previewClass=this.previewClass,a.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(F).withPreviewTemplate($).withPreviewContainer(this.previewContainer||"global"),p&&a.withDirection(p.value)}}),a.beforeStarted.pipe((0,Rr.q)(1)).subscribe(()=>{if(this._parentDrag)return void a.withParent(this._parentDrag._dragRef);let p=this.element.nativeElement.parentElement;for(;p;){if(p.classList.contains("cdk-drag")){a.withParent(k._dragInstances.find(x=>x.element.nativeElement===p)?._dragRef||null);break}p=p.parentElement}})}_handleEvents(a){a.started.subscribe(p=>{this.started.emit({source:this,event:p.event}),this._changeDetectorRef.markForCheck()}),a.released.subscribe(p=>{this.released.emit({source:this,event:p.event})}),a.ended.subscribe(p=>{this.ended.emit({source:this,distance:p.distance,dropPoint:p.dropPoint,event:p.event}),this._changeDetectorRef.markForCheck()}),a.entered.subscribe(p=>{this.entered.emit({container:p.container.data,item:this,currentIndex:p.currentIndex})}),a.exited.subscribe(p=>{this.exited.emit({container:p.container.data,item:this})}),a.dropped.subscribe(p=>{this.dropped.emit({previousIndex:p.previousIndex,currentIndex:p.currentIndex,previousContainer:p.previousContainer.data,container:p.container.data,isPointerOverContainer:p.isPointerOverContainer,item:this,distance:p.distance,dropPoint:p.dropPoint,event:p.event})})}_assignDefaults(a){const{lockAxis:p,dragStartDelay:x,constrainPosition:F,previewClass:$,boundaryElement:ie,draggingDisabled:ue,rootElementSelector:ve,previewContainer:Pe}=a;this.disabled=ue??!1,this.dragStartDelay=x||0,p&&(this.lockAxis=p),F&&(this.constrainPosition=F),$&&(this.previewClass=$),ie&&(this.boundaryElement=ie),ve&&(this.rootElementSelector=ve),Pe&&(this.previewContainer=Pe)}_setupHandlesListener(){this._handles.changes.pipe((0,zn.O)(this._handles),(0,cs.b)(a=>{const p=a.filter(x=>x._parentDrag===this).map(x=>x.element);this._selfHandle&&this.rootElementSelector&&p.push(this.element),this._dragRef.withHandles(p)}),(0,fs.w)(a=>(0,Dr.T)(...a.map(p=>p._stateChanges.pipe((0,zn.O)(p))))),(0,mn.R)(this._destroyed)).subscribe(a=>{const p=this._dragRef,x=a.element.nativeElement;a.disabled?p.disableHandle(x):p.enableHandle(x)})}}return k._dragInstances=[],k.\u0275fac=function(a){return new(a||k)(w.Y36(w.SBq),w.Y36(Qr,12),w.Y36(wt.K0),w.Y36(w.R0b),w.Y36(w.s_b),w.Y36($r,8),w.Y36(Lr,8),w.Y36(qn),w.Y36(w.sBO),w.Y36(Kn,10),w.Y36(Wn,12))},k.\u0275dir=w.lG2({type:k,selectors:[["","cdkDrag",""]],contentQueries:function(a,p,x){if(1&a&&(w.Suo(x,ts,5),w.Suo(x,es,5),w.Suo(x,Kn,5)),2&a){let F;w.iGM(F=w.CRH())&&(p._previewTemplate=F.first),w.iGM(F=w.CRH())&&(p._placeholderTemplate=F.first),w.iGM(F=w.CRH())&&(p._handles=F)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(a,p){2&a&&w.ekj("cdk-drag-disabled",p.disabled)("cdk-drag-dragging",p._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[w._Bn([{provide:Wn,useExisting:k}]),w.TTD]}),k})(),Ls=(()=>{class k{}return k.\u0275fac=function(a){return new(a||k)},k.\u0275mod=w.oAB({type:k}),k.\u0275inj=w.cJS({providers:[qn],imports:[ee]}),k})();var Yn=we(5247),Ms=we(7185),Os=we(797),Ui=we(433),Fs=we(1481);let Ns=(()=>{class k{constructor(a){this.sanitizer=a}transform(a){return this.sanitizer.bypassSecurityTrustHtml(a)}}return k.\u0275fac=function(a){return new(a||k)(w.Y36(Fs.H7,16))},k.\u0275pipe=w.Yjl({name:"safeHtml",type:k,pure:!0}),k})();const Vs=["drawingCanvas"],zs=["draggableElement"];function Bs(k,h){if(1&k&&(w.TgZ(0,"div",60),w._UZ(1,"img",61),w.qZA()),2&k){const a=h.$implicit;w.xp6(1),w.Q6J("src",a,w.LSH)}}function Us(k,h){if(1&k&&w._UZ(0,"img",63),2&k){const a=w.oxw().$implicit;w.Q6J("src",a,w.LSH)}}function Hs(k,h){if(1&k&&(w.TgZ(0,"div",60),w.YNc(1,Us,1,1,"img",62),w.qZA()),2&k){const a=h.$implicit;w.xp6(1),w.Q6J("ngIf",a)}}function Zs(k,h){if(1&k){const a=w.EpF();w.TgZ(0,"button",66),w.NdJ("click",function(){w.CHM(a);const x=w.oxw(2);return w.KtG(x.switchFormat())}),w.O4$(),w.TgZ(1,"svg",12),w._UZ(2,"path",67)(3,"path",68),w.qZA(),w._uU(4),w.qZA()}if(2&k){const a=w.oxw(2);w.xp6(4),w.hij(" ",a.isPostcard?"Wechsel zu Plakat":"Wechsel zu Postkarte"," ")}}function js(k,h){if(1&k&&(w.O4$(),w.kcU(),w.TgZ(0,"div",64)(1,"h2"),w._uU(2,"Nur f\xfcr Institute:"),w.qZA(),w.YNc(3,Zs,5,1,"button",65),w.qZA()),2&k){const a=w.oxw();w.xp6(3),w.Q6J("ngIf",a.hasPostCardAccess)}}function qs(k,h){if(1&k&&(w.TgZ(0,"div",81),w._UZ(1,"div",82),w.ALo(2,"safeHtml"),w.qZA()),2&k){const a=w.oxw(2);w.Udp("height",a.svgHeight)("width",a.svgWidth),w.xp6(1),w.Q6J("innerHTML",w.lcZ(2,5,a.svgContent),w.oJD)}}function Ws(k,h){if(1&k){const a=w.EpF();w.O4$(),w.kcU(),w.TgZ(0,"div",69)(1,"h1"),w._uU(2,"Hallo Institut. Forme dein Logo um."),w.qZA(),w.TgZ(3,"p",70),w._uU(4,"Lade dein Logo im svg Format hoch, der Algorithmus generiert ein komplett neues Kunstwerk, welches dann als Bild Datei herunterladen werden kann."),w.qZA(),w.TgZ(5,"h4"),w._uU(6,"Viel Spass !"),w.qZA(),w.TgZ(7,"div",71)(8,"input",72),w.NdJ("change",function(x){w.CHM(a);const F=w.oxw();return w.KtG(F.onLogoFileSelected(x))}),w.qZA(),w._UZ(9,"canvas",73),w.TgZ(10,"label",74),w.O4$(),w.TgZ(11,"svg",75),w._UZ(12,"path",76),w.qZA(),w._uU(13," SVG Datei hochladen"),w.qZA(),w.kcU(),w._UZ(14,"br"),w.qZA(),w.YNc(15,qs,3,7,"div",77),w.TgZ(16,"div",78)(17,"button",51),w.NdJ("click",function(){w.CHM(a);const x=w.oxw();return w.KtG(x.rearrangePaths())}),w._uU(18,"Logo Umgestalten"),w.qZA(),w.TgZ(19,"button",79),w.NdJ("click",function(){w.CHM(a);const x=w.oxw();return w.KtG(x.revertToOriginal())}),w._uU(20,"Original Wiederherstellen"),w.qZA(),w.TgZ(21,"button",51),w.NdJ("click",function(){w.CHM(a);const x=w.oxw();return w.KtG(x.downloadLogoAsPNG())}),w._uU(22,"Logo herunterladen"),w.qZA()(),w.TgZ(23,"div",80),w._UZ(24,"canvas"),w.qZA()()}if(2&k){const a=w.oxw();w.xp6(15),w.Q6J("ngIf",a.svgContent)}}const ns=function(k){return[k]};let Gs=(()=>{class k{constructor(a,p,x,F){this.messageService=a,this.plakatService=p,this.roleService=x,this.toastr=F,this.drawingTitle="",this.isCanvasReady=!1,this.lastDropPoint=new Xe.Point(0,0),this.svgPaths=[],this.stickers=[],this.availableStickers=["/assets/img/sticker/1db9bbe7-6fa7-4b50-a64d-d6c0994eeeb4.webp","/assets/img/sticker/3e173ed2-662d-4f6f-82b2-db4f53c06927.webp","/assets/img/sticker/3eb8c855-79df-4c19-bd0c-c89a00c128b3.webp","/assets/img/sticker/5e92da4d-0c5c-4de9-b4ed-6a7c4b44ff89.webp","/assets/img/sticker/6b5b8295-643e-4d5d-8ccc-4316ed102247.webp","/assets/img/sticker/7fd7dd8c-814f-4fbd-89ba-c7e52fc03ae8.webp","/assets/img/sticker/8afce092-ad0c-4920-b1d7-208aeb7c3f29.webp","/assets/img/sticker/043c1d46-3368-4f13-9c25-4864e8a97475.webp","/assets/img/sticker/69c43ac3-04cb-4054-9a48-11a7c05e0d6d.webp","/assets/img/sticker/309e0e38-4a6e-4bfe-8b43-7f5add497376.webp","/assets/img/sticker/615c53c0-9e23-4cd2-b2a7-03363a33f1df.webp","/assets/img/sticker/46493c2f-8203-4e5c-b8ae-c2b40f810b0f.webp","/assets/img/sticker/8201897d-46c3-4c93-8316-a591e6b43b94.webp","/assets/img/sticker/81582816-bf2d-450d-abc5-de4d19a3ba37.webp","/assets/img/sticker/86607939-de7b-4bc1-8d47-3cae90a20e73.webp","/assets/img/sticker/a2e39570-2f5c-441a-ae54-108f64224e0b.webp","/assets/img/sticker/b77edec1-9d69-49f1-a6ee-8f00282a1657.webp","/assets/img/sticker/cc8107b5-a9fc-4adf-883a-0aff1aab232d.webp","/assets/img/sticker/d29b2cf8-898c-4e7a-a7a5-7e5af257b181.webp","/assets/img/sticker/de644bf0-d71b-4a0d-90e8-038019057b0d.webp","/assets/img/sticker/df02839d-a49c-4402-b58e-87121d0b1870.webp","/assets/img/sticker/e4ef5951-5596-43ad-91ed-3478b84ec627.webp","/assets/img/sticker/f02555a2-0a14-46a8-85ab-9ceccc7bde3d.webp","/assets/img/sticker/fc8d9a4e-6d63-4f7a-bfb5-c45e7229729f.webp"],this.frameSources={K\u00f6nigsblau:{postcard:"/assets/img/postcard/Postkarten_frei_7.png",poster:"/assets/img/poster/OttoRahmen_bunt_1.png"},Violette:{postcard:"/assets/img/postcard/Postkarten_frei_11.png",poster:"/assets/img/poster/OttoRahmen_bunt_2.png"},Rot:{postcard:"/assets/img/postcard/Postkarten_frei_5.png",poster:"/assets/img/poster/OttoRahmen_bunt_3.png"},Turquise:{postcard:"/assets/img/postcard/Postkarten_frei_1.png",poster:"/assets/img/poster/OttoRahmen_bunt_4.png"},Lila:{postcard:"/assets/img/postcard/Postkarten_frei_6.png",poster:"/assets/img/poster/OttoRahmen_bunt_5.png"},Pink:{postcard:"/assets/img/postcard/Postkarten_frei_3.png",poster:"/assets/img/poster/OttoRahmen_bunt_6.png"},Gelb:{postcard:"/assets/img/postcard/Postkarten_frei_8.png",poster:"/assets/img/poster/OttoRahmen_bunt_7.png"},Rosa:{postcard:"/assets/img/postcard/Postkarten_frei_2.png",poster:"/assets/img/poster/OttoRahmen_bunt_8.png"},Minze:{postcard:"/assets/img/postcard/Postkarten_frei_9.png",poster:"/assets/img/poster/OttoRahmen_bunt_9.png"},Babyblau:{postcard:"/assets/img/postcard/Postkarten_frei_4.png",poster:"/assets/img/poster/OttoRahmen_bunt_10.png"},Orange:{postcard:"/assets/img/postcard/Postkarten_frei_12.png",poster:"/assets/img/poster/OttoRahmen_bunt_11.png"},Gr\u00fcn:{postcard:"/assets/img/postcard/Postkarten_frei_10.png",poster:"/assets/img/poster/OttoRahmen_bunt_12.png"}},this.canvasStickers=[""],this.svgContent="",this.originalSvgContent="",this.svgHeight="",this.svgWidth="",this.role=null,this.hasPostCardAccess=!1,this.drawingPath=null,this.isDrawing=!1,this.isDraggingSticker=!1,this.isUndoRedoAction=!1,this.isActionInProgress=!1,this.stateHistory=[],this.currentStateIndex=0,this.maxHistoryStates=50,this.isDialogOpen=!1,this.isEraserActive=!1,this.isPostcard=!1,this.isPoster=!0,this.plakat={id:0,title:"",drawingJson:"",stickers:[]},this.strokeSize=2,this.eraserSize=2,this.strokeColor=new Xe.Color(0,0,0),this.strokeHexColor="#000000",this.imagesPerPage=6,this.currentPage=1,this.totalPages=4,this.drawingColor="black",this.logoFileName="",this.postcardSize={width:1225/1.5,height:874/1.5},this.posterSize={width:874/1.5,height:1225/1.5},this.postCardSource="/assets/img/postcard/Postkarten_frei_4.png",this.posterSource=this.frameSources.K\u00f6nigsblau.poster,this.editorData="<p>Initial content of the editor.</p>"}ngOnInit(){const a=localStorage.getItem("selectedFrameColor"),p=localStorage.getItem("selectedBackgroundColor");a&&this.frameSources[a]&&(this.posterSource=this.frameSources[a].poster,this.postCardSource=this.frameSources[a].postcard||this.postCardSource),p&&this.setBackground(p),this.role=this.roleService.getRole(),("Team"===this.role||"K\xfcnstler"===this.role)&&(this.hasPostCardAccess=!0);const x=localStorage.getItem("drawingTitle");x&&(this.drawingTitle=x);const F=localStorage.getItem("drawingStateHistory");F&&(this.stateHistory=JSON.parse(F),this.currentStateIndex=this.stateHistory.length-1)}ngAfterViewInit(){if(this.initializePaperCanvas(),this.initializeDrawing(),this.backgroundLayer=new this.paperScope.Layer,this.isPoster){const a=localStorage.getItem("posterDrawing");a&&this.paperScope.project.importJSON(a)}else{const a=localStorage.getItem("postcardDrawing");a&&this.paperScope.project.importJSON(a),a||setTimeout(()=>{this.saveState(),console.log("Initial state saved after delay")},100)}this.isCanvasReady=!0}initializePaperCanvas(){this.paperScope=new Xe.PaperScope,this.paperScope.setup(this.drawingCanvas.nativeElement),this.initializeLayers();const a=localStorage.getItem("userDrawing");a?(this.paperScope.project.importJSON(a),console.log("Loaded saved drawing from localStorage")):console.log("No saved drawing, initializing new canvas"),this.isCanvasReady=!0}isBackgroundBlack(){return"#000000"===this.strokeHexColor||"#000000"===this.mapColorNameToHex(this.strokeHexColor)}saveState(){if(this.isUndoRedoAction)return void console.log("Undo/redo action in progress, not saving state.");const a=this.paperScope.project.exportJSON();this.stateHistory=this.stateHistory.slice(0,this.currentStateIndex+1),this.stateHistory.push(a),this.currentStateIndex++,this.stateHistory.length>this.maxHistoryStates&&(this.stateHistory.shift(),this.currentStateIndex--),localStorage.setItem("drawingStateHistory",JSON.stringify(this.stateHistory)),console.log("State saved."),console.log("Current State Index: ",this.currentStateIndex),console.log("Total History Length: ",this.stateHistory.length)}undo(){this.isActionInProgress||(this.isActionInProgress=!0,console.log("Undo triggered."),this.currentStateIndex>0?(this.isUndoRedoAction=!0,this.currentStateIndex--,this.loadState().then(()=>{this.isUndoRedoAction=!1,this.isActionInProgress=!1})):this.isActionInProgress=!1)}redo(){console.log("Redo triggered."),this.currentStateIndex<=this.stateHistory.length-1&&(this.isUndoRedoAction=!0,this.currentStateIndex++,this.loadState(),this.isUndoRedoAction=!1),console.log("After redo, currentStateIndex: ",this.currentStateIndex),console.log("Total History Length: ",this.stateHistory.length)}loadState(){var a=this;return(0,Zi.Z)(function*(){console.log("Loading state at index: ",a.currentStateIndex),a.currentStateIndex>=0&&a.currentStateIndex<a.stateHistory.length?(a.paperScope.project.clear(),yield new Promise(p=>{a.paperScope.project.importJSON(a.stateHistory[a.currentStateIndex]),a.paperScope.view.update(),p()}),console.log("State loaded.")):console.warn("Invalid state index:",a.currentStateIndex)})()}handleDialogClose(a){if(a.success){const p=a.color,x=a.backgroundColor;this.posterSource=this.frameSources[p].poster,this.postCardSource=this.frameSources[p].postcard||this.postCardSource,this.setBackground(x),"Schwarz"===x||"#000000"===this.mapColorNameToHex(x)?(this.strokeColor=new Xe.Color("#FFFFFF"),this.strokeHexColor="#FFFFFF"):(this.strokeColor=new Xe.Color("#000000"),this.strokeHexColor="#000000"),this.initializePaperCanvas(),this.initializeDrawing(),localStorage.setItem("selectedFrameColor",p),localStorage.setItem("selectedBackgroundColor",x);const F=localStorage.getItem("drawingStateHistory");F&&(this.stateHistory=JSON.parse(F),this.currentStateIndex=this.stateHistory.length-1),this.clearCanvas(),localStorage.removeItem("posterDrawing"),localStorage.removeItem("postcardDrawing"),setTimeout(()=>{this.saveState(),console.log("Initial state saved after delay")},100)}this.isDialogOpen=!1,this.isEraserActive=!1}setBackground(a){if(!this.isCanvasReady)return console.warn("Canvas not ready yet, delaying background setting."),void setTimeout(()=>this.setBackground(a),500);const p=this.mapColorNameToHex(a);localStorage.setItem("selectedBackgroundColor",a),this.backgroundLayer.removeChildren();const x=this.isPostcard?this.postcardSize:this.posterSize;this.paperScope.view.viewSize=new this.paperScope.Size(x.width,x.height);const F=new this.paperScope.Path.Rectangle({point:[0,0],size:[x.width,x.height],fillColor:p});this.backgroundLayer.addChild(F),this.backgroundLayer.sendToBack()}updateStrokeColor(a){this.strokeHexColor=a,this.strokeColor=new Xe.Color(a)}mapColorNameToHex(a){return{Wei\u00df:"#FFFFFF",Hellblau:"#ADD8E6",Schwarz:"#000000",Blau:"#0000FF",Rot:"#FF0000",Gr\u00fcn:"#008000",Gelb:"#FFFF00",Rosa:"#FFC0CB"}[a]||"#FFFFFF"}savePlakat(){this.plakatService.createPlakat(this.plakat).subscribe(a=>{console.log("Plakat created:",a)})}savePosterDrawing(){const a=this.paperScope.project.exportJSON();localStorage.setItem("posterDrawing",a),localStorage.setItem("drawingTitle",this.drawingTitle),this.toastr.success("Dein Plakat wurde gespeichert!")}savePostcardDrawing(){const a=this.paperScope.project.exportJSON();localStorage.setItem("postcardDrawing",a),localStorage.setItem("drawingTitle",this.drawingTitle),this.toastr.success("Deine Postkarte wurde gespeichert!")}addStickerToPlakat(a){this.plakatService.addSticker(this.plakat.id,{id:0,fileName:"",fileType:"",blobStorageUri:a,plakatId:this.plakat.id}).subscribe(()=>{console.log("Sticker added to plakat")})}svgToBase64(a){const x=(new TextEncoder).encode(a);let F="";return x.forEach($=>{F+=String.fromCharCode($)}),window.btoa(F)}drop(a){a.previousContainer===a.container?Wr(a.container.data,a.previousIndex,a.currentIndex):"canvas"===a.container.id?this.addStickerToCanvas(a.previousContainer.data[a.previousIndex]):function ws(k,h,a,p){const x=tn(p,h.length);k.length&&h.splice(x,0,k[a])}(a.previousContainer.data,a.container.data,a.previousIndex,a.currentIndex)}toggleEraser(){if(this.isEraserActive){const a=localStorage.getItem("selectedBackgroundColor")||"white";this.strokeColor=new Xe.Color(this.mapColorNameToHex(a))}else this.strokeColor=new Xe.Color(this.strokeHexColor)}addStickerToCanvas(a,p=!1){if(!this.isCanvasReady)return console.warn("Canvas not ready yet, delaying sticker addition."),void setTimeout(()=>this.addStickerToCanvas(a,p),100);this.paperScope.activate();const x=new Xe.Raster({source:a,position:this.lastDropPoint,visible:!1});x.onLoad=()=>{const F=p?150:100;x.scale(F/x.bounds.width,F/x.bounds.height),requestAnimationFrame(()=>{x.visible=!0});const $=new this.paperScope.Group([x]);this.addResizeAndRotationHandles($,x),this.saveState()},this.stickers.push(x)}addResizeAndRotationHandles(a,p){const F="Schwarz"===(localStorage.getItem("selectedBackgroundColor")||"Wei\xdf")?"FFFFFF":"000000",$=new Xe.Raster({source:"data:image/svg+xml;base64,"+this.svgToBase64(`\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#${F}" class="bi bi-arrows-angle-expand" viewBox="0 0 16 16">\n          <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707"/>\n        </svg>\n      `),position:p.bounds.bottomRight.add([3,0]),opacity:0}),ie=new Xe.Raster({source:"data:image/svg+xml;base64,"+this.svgToBase64(`\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#${F}" class="bi bi-x-lg" viewBox="0 0 16 16">\n          <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>\n        </svg>\n      `),position:p.bounds.topLeft.add([0,0]),opacity:0}),ue=new Xe.Raster({source:"data:image/svg+xml;base64,"+this.svgToBase64(`\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#${F}" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">\n        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>\n        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>\n      </svg>\n      `),position:p.bounds.topRight.add([3,0]),opacity:0});a.addChild($),a.addChild(ie),a.addChild(ue),this.enableStickerInteraction(a,$,ue);let ve=!1;a.onDoubleClick=()=>{ve=!ve,$.opacity=ve?1:0,ie.opacity=ve?1:0,ue.opacity=ve?1:0},ie.onClick=()=>{a.remove();const Pe=this.stickers.indexOf(p);Pe>-1&&this.stickers.splice(Pe,1),this.saveState()}}enableStickerInteraction(a,p,x){let F=!1,$=!1,ie=a.rotation,ue=0;a.onMouseDown=Pe=>{Pe.stopPropagation(),p.bounds.contains(Pe.point)?F=!0:x.bounds.contains(Pe.point)&&($=!0,ie=a.rotation,ue=Pe.point.y)},a.onMouseDrag=Pe=>{if(Pe.stopPropagation(),F){const Je=Pe.delta;a.scale(1+(Je.x+Je.y)/100,a.bounds.bottomRight)}else $?a.rotation=ie+.08*(Pe.point.y-ue):a.position=a.position.add(Pe.delta)},a.onMouseUp=Pe=>{Pe.stopPropagation(),F=!1,$=!1}}onCanvasMouseUp(a){const p=this.drawingCanvas.nativeElement.getBoundingClientRect();this.lastDropPoint=new Xe.Point(a.clientX-p.left,a.clientY-p.top)}get currentImages(){const a=(this.currentPage-1)*this.imagesPerPage;return this.availableStickers.slice(a,a+this.imagesPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}initializeLayers(){this.backgroundLayer=new this.paperScope.Layer;const a=localStorage.getItem("selectedBackgroundColor")||"white",p=this.mapColorNameToHex(a),x=this.isPostcard?this.postcardSize:this.posterSize;this.paperScope.view.viewSize=new this.paperScope.Size(x.width,x.height);const F=new this.paperScope.Path.Rectangle({point:[0,0],size:[x.width,x.height],fillColor:p});this.backgroundLayer.addChild(F),this.backgroundLayer.sendToBack(),this.drawingLayer=new this.paperScope.Layer,this.frameLayer=new this.paperScope.Layer;const ie=new this.paperScope.Raster({source:this.isPostcard?this.postCardSource:this.posterSource,position:this.paperScope.view.center});ie.onLoad=()=>{ie.size=new this.paperScope.Size(x.width,x.height),this.frameLayer.addChild(ie),this.paperScope.project.activeLayer.activate()}}bringFrameLayerToFront(){this.frameLayer.bringToFront(),this.paperScope.view.update()}enableDrawing(){this.isCanvasReady?(console.log("Canvas is ready, enabling drawing."),this.paperScope.view.onMouseDown=this.startDrawing.bind(this),this.paperScope.view.onMouseDrag=this.draw.bind(this),this.paperScope.view.onMouseUp=this.stopDrawing.bind(this)):console.log("Canvas is not ready yet.")}startDrawing(a){if(this.isDraggingSticker)console.log("Dragging sticker, not drawing.");else if(this.isDrawing=!0,this.isInsideDrawingArea(a.point)){console.log("Started drawing at:",a.point);const p=this.isEraserActive?new Xe.Color(this.mapColorNameToHex(localStorage.getItem("selectedBackgroundColor")||"white")):this.strokeColor;this.drawingPath=new this.paperScope.Path({strokeColor:p,strokeWidth:this.isEraserActive?this.eraserSize:this.strokeSize}),this.drawingPath.add(a.point)}else console.log("Mouse down outside of drawing area")}draw(a){!this.isDraggingSticker&&this.isDrawing&&this.drawingPath?this.isInsideDrawingArea(a.point)?(console.log("Drawing at:",a.point),this.drawingPath.add(a.point),this.paperScope.view.requestUpdate()):console.log("Mouse drag outside of drawing area"):console.log("Not drawing. isDraggingSticker:",this.isDraggingSticker,"isDrawing:",this.isDrawing,"drawingPath:",!!this.drawingPath)}switchFormat(){if(this.paperScope.project.exportJSON(),this.isPoster){const $=this.paperScope.project.exportJSON();localStorage.setItem("posterDrawing",$),localStorage.setItem("drawingTitle",this.drawingTitle)}else{const $=this.paperScope.project.exportJSON();localStorage.setItem("postcardDrawing",$),localStorage.setItem("drawingTitle",this.drawingTitle)}this.isPostcard=!this.isPostcard,this.isPoster=!this.isPoster,this.frameLayer.removeChildren(),this.paperScope.project.clear();const p=this.isPostcard?this.postCardSource:this.posterSource,x=localStorage.getItem("selectedBackgroundColor")||"white";this.setBackground(x);const F=new this.paperScope.Raster({source:p,position:this.paperScope.view.center});F.onLoad=()=>{this.frameLayer.addChild(F),this.paperScope.view.update(),this.isPostcard?this.restorePostcardDrawing():this.restorePosterDrawing()}}restorePosterDrawing(){const a=localStorage.getItem("posterDrawing");a?(this.paperScope.project.clear(),this.paperScope.project.importJSON(a)):this.clearCanvas()}restorePostcardDrawing(){const a=localStorage.getItem("postcardDrawing");a?(this.paperScope.project.clear(),this.paperScope.project.importJSON(a)):this.clearCanvas()}stopDrawing(){console.log("Mouse up, stopping drawing."),this.isDrawing=!1,this.saveState()}isInsideDrawingArea(a){return new this.paperScope.Path.Rectangle({from:new this.paperScope.Point(50,50),to:new this.paperScope.Point(this.paperScope.view.viewSize.width-50,this.paperScope.view.viewSize.height-50),strokeWidth:0}).contains(a)}saveDrawing(){this.isPoster?this.savePosterDrawing():this.savePostcardDrawing()}exportCanvasAsImage(){this.addFrameToTopLayer(),this.paperScope.view.update(),setTimeout(()=>{const p=this.drawingCanvas.nativeElement.toDataURL("image/png"),x=document.createElement("a");let F=""!==this.drawingTitle.trim()?this.drawingTitle:"Unbenannt";F=F.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"")+".png",x.href=p,x.download=F,document.body.appendChild(x),x.click(),document.body.removeChild(x)},100)}addImageSticker(){const a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=p=>{const x=p.target.files[0];if(x){const F=new FileReader;F.onload=$=>{this.addStickerToCanvas($.target.result,!0)},F.readAsDataURL(x)}},a.click()}isCanvasEmpty(){return this.paperScope.project.activeLayer&&this.paperScope.project.activeLayer.isEmpty()}dragSticker(a,p){const F=a.position.subtract(p.point);this.isDraggingSticker=!0,a.onMouseDrag=$=>{a.position=$.point.add(F)},a.onMouseUp=()=>{this.isDraggingSticker=!1,a.onMouseDrag=null}}clearAndResetDrawing(){this.drawingPath&&this.drawingPath.remove(),this.paperScope.project.clear(),localStorage.removeItem("userDrawing"),this.toastr.success("Dein Plakat ist gel\xf6scht!"),this.isDialogOpen=!1}clearCanvas(){this.paperScope.project.clear(),this.initializeLayers(),localStorage.removeItem("drawingTitle"),this.stateHistory=[],this.currentStateIndex=-1,localStorage.removeItem("drawingStateHistory"),this.toastr.success("Neues Plakat bereit!")}initializeDrawing(){console.log("initializeDrawing called"),this.enableDrawing()}openDialog(){this.isDialogOpen=!0,this.initializePaperCanvas()}onFileSelected(a){const p=a.target.files[0];if(p&&"image/svg+xml"===p.type){const x=new FileReader;x.onload=F=>{this.originalSvgContent=F.target.result,this.svgContent=F.target.result,this.parseSVG(this.svgContent)},x.readAsText(p)}}onLogoFileSelected(a){const p=a.target.files[0];if(p&&"image/svg+xml"===p.type){this.logoFileName=p.name.split(".").slice(0,-1).join(".");const x=new FileReader;x.onload=F=>{this.originalSvgContent=F.target.result,this.svgContent=F.target.result;const ue=(new DOMParser).parseFromString(this.svgContent,"image/svg+xml").querySelector("svg");if(ue){const ve=ue.getAttribute("width"),Pe=ue.getAttribute("height");this.svgWidth=ve||"500px",this.svgHeight=Pe||"500px";const Je=document.getElementById("logoCanvas");Je.width=parseInt(this.svgWidth,10),Je.height=parseInt(this.svgHeight,10)}this.parseSVG(this.svgContent)},x.readAsText(p)}}downloadLogoAsPNG(){const a=document.getElementById("logoCanvas"),p=a.getContext("2d"),x=new Image,F=new Blob([this.svgContent],{type:"image/svg+xml"}),$=URL.createObjectURL(F);x.onload=()=>{a.width=x.width,a.height=x.height,p.clearRect(0,0,a.width,a.height),p.drawImage(x,0,0,x.width,x.height);const ie=a.toDataURL("image/png"),ue=document.createElement("a");let ve=this.logoFileName?`${this.logoFileName}_otto`:"Unbenannt_otto";ve=ve.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"")+".png",ue.href=ie,ue.download=ve,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL($)},x.src=$}downloadSVG(){const a=new Blob([this.svgContent],{type:"image/svg+xml"}),p=URL.createObjectURL(a),x=document.createElement("a");let F=""!==this.drawingTitle.trim()?this.drawingTitle:"Unbenannt";F=F.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"")+".svg",x.href=p,x.download=F,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(p)}revertToOriginal(){this.svgContent=this.originalSvgContent,this.parseSVG(this.svgContent)}parseSVG(a){const F=(new DOMParser).parseFromString(a,"image/svg+xml").querySelectorAll("path");this.svgPaths=[],F.forEach($=>{this.svgPaths.push($.getAttribute("d")||"")}),console.log("Svg Pfade",F)}rearrangePaths(){if(!this.svgContent)return;const p=(new DOMParser).parseFromString(this.svgContent,"image/svg+xml"),x=p.querySelector("svg");if(!x)return;const F=parseInt(this.svgWidth,10),$=parseInt(this.svgHeight,10);Array.from(x.querySelectorAll("path")).forEach(ve=>{let Pe=ve.getAttribute("d")||"";Pe=Pe.replace(/([0-9]+\.?[0-9]*)/g,(Je,yt,bi)=>{const si=parseFloat(Je);let hi=200*Math.random()-10;return yt%2==0?Math.min(Math.max(si+hi,10),F).toFixed(2):Math.min(Math.max(si+hi,10),$).toFixed(2)}),ve.setAttribute("d",Pe)});const ue=new XMLSerializer;this.svgContent=ue.serializeToString(p)}shuffleArray(a){for(let p=a.length-1;p>0;p--){const x=Math.floor(Math.random()*(p+1));[a[p],a[x]]=[a[x],a[p]]}}changeStrokeColor(){this.drawingPath&&(this.drawingPath.strokeColor=this.strokeColor)}addFrameToTopLayer(){const a=new this.paperScope.Raster({source:this.isPostcard?this.postCardSource:this.posterSource,position:this.paperScope.view.center});a.onLoad=()=>{a.size=new this.paperScope.Size(this.paperScope.view.viewSize.width,this.paperScope.view.viewSize.height),a.bringToFront()}}}return k.\u0275fac=function(a){return new(a||k)(w.Y36(Yn.ez),w.Y36(Yn.Rl),w.Y36(Yn.Nj),w.Y36(Ms._W))},k.\u0275cmp=w.Xpm({type:k,selectors:[["app-mein-plakat"]],viewQuery:function(a,p){if(1&a&&(w.Gf(Vs,5),w.Gf(zs,5)),2&a){let x;w.iGM(x=w.CRH())&&(p.drawingCanvas=x.first),w.iGM(x=w.CRH())&&(p.draggableElements=x)}},decls:101,vars:23,consts:[[1,"wrapper"],["id","sticker"],["id","qr"],["href","www.qrcode-generator.de/","rel","nofollow",2,"cursor","default"],["src","https://ottoblob.blob.core.windows.net/images/frame.png"],[2,"color","black","font-size","2rem"],[2,"color","blueviolet","font-size","2rem"],[1,"page-plakate__button",2,"min-width","218px","margin","10px","background-color","royalblue",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-lg",2,"margin-bottom","-4px","margin-right","6px","font-weight","bold"],["fill-rule","evenodd","d","M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"],[1,"page-plakate__button",2,"min-width","180px","margin","10px","background-color","royalblue"],["href","https://ottoblob.blob.core.windows.net/sticker/otto-sticker-collection.zip"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download",2,"margin-bottom","-4px","font-weight","bold","margin-right","14px"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"],["cdkDropList","",1,"sticker-container"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["availableStickersList","cdkDropList"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-left"],["fill-rule","evenodd","d","M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],[2,"font-size","1.5rem"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-right"],["fill-rule","evenodd","d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"],["id","otto-plakat"],["type","text","placeholder","Dein Titel ...","id","drawingTitle",3,"ngModel","ngModelChange"],["id","canvas","cdkDropList","",1,"canvas-wrapper",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped","mouseup"],["canvasStickersList","cdkDropList"],["id","drawingCanvas",1,"custom-cursor"],["drawingCanvas",""],["id","controlls"],[2,"margin-left","-40px"],["id","stroke",2,"display","flex","flex-direction","row","justify-content","space-around"],[1,"row1"],[1,"brush-size"],[2,"color","black","text-align","start","font-size","2rem","margin-bottom","-20px"],["type","number","id","strokeSize",2,"width","100px","color","royalblue","float","left","margin-bottom","14px",3,"ngModel","ngModelChange"],[1,"eraser-size"],["type","number","id","strokeSize",2,"width","100px","color","royalblue","float","left",3,"ngModel","ngModelChange"],[1,"row2"],[1,"brush-color"],[2,"color","black","text-align","start","font-size","2rem","margin-bottom","0px"],["placeholder","Farbe","type","color","id","stroke-color",2,"width","fit-content","float","left","margin-bottom","25px",3,"ngModel","ngModelChange"],[1,"eraser"],[2,"color","black","text-align","start","font-size","2rem","margin-bottom","-10px"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"],["id","buttons",2,"margin-top","55px","margin-left","-40px"],[1,"page-plakate__button",2,"min-width","180px","margin","10px","background-color","royalblue",3,"click"],["d","M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z"],["fill-rule","evenodd","d","M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"],["d","M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"],["fill-rule","evenodd","d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"],["d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"],["id","postcard",4,"ngIf"],["class","wrapper","style","display: flex; flex-direction: column; margin-top: 25vh;",4,"ngIf"],[3,"isOpen","close"],["cdkDrag","",1,"example-box"],["alt","Sticker",2,"width","100px",3,"src"],["alt","Sticker","class","sticker-image",3,"src",4,"ngIf"],["alt","Sticker",1,"sticker-image",3,"src"],["id","postcard"],["class","page-plakate__button","style","\n        min-width: 180px;\n        margin: 10px;\n        margin: 0px 10px 20vh 10px;\n        background-color: royalblue;\n      ",3,"click",4,"ngIf"],[1,"page-plakate__button",2,"min-width","180px","margin","10px","margin","0px 10px 20vh 10px","background-color","royalblue",3,"click"],["d","M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"],["fill-rule","evenodd","d","M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"],[1,"wrapper",2,"display","flex","flex-direction","column","margin-top","25vh"],[2,"color","black","font-size","large"],[1,"file-upload-container"],["type","file","id","svgFileInput","accept",".svg","hidden","",3,"change"],["id","logoCanvas","hidden",""],["for","svgFileInput",1,"file-upload-btn",2,"background-color","royalblue","margin-bottom","10px"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cloud-arrow-up-fill",2,"margin-bottom","-5px","margin-right","5px"],["d","M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0z"],["id","svg-container",3,"height","width",4,"ngIf"],[1,"buttons"],[1,"page-plakate__button",2,"min-width","180px","margin","10px","margin-bottom","10vh","background-color","royalblue",3,"click"],[1,"plakat-editing-wrapper"],["id","svg-container"],[3,"innerHTML"]],template:function(a,p){if(1&a&&(w.TgZ(0,"div",0)(1,"div",1)(2,"h2"),w._uU(3,"Sticker"),w.qZA(),w.TgZ(4,"div",2),w._UZ(5,"a",3)(6,"img",4),w.TgZ(7,"p",5),w._uU(8," Scanne den QR-Code, und lade dir unser Whatsapp Sticker Paket direkt auf dein Smartphone! "),w.qZA(),w.TgZ(9,"span",6),w._uU(10,"oder"),w.qZA()(),w.TgZ(11,"button",7),w.NdJ("click",function(){return p.addImageSticker()}),w.O4$(),w.TgZ(12,"svg",8),w._UZ(13,"path",9),w.qZA(),w._uU(14," Sticker hinzuf\xfcgen "),w.qZA(),w.kcU(),w.TgZ(15,"button",10)(16,"a",11),w.O4$(),w.TgZ(17,"svg",12),w._UZ(18,"path",13)(19,"path",14),w.qZA(),w._uU(20," Sticker herunterladen"),w.qZA()(),w.kcU(),w._UZ(21,"br"),w.TgZ(22,"div",15)(23,"div",16,17),w.NdJ("cdkDropListDropped",function(F){return p.drop(F)}),w.YNc(25,Bs,2,1,"div",18),w.qZA()(),w.TgZ(26,"div",19)(27,"button",20),w.NdJ("click",function(){return p.previousPage()}),w.O4$(),w.TgZ(28,"svg",21),w._UZ(29,"path",22),w.qZA()(),w.kcU(),w.TgZ(30,"span",23),w._uU(31),w.qZA(),w.TgZ(32,"button",20),w.NdJ("click",function(){return p.nextPage()}),w.O4$(),w.TgZ(33,"svg",24),w._UZ(34,"path",25),w.qZA()()(),w.kcU(),w._UZ(35,"br")(36,"br"),w.qZA(),w.TgZ(37,"div",26)(38,"input",27),w.NdJ("ngModelChange",function(F){return p.drawingTitle=F}),w.qZA(),w.TgZ(39,"div",28,29),w.NdJ("cdkDropListDropped",function(F){return p.drop(F)})("mouseup",function(F){return p.onCanvasMouseUp(F)}),w.YNc(41,Hs,2,1,"div",18),w._UZ(42,"canvas",30,31),w.qZA()(),w.TgZ(44,"div",32)(45,"h2",33),w._uU(46,"Einstellungen"),w.qZA(),w.TgZ(47,"div",34)(48,"div",35)(49,"div",36)(50,"p",37),w._uU(51," Pinsel Gr\xf6sse: "),w.qZA(),w._UZ(52,"br"),w.TgZ(53,"input",38),w.NdJ("ngModelChange",function(F){return p.strokeSize=F}),w.qZA()(),w.TgZ(54,"div",39)(55,"p",37),w._uU(56," Radiergummi Gr\xf6sse: "),w.qZA(),w._UZ(57,"br"),w.TgZ(58,"input",40),w.NdJ("ngModelChange",function(F){return p.eraserSize=F}),w.qZA()()(),w.TgZ(59,"div",41)(60,"div",42)(61,"p",43),w._uU(62," Pinsel Farbe: "),w.qZA(),w._UZ(63,"br"),w.TgZ(64,"input",44),w.NdJ("ngModelChange",function(F){return p.strokeHexColor=F})("ngModelChange",function(F){return p.updateStrokeColor(F)}),w.qZA()(),w.TgZ(65,"div",45)(66,"p",46),w._uU(67," Radiergummi: "),w.qZA(),w.TgZ(68,"label",47)(69,"input",48),w.NdJ("ngModelChange",function(F){return p.isEraserActive=F})("change",function(){return p.toggleEraser()}),w.qZA(),w._UZ(70,"span",49),w.qZA(),w._UZ(71,"br"),w.qZA()()(),w.TgZ(72,"div",50)(73,"button",51),w.NdJ("click",function(){return p.openDialog()}),w.O4$(),w.TgZ(74,"svg",8),w._UZ(75,"path",9),w.qZA(),w._uU(76),w.qZA(),w.kcU(),w.TgZ(77,"button",51),w.NdJ("click",function(){return p.saveDrawing()}),w.O4$(),w.TgZ(78,"svg",8),w._UZ(79,"path",52),w.qZA(),w._uU(80),w.qZA(),w.kcU(),w._UZ(81,"br"),w.TgZ(82,"button",51),w.NdJ("click",function(){return p.undo()}),w.O4$(),w.TgZ(83,"svg",8),w._UZ(84,"path",53)(85,"path",54),w.qZA(),w._uU(86," Schritt zur\xfcck "),w.qZA(),w.kcU(),w.TgZ(87,"button",51),w.NdJ("click",function(){return p.redo()}),w.O4$(),w.TgZ(88,"svg",8),w._UZ(89,"path",55)(90,"path",56),w.qZA(),w._uU(91," Schritt vorw\xe4rts "),w.qZA(),w.kcU(),w._UZ(92,"br"),w.TgZ(93,"button",51),w.NdJ("click",function(){return p.exportCanvasAsImage()}),w.O4$(),w.TgZ(94,"svg",12),w._UZ(95,"path",13)(96,"path",14),w.qZA(),w._uU(97),w.qZA(),w.YNc(98,js,4,1,"div",57),w.qZA()()(),w.YNc(99,Ws,25,1,"div",58),w.kcU(),w.TgZ(100,"app-new-poster-dialog",59),w.NdJ("close",function(F){return p.handleDialogClose(F)}),w.qZA()),2&a){const x=w.MAs(24),F=w.MAs(40);w.xp6(23),w.Q6J("cdkDropListData",p.currentImages)("cdkDropListConnectedTo",w.VKq(19,ns,F)),w.xp6(2),w.Q6J("ngForOf",p.currentImages),w.xp6(6),w.AsE("",p.currentPage," / ",p.totalPages,""),w.xp6(7),w.Q6J("ngModel",p.drawingTitle),w.xp6(1),w.Q6J("cdkDropListData",p.canvasStickers)("cdkDropListConnectedTo",w.VKq(21,ns,x)),w.xp6(2),w.Q6J("ngForOf",p.canvasStickers),w.xp6(12),w.Q6J("ngModel",p.strokeSize),w.xp6(5),w.Q6J("ngModel",p.eraserSize),w.xp6(6),w.Q6J("ngModel",p.strokeHexColor),w.xp6(5),w.Q6J("ngModel",p.isEraserActive),w.xp6(7),w.hij(" ",p.isPostcard?"Neue Postkarte":"Neues Plakat"," "),w.xp6(4),w.hij(" ",p.isPostcard?"Postkarte speichern":"Plakat speichern",""),w.xp6(17),w.hij(" ",p.isPostcard?"Postkarte herunterladen":"Plakat herunterladen"," "),w.xp6(1),w.Q6J("ngIf",p.hasPostCardAccess),w.xp6(1),w.Q6J("ngIf",p.hasPostCardAccess),w.xp6(1),w.Q6J("isOpen",p.isDialogOpen)}},dependencies:[wt.sg,wt.O5,Os.O,Ui.Fj,Ui.wV,Ui.Wl,Ui.JJ,Ui.On,Xr,is,Ns],encapsulation:2}),k})(),Ks=(()=>{class k{}return k.\u0275fac=function(a){return new(a||k)},k.\u0275mod=w.oAB({type:k}),k.\u0275inj=w.cJS({imports:[wt.ez,ti.m,Ui.u5,Ls,Ot.Bz.forChild([{path:"",component:Gs}])]}),k})()},7077:function(Hi,yi){!function(we){"use strict";var wt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],Ot=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],Zi="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ca\ua7d0\ua7d1\ua7d3\ua7d5-\ua7d9\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Xe={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},w="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",qe={5:w,"5module":w+" export import",6:w+" const class extends export import super"},We=/^in(stanceof)?$/,W=new RegExp("["+Zi+"]"),ci=new RegExp("["+Zi+"\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0898-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");function xt(n,u){for(var S=65536,M=0;M<u.length;M+=2){if((S+=u[M])>n)return!1;if((S+=u[M+1])>=n)return!0}}function $e(n,u){return n<65?36===n:n<91||(n<97?95===n:n<123||(n<=65535?n>=170&&W.test(String.fromCharCode(n)):!1!==u&&xt(n,Ot)))}function Ut(n,u){return n<48?36===n:n<58||!(n<65)&&(n<91||(n<97?95===n:n<123||(n<=65535?n>=170&&ci.test(String.fromCharCode(n)):!1!==u&&(xt(n,Ot)||xt(n,wt)))))}var ye=function(u,S){void 0===S&&(S={}),this.label=u,this.keyword=S.keyword,this.beforeExpr=!!S.beforeExpr,this.startsExpr=!!S.startsExpr,this.isLoop=!!S.isLoop,this.isAssign=!!S.isAssign,this.prefix=!!S.prefix,this.postfix=!!S.postfix,this.binop=S.binop||null,this.updateContext=null};function Me(n,u){return new ye(n,{beforeExpr:!0,binop:u})}var ot={beforeExpr:!0},J={startsExpr:!0},Rt={};function fe(n,u){return void 0===u&&(u={}),u.keyword=n,Rt[n]=new ye(n,u)}var O={num:new ye("num",J),regexp:new ye("regexp",J),string:new ye("string",J),name:new ye("name",J),privateId:new ye("privateId",J),eof:new ye("eof"),bracketL:new ye("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ye("]"),braceL:new ye("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ye("}"),parenL:new ye("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ye(")"),comma:new ye(",",ot),semi:new ye(";",ot),colon:new ye(":",ot),dot:new ye("."),question:new ye("?",ot),questionDot:new ye("?."),arrow:new ye("=>",ot),template:new ye("template"),invalidTemplate:new ye("invalidTemplate"),ellipsis:new ye("...",ot),backQuote:new ye("`",J),dollarBraceL:new ye("${",{beforeExpr:!0,startsExpr:!0}),eq:new ye("=",{beforeExpr:!0,isAssign:!0}),assign:new ye("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ye("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ye("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Me("||",1),logicalAND:Me("&&",2),bitwiseOR:Me("|",3),bitwiseXOR:Me("^",4),bitwiseAND:Me("&",5),equality:Me("==/!=/===/!==",6),relational:Me("</>/<=/>=",7),bitShift:Me("<</>>/>>>",8),plusMin:new ye("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Me("%",10),star:Me("*",10),slash:Me("/",10),starstar:new ye("**",{beforeExpr:!0}),coalesce:Me("??",1),_break:fe("break"),_case:fe("case",ot),_catch:fe("catch"),_continue:fe("continue"),_debugger:fe("debugger"),_default:fe("default",ot),_do:fe("do",{isLoop:!0,beforeExpr:!0}),_else:fe("else",ot),_finally:fe("finally"),_for:fe("for",{isLoop:!0}),_function:fe("function",J),_if:fe("if"),_return:fe("return",ot),_switch:fe("switch"),_throw:fe("throw",ot),_try:fe("try"),_var:fe("var"),_const:fe("const"),_while:fe("while",{isLoop:!0}),_with:fe("with"),_new:fe("new",{beforeExpr:!0,startsExpr:!0}),_this:fe("this",J),_super:fe("super",J),_class:fe("class",J),_extends:fe("extends",ot),_export:fe("export"),_import:fe("import",J),_null:fe("null",J),_true:fe("true",J),_false:fe("false",J),_in:fe("in",{beforeExpr:!0,binop:7}),_instanceof:fe("instanceof",{beforeExpr:!0,binop:7}),_typeof:fe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:fe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:fe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},xe=/\r\n?|\n|\u2028|\u2029/,Ri=new RegExp(xe.source,"g");function Ze(n){return 10===n||13===n||8232===n||8233===n}function ft(n,u,S){void 0===S&&(S=n.length);for(var M=u;M<S;M++){var B=n.charCodeAt(M);if(Ze(B))return M<S-1&&13===B&&10===n.charCodeAt(M+1)?M+2:M+1}return-1}var Wt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ke=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ft=Object.prototype,ai=Ft.hasOwnProperty,St=Ft.toString,Nt=Object.hasOwn||function(n,u){return ai.call(n,u)},Ht=Array.isArray||function(n){return"[object Array]"===St.call(n)};function ht(n){return new RegExp("^(?:"+n.replace(/ /g,"|")+")$")}function gt(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n)))}var Ee=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Gt=function(u,S){this.line=u,this.column=S};Gt.prototype.offset=function(u){return new Gt(this.line,this.column+u)};var de=function(u,S,M){this.start=S,this.end=M,null!==u.sourceFile&&(this.source=u.sourceFile)};function Lt(n,u){for(var S=1,M=0;;){var B=ft(n,M,u);if(B<0)return new Gt(S,u-M);++S,M=B}}var Zt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ue=!1;function Ct(n){var u={};for(var S in Zt)u[S]=n&&Nt(n,S)?n[S]:Zt[S];if("latest"===u.ecmaVersion?u.ecmaVersion=1e8:null==u.ecmaVersion?(!Ue&&"object"==typeof console&&console.warn&&(Ue=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),u.ecmaVersion=11):u.ecmaVersion>=2015&&(u.ecmaVersion-=2009),null==u.allowReserved&&(u.allowReserved=u.ecmaVersion<5),Ht(u.onToken)){var M=u.onToken;u.onToken=function(B){return M.push(B)}}return Ht(u.onComment)&&(u.onComment=function wi(n,u){return function(S,M,B,te,re,ce){var me={type:S?"Block":"Line",value:M,start:B,end:te};n.locations&&(me.loc=new de(this,re,ce)),n.ranges&&(me.range=[B,te]),u.push(me)}}(u,u.onComment)),u}function Si(n,u){return 2|(n?4:0)|(u?8:0)}var it=function(u,S,M){this.options=u=Ct(u),this.sourceFile=u.sourceFile,this.keywords=ht(qe[u.ecmaVersion>=6?6:"module"===u.sourceType?"5module":5]);var B="";!0!==u.allowReserved&&(B=Xe[u.ecmaVersion>=6?6:5===u.ecmaVersion?5:3],"module"===u.sourceType&&(B+=" await")),this.reservedWords=ht(B);var te=(B?B+" ":"")+Xe.strict;this.reservedWordsStrict=ht(te),this.reservedWordsStrictBind=ht(te+" "+Xe.strictBind),this.input=String(S),this.containsEsc=!1,M?(this.pos=M,this.lineStart=this.input.lastIndexOf("\n",M-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(xe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=O.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===u.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&u.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},kt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};it.prototype.parse=function(){var u=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(u)},kt.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},kt.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},kt.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},kt.canAwait.get=function(){for(var n=this.scopeStack.length-1;n>=0;n--){var u=this.scopeStack[n];if(u.inClassFieldInit||256&u.flags)return!1;if(2&u.flags)return(4&u.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},kt.allowSuper.get=function(){var n=this.currentThisScope();return(64&n.flags)>0||n.inClassFieldInit||this.options.allowSuperOutsideMethod},kt.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},kt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},kt.allowNewDotTarget.get=function(){var n=this.currentThisScope();return(258&n.flags)>0||n.inClassFieldInit},kt.inClassStaticBlock.get=function(){return(256&this.currentVarScope().flags)>0},it.extend=function(){for(var u=[],S=arguments.length;S--;)u[S]=arguments[S];for(var M=this,B=0;B<u.length;B++)M=u[B](M);return M},it.parse=function(u,S){return new this(S,u).parse()},it.parseExpressionAt=function(u,S,M){var B=new this(M,u,S);return B.nextToken(),B.parseExpression()},it.tokenizer=function(u,S){return new this(S,u)},Object.defineProperties(it.prototype,kt);var He=it.prototype,Mi=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;He.strictDirective=function(n){if(this.options.ecmaVersion<5)return!1;for(;;){ke.lastIndex=n,n+=ke.exec(this.input)[0].length;var u=Mi.exec(this.input.slice(n));if(!u)return!1;if("use strict"===(u[1]||u[2])){ke.lastIndex=n+u[0].length;var S=ke.exec(this.input),M=S.index+S[0].length,B=this.input.charAt(M);return";"===B||"}"===B||xe.test(S[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(B)||"!"===B&&"="===this.input.charAt(M+1))}ke.lastIndex=n+=u[0].length,n+=ke.exec(this.input)[0].length,";"===this.input[n]&&n++}},He.eat=function(n){return this.type===n&&(this.next(),!0)},He.isContextual=function(n){return this.type===O.name&&this.value===n&&!this.containsEsc},He.eatContextual=function(n){return!!this.isContextual(n)&&(this.next(),!0)},He.expectContextual=function(n){this.eatContextual(n)||this.unexpected()},He.canInsertSemicolon=function(){return this.type===O.eof||this.type===O.braceR||xe.test(this.input.slice(this.lastTokEnd,this.start))},He.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},He.semicolon=function(){!this.eat(O.semi)&&!this.insertSemicolon()&&this.unexpected()},He.afterTrailingComma=function(n,u){if(this.type===n)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),u||this.next(),!0},He.expect=function(n){this.eat(n)||this.unexpected()},He.unexpected=function(n){this.raise(n??this.start,"Unexpected token")};var Ke=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};He.checkPatternErrors=function(n,u){if(n){n.trailingComma>-1&&this.raiseRecoverable(n.trailingComma,"Comma is not permitted after the rest element");var S=u?n.parenthesizedAssign:n.parenthesizedBind;S>-1&&this.raiseRecoverable(S,"Parenthesized pattern")}},He.checkExpressionErrors=function(n,u){if(!n)return!1;var S=n.shorthandAssign,M=n.doubleProto;if(!u)return S>=0||M>=0;S>=0&&this.raise(S,"Shorthand property assignments are valid only in destructuring patterns"),M>=0&&this.raiseRecoverable(M,"Redefinition of __proto__ property")},He.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},He.isSimpleAssignTarget=function(n){return"ParenthesizedExpression"===n.type?this.isSimpleAssignTarget(n.expression):"Identifier"===n.type||"MemberExpression"===n.type};var Te=it.prototype;Te.parseTopLevel=function(n){var u=Object.create(null);for(n.body||(n.body=[]);this.type!==O.eof;){var S=this.parseStatement(null,!0,u);n.body.push(S)}if(this.inModule)for(var M=0,B=Object.keys(this.undefinedExports);M<B.length;M+=1){var te=B[M];this.raiseRecoverable(this.undefinedExports[te].start,"Export '"+te+"' is not defined")}return this.adaptDirectivePrologue(n.body),this.next(),n.sourceType=this.options.sourceType,this.finishNode(n,"Program")};var Ve={kind:"loop"},e={kind:"switch"};Te.isLet=function(n){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ke.lastIndex=this.pos;var u=ke.exec(this.input),S=this.pos+u[0].length,M=this.input.charCodeAt(S);if(91===M||92===M||M>55295&&M<56320)return!0;if(n)return!1;if(123===M)return!0;if($e(M,!0)){for(var B=S+1;Ut(M=this.input.charCodeAt(B),!0);)++B;if(92===M||M>55295&&M<56320)return!0;var te=this.input.slice(S,B);if(!We.test(te))return!0}return!1},Te.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ke.lastIndex=this.pos;var S,n=ke.exec(this.input),u=this.pos+n[0].length;return!(xe.test(this.input.slice(this.pos,u))||"function"!==this.input.slice(u,u+8)||u+8!==this.input.length&&(Ut(S=this.input.charCodeAt(u+8))||S>55295&&S<56320))},Te.parseStatement=function(n,u,S){var te,M=this.type,B=this.startNode();switch(this.isLet(n)&&(M=O._var,te="let"),M){case O._break:case O._continue:return this.parseBreakContinueStatement(B,M.keyword);case O._debugger:return this.parseDebuggerStatement(B);case O._do:return this.parseDoStatement(B);case O._for:return this.parseForStatement(B);case O._function:return n&&(this.strict||"if"!==n&&"label"!==n)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(B,!1,!n);case O._class:return n&&this.unexpected(),this.parseClass(B,!0);case O._if:return this.parseIfStatement(B);case O._return:return this.parseReturnStatement(B);case O._switch:return this.parseSwitchStatement(B);case O._throw:return this.parseThrowStatement(B);case O._try:return this.parseTryStatement(B);case O._const:case O._var:return te=te||this.value,n&&"var"!==te&&this.unexpected(),this.parseVarStatement(B,te);case O._while:return this.parseWhileStatement(B);case O._with:return this.parseWithStatement(B);case O.braceL:return this.parseBlock(!0,B);case O.semi:return this.parseEmptyStatement(B);case O._export:case O._import:if(this.options.ecmaVersion>10&&M===O._import){ke.lastIndex=this.pos;var re=ke.exec(this.input),me=this.input.charCodeAt(this.pos+re[0].length);if(40===me||46===me)return this.parseExpressionStatement(B,this.parseExpression())}return this.options.allowImportExportEverywhere||(u||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),M===O._import?this.parseImport(B):this.parseExport(B,S);default:if(this.isAsyncFunction())return n&&this.unexpected(),this.next(),this.parseFunctionStatement(B,!0,!n);var Oe=this.value,ze=this.parseExpression();return M===O.name&&"Identifier"===ze.type&&this.eat(O.colon)?this.parseLabeledStatement(B,Oe,ze,n):this.parseExpressionStatement(B,ze)}},Te.parseBreakContinueStatement=function(n,u){var S="break"===u;this.next(),this.eat(O.semi)||this.insertSemicolon()?n.label=null:this.type!==O.name?this.unexpected():(n.label=this.parseIdent(),this.semicolon());for(var M=0;M<this.labels.length;++M){var B=this.labels[M];if((null==n.label||B.name===n.label.name)&&(null!=B.kind&&(S||"loop"===B.kind)||n.label&&S))break}return M===this.labels.length&&this.raise(n.start,"Unsyntactic "+u),this.finishNode(n,S?"BreakStatement":"ContinueStatement")},Te.parseDebuggerStatement=function(n){return this.next(),this.semicolon(),this.finishNode(n,"DebuggerStatement")},Te.parseDoStatement=function(n){return this.next(),this.labels.push(Ve),n.body=this.parseStatement("do"),this.labels.pop(),this.expect(O._while),n.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(O.semi):this.semicolon(),this.finishNode(n,"DoWhileStatement")},Te.parseForStatement=function(n){this.next();var u=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Ve),this.enterScope(0),this.expect(O.parenL),this.type===O.semi)return u>-1&&this.unexpected(u),this.parseFor(n,null);var S=this.isLet();if(this.type===O._var||this.type===O._const||S){var M=this.startNode(),B=S?"let":this.value;return this.next(),this.parseVar(M,!0,B),this.finishNode(M,"VariableDeclaration"),(this.type===O._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===M.declarations.length?(this.options.ecmaVersion>=9&&(this.type===O._in?u>-1&&this.unexpected(u):n.await=u>-1),this.parseForIn(n,M)):(u>-1&&this.unexpected(u),this.parseFor(n,M))}var te=this.isContextual("let"),re=!1,ce=new Ke,me=this.parseExpression(!(u>-1)||"await",ce);return this.type===O._in||(re=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===O._in?u>-1&&this.unexpected(u):n.await=u>-1),te&&re&&this.raise(me.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(me,!1,ce),this.checkLValPattern(me),this.parseForIn(n,me)):(this.checkExpressionErrors(ce,!0),u>-1&&this.unexpected(u),this.parseFor(n,me))},Te.parseFunctionStatement=function(n,u,S){return this.next(),this.parseFunction(n,i|(S?0:r),!1,u)},Te.parseIfStatement=function(n){return this.next(),n.test=this.parseParenExpression(),n.consequent=this.parseStatement("if"),n.alternate=this.eat(O._else)?this.parseStatement("if"):null,this.finishNode(n,"IfStatement")},Te.parseReturnStatement=function(n){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(O.semi)||this.insertSemicolon()?n.argument=null:(n.argument=this.parseExpression(),this.semicolon()),this.finishNode(n,"ReturnStatement")},Te.parseSwitchStatement=function(n){this.next(),n.discriminant=this.parseParenExpression(),n.cases=[],this.expect(O.braceL),this.labels.push(e),this.enterScope(0);for(var u,S=!1;this.type!==O.braceR;)if(this.type===O._case||this.type===O._default){var M=this.type===O._case;u&&this.finishNode(u,"SwitchCase"),n.cases.push(u=this.startNode()),u.consequent=[],this.next(),M?u.test=this.parseExpression():(S&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),S=!0,u.test=null),this.expect(O.colon)}else u||this.unexpected(),u.consequent.push(this.parseStatement(null));return this.exitScope(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(n,"SwitchStatement")},Te.parseThrowStatement=function(n){return this.next(),xe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),n.argument=this.parseExpression(),this.semicolon(),this.finishNode(n,"ThrowStatement")};var t=[];Te.parseTryStatement=function(n){if(this.next(),n.block=this.parseBlock(),n.handler=null,this.type===O._catch){var u=this.startNode();if(this.next(),this.eat(O.parenL)){u.param=this.parseBindingAtom();var S="Identifier"===u.param.type;this.enterScope(S?32:0),this.checkLValPattern(u.param,S?4:2),this.expect(O.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),u.param=null,this.enterScope(0);u.body=this.parseBlock(!1),this.exitScope(),n.handler=this.finishNode(u,"CatchClause")}return n.finalizer=this.eat(O._finally)?this.parseBlock():null,!n.handler&&!n.finalizer&&this.raise(n.start,"Missing catch or finally clause"),this.finishNode(n,"TryStatement")},Te.parseVarStatement=function(n,u){return this.next(),this.parseVar(n,!1,u),this.semicolon(),this.finishNode(n,"VariableDeclaration")},Te.parseWhileStatement=function(n){return this.next(),n.test=this.parseParenExpression(),this.labels.push(Ve),n.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(n,"WhileStatement")},Te.parseWithStatement=function(n){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),n.object=this.parseParenExpression(),n.body=this.parseStatement("with"),this.finishNode(n,"WithStatement")},Te.parseEmptyStatement=function(n){return this.next(),this.finishNode(n,"EmptyStatement")},Te.parseLabeledStatement=function(n,u,S,M){for(var B=0,te=this.labels;B<te.length;B+=1)te[B].name===u&&this.raise(S.start,"Label '"+u+"' is already declared");for(var ce=this.type.isLoop?"loop":this.type===O._switch?"switch":null,me=this.labels.length-1;me>=0;me--){var Oe=this.labels[me];if(Oe.statementStart!==n.start)break;Oe.statementStart=this.start,Oe.kind=ce}return this.labels.push({name:u,kind:ce,statementStart:this.start}),n.body=this.parseStatement(M?-1===M.indexOf("label")?M+"label":M:"label"),this.labels.pop(),n.label=S,this.finishNode(n,"LabeledStatement")},Te.parseExpressionStatement=function(n,u){return n.expression=u,this.semicolon(),this.finishNode(n,"ExpressionStatement")},Te.parseBlock=function(n,u,S){for(void 0===n&&(n=!0),void 0===u&&(u=this.startNode()),u.body=[],this.expect(O.braceL),n&&this.enterScope(0);this.type!==O.braceR;){var M=this.parseStatement(null);u.body.push(M)}return S&&(this.strict=!1),this.next(),n&&this.exitScope(),this.finishNode(u,"BlockStatement")},Te.parseFor=function(n,u){return n.init=u,this.expect(O.semi),n.test=this.type===O.semi?null:this.parseExpression(),this.expect(O.semi),n.update=this.type===O.parenR?null:this.parseExpression(),this.expect(O.parenR),n.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(n,"ForStatement")},Te.parseForIn=function(n,u){var S=this.type===O._in;return this.next(),"VariableDeclaration"===u.type&&null!=u.declarations[0].init&&(!S||this.options.ecmaVersion<8||this.strict||"var"!==u.kind||"Identifier"!==u.declarations[0].id.type)&&this.raise(u.start,(S?"for-in":"for-of")+" loop variable declaration may not have an initializer"),n.left=u,n.right=S?this.parseExpression():this.parseMaybeAssign(),this.expect(O.parenR),n.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(n,S?"ForInStatement":"ForOfStatement")},Te.parseVar=function(n,u,S){for(n.declarations=[],n.kind=S;;){var M=this.startNode();if(this.parseVarId(M,S),this.eat(O.eq)?M.init=this.parseMaybeAssign(u):"const"!==S||this.type===O._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===M.id.type||u&&(this.type===O._in||this.isContextual("of"))?M.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),n.declarations.push(this.finishNode(M,"VariableDeclarator")),!this.eat(O.comma))break}return n},Te.parseVarId=function(n,u){n.id=this.parseBindingAtom(),this.checkLValPattern(n.id,"var"===u?1:2,!1)};var i=1,r=2;function o(n,u){var S=u.key.name,M=n[S],B="true";return"MethodDefinition"===u.type&&("get"===u.kind||"set"===u.kind)&&(B=(u.static?"s":"i")+u.kind),"iget"===M&&"iset"===B||"iset"===M&&"iget"===B||"sget"===M&&"sset"===B||"sset"===M&&"sget"===B?(n[S]="true",!1):!!M||(n[S]=B,!1)}function c(n,u){var M=n.key;return!n.computed&&("Identifier"===M.type&&M.name===u||"Literal"===M.type&&M.value===u)}Te.parseFunction=function(n,u,S,M,B){this.initFunction(n),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!M)&&(this.type===O.star&&u&r&&this.unexpected(),n.generator=this.eat(O.star)),this.options.ecmaVersion>=8&&(n.async=!!M),u&i&&(n.id=4&u&&this.type!==O.name?null:this.parseIdent(),n.id&&!(u&r)&&this.checkLValSimple(n.id,this.strict||n.generator||n.async?this.treatFunctionsAsVar?1:2:3));var te=this.yieldPos,re=this.awaitPos,ce=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Si(n.async,n.generator)),u&i||(n.id=this.type===O.name?this.parseIdent():null),this.parseFunctionParams(n),this.parseFunctionBody(n,S,!1,B),this.yieldPos=te,this.awaitPos=re,this.awaitIdentPos=ce,this.finishNode(n,u&i?"FunctionDeclaration":"FunctionExpression")},Te.parseFunctionParams=function(n){this.expect(O.parenL),n.params=this.parseBindingList(O.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Te.parseClass=function(n,u){this.next();var S=this.strict;this.strict=!0,this.parseClassId(n,u),this.parseClassSuper(n);var M=this.enterClassBody(),B=this.startNode(),te=!1;for(B.body=[],this.expect(O.braceL);this.type!==O.braceR;){var re=this.parseClassElement(null!==n.superClass);re&&(B.body.push(re),"MethodDefinition"===re.type&&"constructor"===re.kind?(te&&this.raise(re.start,"Duplicate constructor in the same class"),te=!0):re.key&&"PrivateIdentifier"===re.key.type&&o(M,re)&&this.raiseRecoverable(re.key.start,"Identifier '#"+re.key.name+"' has already been declared"))}return this.strict=S,this.next(),n.body=this.finishNode(B,"ClassBody"),this.exitClassBody(),this.finishNode(n,u?"ClassDeclaration":"ClassExpression")},Te.parseClassElement=function(n){if(this.eat(O.semi))return null;var u=this.options.ecmaVersion,S=this.startNode(),M="",B=!1,te=!1,re="method",ce=!1;if(this.eatContextual("static")){if(u>=13&&this.eat(O.braceL))return this.parseClassStaticBlock(S),S;this.isClassElementNameStart()||this.type===O.star?ce=!0:M="static"}if(S.static=ce,!M&&u>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==O.star||this.canInsertSemicolon()?M="async":te=!0),!M&&(u>=9||!te)&&this.eat(O.star)&&(B=!0),!M&&!te&&!B){var me=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?re=me:M=me)}if(M?(S.computed=!1,S.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),S.key.name=M,this.finishNode(S.key,"Identifier")):this.parseClassElementName(S),u<13||this.type===O.parenL||"method"!==re||B||te){var Oe=!S.static&&c(S,"constructor"),ze=Oe&&n;Oe&&"method"!==re&&this.raise(S.key.start,"Constructor can't have get/set modifier"),S.kind=Oe?"constructor":re,this.parseClassMethod(S,B,te,ze)}else this.parseClassField(S);return S},Te.isClassElementNameStart=function(){return this.type===O.name||this.type===O.privateId||this.type===O.num||this.type===O.string||this.type===O.bracketL||this.type.keyword},Te.parseClassElementName=function(n){this.type===O.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),n.computed=!1,n.key=this.parsePrivateIdent()):this.parsePropertyName(n)},Te.parseClassMethod=function(n,u,S,M){var B=n.key;"constructor"===n.kind?(u&&this.raise(B.start,"Constructor can't be a generator"),S&&this.raise(B.start,"Constructor can't be an async method")):n.static&&c(n,"prototype")&&this.raise(B.start,"Classes may not have a static property named prototype");var te=n.value=this.parseMethod(u,S,M);return"get"===n.kind&&0!==te.params.length&&this.raiseRecoverable(te.start,"getter should have no params"),"set"===n.kind&&1!==te.params.length&&this.raiseRecoverable(te.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===te.params[0].type&&this.raiseRecoverable(te.params[0].start,"Setter cannot use rest params"),this.finishNode(n,"MethodDefinition")},Te.parseClassField=function(n){if(c(n,"constructor")?this.raise(n.key.start,"Classes can't have a field named 'constructor'"):n.static&&c(n,"prototype")&&this.raise(n.key.start,"Classes can't have a static field named 'prototype'"),this.eat(O.eq)){var u=this.currentThisScope(),S=u.inClassFieldInit;u.inClassFieldInit=!0,n.value=this.parseMaybeAssign(),u.inClassFieldInit=S}else n.value=null;return this.semicolon(),this.finishNode(n,"PropertyDefinition")},Te.parseClassStaticBlock=function(n){n.body=[];var u=this.labels;for(this.labels=[],this.enterScope(320);this.type!==O.braceR;){var S=this.parseStatement(null);n.body.push(S)}return this.next(),this.exitScope(),this.labels=u,this.finishNode(n,"StaticBlock")},Te.parseClassId=function(n,u){this.type===O.name?(n.id=this.parseIdent(),u&&this.checkLValSimple(n.id,2,!1)):(!0===u&&this.unexpected(),n.id=null)},Te.parseClassSuper=function(n){n.superClass=this.eat(O._extends)?this.parseExprSubscripts(!1):null},Te.enterClassBody=function(){var n={declared:Object.create(null),used:[]};return this.privateNameStack.push(n),n.declared},Te.exitClassBody=function(){for(var n=this.privateNameStack.pop(),u=n.declared,S=n.used,M=this.privateNameStack.length,B=0===M?null:this.privateNameStack[M-1],te=0;te<S.length;++te){var re=S[te];Nt(u,re.name)||(B?B.used.push(re):this.raiseRecoverable(re.start,"Private field '#"+re.name+"' must be declared in an enclosing class"))}},Te.parseExport=function(n,u){if(this.next(),this.eat(O.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(n.exported=this.parseModuleExportName(),this.checkExport(u,n.exported,this.lastTokStart)):n.exported=null),this.expectContextual("from"),this.type!==O.string&&this.unexpected(),n.source=this.parseExprAtom(),this.semicolon(),this.finishNode(n,"ExportAllDeclaration");if(this.eat(O._default)){var S;if(this.checkExport(u,"default",this.lastTokStart),this.type===O._function||(S=this.isAsyncFunction())){var M=this.startNode();this.next(),S&&this.next(),n.declaration=this.parseFunction(M,4|i,!1,S)}else if(this.type===O._class){var B=this.startNode();n.declaration=this.parseClass(B,"nullableID")}else n.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(n,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())n.declaration=this.parseStatement(null),"VariableDeclaration"===n.declaration.type?this.checkVariableExport(u,n.declaration.declarations):this.checkExport(u,n.declaration.id,n.declaration.id.start),n.specifiers=[],n.source=null;else{if(n.declaration=null,n.specifiers=this.parseExportSpecifiers(u),this.eatContextual("from"))this.type!==O.string&&this.unexpected(),n.source=this.parseExprAtom();else{for(var te=0,re=n.specifiers;te<re.length;te+=1){var ce=re[te];this.checkUnreserved(ce.local),this.checkLocalExport(ce.local),"Literal"===ce.local.type&&this.raise(ce.local.start,"A string literal cannot be used as an exported binding without `from`.")}n.source=null}this.semicolon()}return this.finishNode(n,"ExportNamedDeclaration")},Te.checkExport=function(n,u,S){!n||("string"!=typeof u&&(u="Identifier"===u.type?u.name:u.value),Nt(n,u)&&this.raiseRecoverable(S,"Duplicate export '"+u+"'"),n[u]=!0)},Te.checkPatternExport=function(n,u){var S=u.type;if("Identifier"===S)this.checkExport(n,u,u.start);else if("ObjectPattern"===S)for(var M=0,B=u.properties;M<B.length;M+=1)this.checkPatternExport(n,B[M]);else if("ArrayPattern"===S)for(var re=0,ce=u.elements;re<ce.length;re+=1){var me=ce[re];me&&this.checkPatternExport(n,me)}else"Property"===S?this.checkPatternExport(n,u.value):"AssignmentPattern"===S?this.checkPatternExport(n,u.left):"RestElement"===S?this.checkPatternExport(n,u.argument):"ParenthesizedExpression"===S&&this.checkPatternExport(n,u.expression)},Te.checkVariableExport=function(n,u){if(n)for(var S=0,M=u;S<M.length;S+=1)this.checkPatternExport(n,M[S].id)},Te.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Te.parseExportSpecifiers=function(n){var u=[],S=!0;for(this.expect(O.braceL);!this.eat(O.braceR);){if(S)S=!1;else if(this.expect(O.comma),this.afterTrailingComma(O.braceR))break;var M=this.startNode();M.local=this.parseModuleExportName(),M.exported=this.eatContextual("as")?this.parseModuleExportName():M.local,this.checkExport(n,M.exported,M.exported.start),u.push(this.finishNode(M,"ExportSpecifier"))}return u},Te.parseImport=function(n){return this.next(),this.type===O.string?(n.specifiers=t,n.source=this.parseExprAtom()):(n.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),n.source=this.type===O.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(n,"ImportDeclaration")},Te.parseImportSpecifiers=function(){var n=[],u=!0;if(this.type===O.name){var S=this.startNode();if(S.local=this.parseIdent(),this.checkLValSimple(S.local,2),n.push(this.finishNode(S,"ImportDefaultSpecifier")),!this.eat(O.comma))return n}if(this.type===O.star){var M=this.startNode();return this.next(),this.expectContextual("as"),M.local=this.parseIdent(),this.checkLValSimple(M.local,2),n.push(this.finishNode(M,"ImportNamespaceSpecifier")),n}for(this.expect(O.braceL);!this.eat(O.braceR);){if(u)u=!1;else if(this.expect(O.comma),this.afterTrailingComma(O.braceR))break;var B=this.startNode();B.imported=this.parseModuleExportName(),this.eatContextual("as")?B.local=this.parseIdent():(this.checkUnreserved(B.imported),B.local=B.imported),this.checkLValSimple(B.local,2),n.push(this.finishNode(B,"ImportSpecifier"))}return n},Te.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===O.string){var n=this.parseLiteral(this.value);return Ee.test(n.value)&&this.raise(n.start,"An export name cannot include a lone surrogate."),n}return this.parseIdent(!0)},Te.adaptDirectivePrologue=function(n){for(var u=0;u<n.length&&this.isDirectiveCandidate(n[u]);++u)n[u].directive=n[u].expression.raw.slice(1,-1)},Te.isDirectiveCandidate=function(n){return"ExpressionStatement"===n.type&&"Literal"===n.expression.type&&"string"==typeof n.expression.value&&('"'===this.input[n.start]||"'"===this.input[n.start])};var l=it.prototype;l.toAssignable=function(n,u,S){if(this.options.ecmaVersion>=6&&n)switch(n.type){case"Identifier":this.inAsync&&"await"===n.name&&this.raise(n.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":n.type="ObjectPattern",S&&this.checkPatternErrors(S,!0);for(var M=0,B=n.properties;M<B.length;M+=1){var te=B[M];this.toAssignable(te,u),"RestElement"===te.type&&("ArrayPattern"===te.argument.type||"ObjectPattern"===te.argument.type)&&this.raise(te.argument.start,"Unexpected token")}break;case"Property":"init"!==n.kind&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,u);break;case"ArrayExpression":n.type="ArrayPattern",S&&this.checkPatternErrors(S,!0),this.toAssignableList(n.elements,u);break;case"SpreadElement":n.type="RestElement",this.toAssignable(n.argument,u),"AssignmentPattern"===n.argument.type&&this.raise(n.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==n.operator&&this.raise(n.left.end,"Only '=' operator can be used for specifying default value."),n.type="AssignmentPattern",delete n.operator,this.toAssignable(n.left,u);break;case"ParenthesizedExpression":this.toAssignable(n.expression,u,S);break;case"ChainExpression":this.raiseRecoverable(n.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!u)break;default:this.raise(n.start,"Assigning to rvalue")}else S&&this.checkPatternErrors(S,!0);return n},l.toAssignableList=function(n,u){for(var S=n.length,M=0;M<S;M++){var B=n[M];B&&this.toAssignable(B,u)}if(S){var te=n[S-1];6===this.options.ecmaVersion&&u&&te&&"RestElement"===te.type&&"Identifier"!==te.argument.type&&this.unexpected(te.argument.start)}return n},l.parseSpread=function(n){var u=this.startNode();return this.next(),u.argument=this.parseMaybeAssign(!1,n),this.finishNode(u,"SpreadElement")},l.parseRestBinding=function(){var n=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==O.name&&this.unexpected(),n.argument=this.parseBindingAtom(),this.finishNode(n,"RestElement")},l.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case O.bracketL:var n=this.startNode();return this.next(),n.elements=this.parseBindingList(O.bracketR,!0,!0),this.finishNode(n,"ArrayPattern");case O.braceL:return this.parseObj(!0)}return this.parseIdent()},l.parseBindingList=function(n,u,S){for(var M=[],B=!0;!this.eat(n);)if(B?B=!1:this.expect(O.comma),u&&this.type===O.comma)M.push(null);else{if(S&&this.afterTrailingComma(n))break;if(this.type===O.ellipsis){var te=this.parseRestBinding();this.parseBindingListItem(te),M.push(te),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(n);break}var re=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(re),M.push(re)}return M},l.parseBindingListItem=function(n){return n},l.parseMaybeDefault=function(n,u,S){if(S=S||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(O.eq))return S;var M=this.startNodeAt(n,u);return M.left=S,M.right=this.parseMaybeAssign(),this.finishNode(M,"AssignmentPattern")},l.checkLValSimple=function(n,u,S){void 0===u&&(u=0);var M=0!==u;switch(n.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(n.name)&&this.raiseRecoverable(n.start,(M?"Binding ":"Assigning to ")+n.name+" in strict mode"),M&&(2===u&&"let"===n.name&&this.raiseRecoverable(n.start,"let is disallowed as a lexically bound name"),S&&(Nt(S,n.name)&&this.raiseRecoverable(n.start,"Argument name clash"),S[n.name]=!0),5!==u&&this.declareName(n.name,u,n.start));break;case"ChainExpression":this.raiseRecoverable(n.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":M&&this.raiseRecoverable(n.start,"Binding member expression");break;case"ParenthesizedExpression":return M&&this.raiseRecoverable(n.start,"Binding parenthesized expression"),this.checkLValSimple(n.expression,u,S);default:this.raise(n.start,(M?"Binding":"Assigning to")+" rvalue")}},l.checkLValPattern=function(n,u,S){switch(void 0===u&&(u=0),n.type){case"ObjectPattern":for(var M=0,B=n.properties;M<B.length;M+=1)this.checkLValInnerPattern(B[M],u,S);break;case"ArrayPattern":for(var re=0,ce=n.elements;re<ce.length;re+=1){var me=ce[re];me&&this.checkLValInnerPattern(me,u,S)}break;default:this.checkLValSimple(n,u,S)}},l.checkLValInnerPattern=function(n,u,S){switch(void 0===u&&(u=0),n.type){case"Property":this.checkLValInnerPattern(n.value,u,S);break;case"AssignmentPattern":this.checkLValPattern(n.left,u,S);break;case"RestElement":this.checkLValPattern(n.argument,u,S);break;default:this.checkLValPattern(n,u,S)}};var f=function(u,S,M,B,te){this.token=u,this.isExpr=!!S,this.preserveSpace=!!M,this.override=B,this.generator=!!te},d={b_stat:new f("{",!1),b_expr:new f("{",!0),b_tmpl:new f("${",!1),p_stat:new f("(",!1),p_expr:new f("(",!0),q_tmpl:new f("`",!0,!0,function(n){return n.tryReadTemplateToken()}),f_stat:new f("function",!1),f_expr:new f("function",!0),f_expr_gen:new f("function",!0,!1,null,!0),f_gen:new f("function",!1,!1,null,!0)},b=it.prototype;b.initialContext=function(){return[d.b_stat]},b.curContext=function(){return this.context[this.context.length-1]},b.braceIsBlock=function(n){var u=this.curContext();return u===d.f_expr||u===d.f_stat||(n!==O.colon||u!==d.b_stat&&u!==d.b_expr?n===O._return||n===O.name&&this.exprAllowed?xe.test(this.input.slice(this.lastTokEnd,this.start)):n===O._else||n===O.semi||n===O.eof||n===O.parenR||n===O.arrow||(n===O.braceL?u===d.b_stat:n!==O._var&&n!==O._const&&n!==O.name&&!this.exprAllowed):!u.isExpr)},b.inGeneratorContext=function(){for(var n=this.context.length-1;n>=1;n--){var u=this.context[n];if("function"===u.token)return u.generator}return!1},b.updateContext=function(n){var u,S=this.type;S.keyword&&n===O.dot?this.exprAllowed=!1:(u=S.updateContext)?u.call(this,n):this.exprAllowed=S.beforeExpr},b.overrideContext=function(n){this.curContext()!==n&&(this.context[this.context.length-1]=n)},O.parenR.updateContext=O.braceR.updateContext=function(){if(1!==this.context.length){var n=this.context.pop();n===d.b_stat&&"function"===this.curContext().token&&(n=this.context.pop()),this.exprAllowed=!n.isExpr}else this.exprAllowed=!0},O.braceL.updateContext=function(n){this.context.push(this.braceIsBlock(n)?d.b_stat:d.b_expr),this.exprAllowed=!0},O.dollarBraceL.updateContext=function(){this.context.push(d.b_tmpl),this.exprAllowed=!0},O.parenL.updateContext=function(n){this.context.push(n===O._if||n===O._for||n===O._with||n===O._while?d.p_stat:d.p_expr),this.exprAllowed=!0},O.incDec.updateContext=function(){},O._function.updateContext=O._class.updateContext=function(n){!n.beforeExpr||n===O._else||n===O.semi&&this.curContext()!==d.p_stat||n===O._return&&xe.test(this.input.slice(this.lastTokEnd,this.start))||(n===O.colon||n===O.braceL)&&this.curContext()===d.b_stat?this.context.push(d.f_stat):this.context.push(d.f_expr),this.exprAllowed=!1},O.backQuote.updateContext=function(){this.curContext()===d.q_tmpl?this.context.pop():this.context.push(d.q_tmpl),this.exprAllowed=!1},O.star.updateContext=function(n){if(n===O._function){var u=this.context.length-1;this.context[u]=this.context[u]===d.f_expr?d.f_expr_gen:d.f_gen}this.exprAllowed=!0},O.name.updateContext=function(n){var u=!1;this.options.ecmaVersion>=6&&n!==O.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(u=!0),this.exprAllowed=u};var _=it.prototype;function v(n){return"MemberExpression"===n.type&&"PrivateIdentifier"===n.property.type||"ChainExpression"===n.type&&v(n.expression)}_.checkPropClash=function(n,u,S){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===n.type||this.options.ecmaVersion>=6&&(n.computed||n.method||n.shorthand))){var B,M=n.key;switch(M.type){case"Identifier":B=M.name;break;case"Literal":B=String(M.value);break;default:return}var te=n.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===B&&"init"===te&&(u.proto&&(S?S.doubleProto<0&&(S.doubleProto=M.start):this.raiseRecoverable(M.start,"Redefinition of __proto__ property")),u.proto=!0));var re=u[B="$"+B];re?("init"===te?this.strict&&re.init||re.get||re.set:re.init||re[te])&&this.raiseRecoverable(M.start,"Redefinition of property"):re=u[B]={init:!1,get:!1,set:!1},re[te]=!0}},_.parseExpression=function(n,u){var S=this.start,M=this.startLoc,B=this.parseMaybeAssign(n,u);if(this.type===O.comma){var te=this.startNodeAt(S,M);for(te.expressions=[B];this.eat(O.comma);)te.expressions.push(this.parseMaybeAssign(n,u));return this.finishNode(te,"SequenceExpression")}return B},_.parseMaybeAssign=function(n,u,S){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(n);this.exprAllowed=!1}var M=!1,B=-1,te=-1,re=-1;u?(B=u.parenthesizedAssign,te=u.trailingComma,re=u.doubleProto,u.parenthesizedAssign=u.trailingComma=-1):(u=new Ke,M=!0);var ce=this.start,me=this.startLoc;(this.type===O.parenL||this.type===O.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===n);var Oe=this.parseMaybeConditional(n,u);if(S&&(Oe=S.call(this,Oe,ce,me)),this.type.isAssign){var ze=this.startNodeAt(ce,me);return ze.operator=this.value,this.type===O.eq&&(Oe=this.toAssignable(Oe,!1,u)),M||(u.parenthesizedAssign=u.trailingComma=u.doubleProto=-1),u.shorthandAssign>=Oe.start&&(u.shorthandAssign=-1),this.type===O.eq?this.checkLValPattern(Oe):this.checkLValSimple(Oe),ze.left=Oe,this.next(),ze.right=this.parseMaybeAssign(n),re>-1&&(u.doubleProto=re),this.finishNode(ze,"AssignmentExpression")}return M&&this.checkExpressionErrors(u,!0),B>-1&&(u.parenthesizedAssign=B),te>-1&&(u.trailingComma=te),Oe},_.parseMaybeConditional=function(n,u){var S=this.start,M=this.startLoc,B=this.parseExprOps(n,u);if(this.checkExpressionErrors(u))return B;if(this.eat(O.question)){var te=this.startNodeAt(S,M);return te.test=B,te.consequent=this.parseMaybeAssign(),this.expect(O.colon),te.alternate=this.parseMaybeAssign(n),this.finishNode(te,"ConditionalExpression")}return B},_.parseExprOps=function(n,u){var S=this.start,M=this.startLoc,B=this.parseMaybeUnary(u,!1,!1,n);return this.checkExpressionErrors(u)||B.start===S&&"ArrowFunctionExpression"===B.type?B:this.parseExprOp(B,S,M,-1,n)},_.parseExprOp=function(n,u,S,M,B){var te=this.type.binop;if(null!=te&&(!B||this.type!==O._in)&&te>M){var re=this.type===O.logicalOR||this.type===O.logicalAND,ce=this.type===O.coalesce;ce&&(te=O.logicalAND.binop);var me=this.value;this.next();var Oe=this.start,ze=this.startLoc,ct=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,B),Oe,ze,te,B),jt=this.buildBinary(u,S,n,ct,me,re||ce);return(re&&this.type===O.coalesce||ce&&(this.type===O.logicalOR||this.type===O.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(jt,u,S,M,B)}return n},_.buildBinary=function(n,u,S,M,B,te){"PrivateIdentifier"===M.type&&this.raise(M.start,"Private identifier can only be left side of binary expression");var re=this.startNodeAt(n,u);return re.left=S,re.operator=B,re.right=M,this.finishNode(re,te?"LogicalExpression":"BinaryExpression")},_.parseMaybeUnary=function(n,u,S,M){var re,B=this.start,te=this.startLoc;if(this.isContextual("await")&&this.canAwait)re=this.parseAwait(M),u=!0;else if(this.type.prefix){var ce=this.startNode(),me=this.type===O.incDec;ce.operator=this.value,ce.prefix=!0,this.next(),ce.argument=this.parseMaybeUnary(null,!0,me,M),this.checkExpressionErrors(n,!0),me?this.checkLValSimple(ce.argument):this.strict&&"delete"===ce.operator&&"Identifier"===ce.argument.type?this.raiseRecoverable(ce.start,"Deleting local variable in strict mode"):"delete"===ce.operator&&v(ce.argument)?this.raiseRecoverable(ce.start,"Private fields can not be deleted"):u=!0,re=this.finishNode(ce,me?"UpdateExpression":"UnaryExpression")}else if(u||this.type!==O.privateId){if(re=this.parseExprSubscripts(n,M),this.checkExpressionErrors(n))return re;for(;this.type.postfix&&!this.canInsertSemicolon();){var Oe=this.startNodeAt(B,te);Oe.operator=this.value,Oe.prefix=!1,Oe.argument=re,this.checkLValSimple(re),this.next(),re=this.finishNode(Oe,"UpdateExpression")}}else(M||0===this.privateNameStack.length)&&this.unexpected(),re=this.parsePrivateIdent(),this.type!==O._in&&this.unexpected();return S||!this.eat(O.starstar)?re:u?void this.unexpected(this.lastTokStart):this.buildBinary(B,te,re,this.parseMaybeUnary(null,!1,!1,M),"**",!1)},_.parseExprSubscripts=function(n,u){var S=this.start,M=this.startLoc,B=this.parseExprAtom(n,u);if("ArrowFunctionExpression"===B.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return B;var te=this.parseSubscripts(B,S,M,!1,u);return n&&"MemberExpression"===te.type&&(n.parenthesizedAssign>=te.start&&(n.parenthesizedAssign=-1),n.parenthesizedBind>=te.start&&(n.parenthesizedBind=-1),n.trailingComma>=te.start&&(n.trailingComma=-1)),te},_.parseSubscripts=function(n,u,S,M,B){for(var te=this.options.ecmaVersion>=8&&"Identifier"===n.type&&"async"===n.name&&this.lastTokEnd===n.end&&!this.canInsertSemicolon()&&n.end-n.start==5&&this.potentialArrowAt===n.start,re=!1;;){var ce=this.parseSubscript(n,u,S,M,te,re,B);if(ce.optional&&(re=!0),ce===n||"ArrowFunctionExpression"===ce.type){if(re){var me=this.startNodeAt(u,S);me.expression=ce,ce=this.finishNode(me,"ChainExpression")}return ce}n=ce}},_.parseSubscript=function(n,u,S,M,B,te,re){var ce=this.options.ecmaVersion>=11,me=ce&&this.eat(O.questionDot);M&&me&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Oe=this.eat(O.bracketL);if(Oe||me&&this.type!==O.parenL&&this.type!==O.backQuote||this.eat(O.dot)){var ze=this.startNodeAt(u,S);ze.object=n,Oe?(ze.property=this.parseExpression(),this.expect(O.bracketR)):ze.property=this.type===O.privateId&&"Super"!==n.type?this.parsePrivateIdent():this.parseIdent("never"!==this.options.allowReserved),ze.computed=!!Oe,ce&&(ze.optional=me),n=this.finishNode(ze,"MemberExpression")}else if(!M&&this.eat(O.parenL)){var ct=new Ke,jt=this.yieldPos,qt=this.awaitPos,Mt=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Dt=this.parseExprList(O.parenR,this.options.ecmaVersion>=8,!1,ct);if(B&&!me&&!this.canInsertSemicolon()&&this.eat(O.arrow))return this.checkPatternErrors(ct,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=jt,this.awaitPos=qt,this.awaitIdentPos=Mt,this.parseArrowExpression(this.startNodeAt(u,S),Dt,!0,re);this.checkExpressionErrors(ct,!0),this.yieldPos=jt||this.yieldPos,this.awaitPos=qt||this.awaitPos,this.awaitIdentPos=Mt||this.awaitIdentPos;var _t=this.startNodeAt(u,S);_t.callee=n,_t.arguments=Dt,ce&&(_t.optional=me),n=this.finishNode(_t,"CallExpression")}else if(this.type===O.backQuote){(me||te)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Tt=this.startNodeAt(u,S);Tt.tag=n,Tt.quasi=this.parseTemplate({isTagged:!0}),n=this.finishNode(Tt,"TaggedTemplateExpression")}return n},_.parseExprAtom=function(n,u){this.type===O.slash&&this.readRegexp();var S,M=this.potentialArrowAt===this.start;switch(this.type){case O._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),S=this.startNode(),this.next(),this.type===O.parenL&&!this.allowDirectSuper&&this.raise(S.start,"super() call outside constructor of a subclass"),this.type!==O.dot&&this.type!==O.bracketL&&this.type!==O.parenL&&this.unexpected(),this.finishNode(S,"Super");case O._this:return S=this.startNode(),this.next(),this.finishNode(S,"ThisExpression");case O.name:var B=this.start,te=this.startLoc,re=this.containsEsc,ce=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!re&&"async"===ce.name&&!this.canInsertSemicolon()&&this.eat(O._function))return this.overrideContext(d.f_expr),this.parseFunction(this.startNodeAt(B,te),0,!1,!0,u);if(M&&!this.canInsertSemicolon()){if(this.eat(O.arrow))return this.parseArrowExpression(this.startNodeAt(B,te),[ce],!1,u);if(this.options.ecmaVersion>=8&&"async"===ce.name&&this.type===O.name&&!re&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return ce=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(O.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(B,te),[ce],!0,u)}return ce;case O.regexp:var me=this.value;return(S=this.parseLiteral(me.value)).regex={pattern:me.pattern,flags:me.flags},S;case O.num:case O.string:return this.parseLiteral(this.value);case O._null:case O._true:case O._false:return(S=this.startNode()).value=this.type===O._null?null:this.type===O._true,S.raw=this.type.keyword,this.next(),this.finishNode(S,"Literal");case O.parenL:var Oe=this.start,ze=this.parseParenAndDistinguishExpression(M,u);return n&&(n.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ze)&&(n.parenthesizedAssign=Oe),n.parenthesizedBind<0&&(n.parenthesizedBind=Oe)),ze;case O.bracketL:return S=this.startNode(),this.next(),S.elements=this.parseExprList(O.bracketR,!0,!0,n),this.finishNode(S,"ArrayExpression");case O.braceL:return this.overrideContext(d.b_expr),this.parseObj(!1,n);case O._function:return S=this.startNode(),this.next(),this.parseFunction(S,0);case O._class:return this.parseClass(this.startNode(),!1);case O._new:return this.parseNew();case O.backQuote:return this.parseTemplate();case O._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},_.parseExprImport=function(){var n=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var u=this.parseIdent(!0);switch(this.type){case O.parenL:return this.parseDynamicImport(n);case O.dot:return n.meta=u,this.parseImportMeta(n);default:this.unexpected()}},_.parseDynamicImport=function(n){if(this.next(),n.source=this.parseMaybeAssign(),!this.eat(O.parenR)){var u=this.start;this.eat(O.comma)&&this.eat(O.parenR)?this.raiseRecoverable(u,"Trailing comma is not allowed in import()"):this.unexpected(u)}return this.finishNode(n,"ImportExpression")},_.parseImportMeta=function(n){this.next();var u=this.containsEsc;return n.property=this.parseIdent(!0),"meta"!==n.property.name&&this.raiseRecoverable(n.property.start,"The only valid meta property for import is 'import.meta'"),u&&this.raiseRecoverable(n.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(n.start,"Cannot use 'import.meta' outside a module"),this.finishNode(n,"MetaProperty")},_.parseLiteral=function(n){var u=this.startNode();return u.value=n,u.raw=this.input.slice(this.start,this.end),110===u.raw.charCodeAt(u.raw.length-1)&&(u.bigint=u.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(u,"Literal")},_.parseParenExpression=function(){this.expect(O.parenL);var n=this.parseExpression();return this.expect(O.parenR),n},_.parseParenAndDistinguishExpression=function(n,u){var B,S=this.start,M=this.startLoc,te=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Mt,re=this.start,ce=this.startLoc,me=[],Oe=!0,ze=!1,ct=new Ke,jt=this.yieldPos,qt=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==O.parenR;){if(Oe?Oe=!1:this.expect(O.comma),te&&this.afterTrailingComma(O.parenR,!0)){ze=!0;break}if(this.type===O.ellipsis){Mt=this.start,me.push(this.parseParenItem(this.parseRestBinding())),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}me.push(this.parseMaybeAssign(!1,ct,this.parseParenItem))}var Dt=this.lastTokEnd,_t=this.lastTokEndLoc;if(this.expect(O.parenR),n&&!this.canInsertSemicolon()&&this.eat(O.arrow))return this.checkPatternErrors(ct,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=jt,this.awaitPos=qt,this.parseParenArrowList(S,M,me,u);(!me.length||ze)&&this.unexpected(this.lastTokStart),Mt&&this.unexpected(Mt),this.checkExpressionErrors(ct,!0),this.yieldPos=jt||this.yieldPos,this.awaitPos=qt||this.awaitPos,me.length>1?((B=this.startNodeAt(re,ce)).expressions=me,this.finishNodeAt(B,"SequenceExpression",Dt,_t)):B=me[0]}else B=this.parseParenExpression();if(this.options.preserveParens){var Tt=this.startNodeAt(S,M);return Tt.expression=B,this.finishNode(Tt,"ParenthesizedExpression")}return B},_.parseParenItem=function(n){return n},_.parseParenArrowList=function(n,u,S,M){return this.parseArrowExpression(this.startNodeAt(n,u),S,!1,M)};var m=[];_.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var n=this.startNode(),u=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(O.dot)){n.meta=u;var S=this.containsEsc;return n.property=this.parseIdent(!0),"target"!==n.property.name&&this.raiseRecoverable(n.property.start,"The only valid meta property for new is 'new.target'"),S&&this.raiseRecoverable(n.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(n.start,"'new.target' can only be used in functions and class static block"),this.finishNode(n,"MetaProperty")}var M=this.start,B=this.startLoc,te=this.type===O._import;return n.callee=this.parseSubscripts(this.parseExprAtom(),M,B,!0,!1),te&&"ImportExpression"===n.callee.type&&this.raise(M,"Cannot use new with import()"),n.arguments=this.eat(O.parenL)?this.parseExprList(O.parenR,this.options.ecmaVersion>=8,!1):m,this.finishNode(n,"NewExpression")},_.parseTemplateElement=function(n){var u=n.isTagged,S=this.startNode();return this.type===O.invalidTemplate?(u||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),S.value={raw:this.value,cooked:null}):S.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),S.tail=this.type===O.backQuote,this.finishNode(S,"TemplateElement")},_.parseTemplate=function(n){void 0===n&&(n={});var u=n.isTagged;void 0===u&&(u=!1);var S=this.startNode();this.next(),S.expressions=[];var M=this.parseTemplateElement({isTagged:u});for(S.quasis=[M];!M.tail;)this.type===O.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(O.dollarBraceL),S.expressions.push(this.parseExpression()),this.expect(O.braceR),S.quasis.push(M=this.parseTemplateElement({isTagged:u}));return this.next(),this.finishNode(S,"TemplateLiteral")},_.isAsyncProp=function(n){return!n.computed&&"Identifier"===n.key.type&&"async"===n.key.name&&(this.type===O.name||this.type===O.num||this.type===O.string||this.type===O.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===O.star)&&!xe.test(this.input.slice(this.lastTokEnd,this.start))},_.parseObj=function(n,u){var S=this.startNode(),M=!0,B={};for(S.properties=[],this.next();!this.eat(O.braceR);){if(M)M=!1;else if(this.expect(O.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(O.braceR))break;var te=this.parseProperty(n,u);n||this.checkPropClash(te,B,u),S.properties.push(te)}return this.finishNode(S,n?"ObjectPattern":"ObjectExpression")},_.parseProperty=function(n,u){var M,B,te,re,S=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(O.ellipsis))return n?(S.argument=this.parseIdent(!1),this.type===O.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(S,"RestElement")):(this.type===O.parenL&&u&&(u.parenthesizedAssign<0&&(u.parenthesizedAssign=this.start),u.parenthesizedBind<0&&(u.parenthesizedBind=this.start)),S.argument=this.parseMaybeAssign(!1,u),this.type===O.comma&&u&&u.trailingComma<0&&(u.trailingComma=this.start),this.finishNode(S,"SpreadElement"));this.options.ecmaVersion>=6&&(S.method=!1,S.shorthand=!1,(n||u)&&(te=this.start,re=this.startLoc),n||(M=this.eat(O.star)));var ce=this.containsEsc;return this.parsePropertyName(S),!n&&!ce&&this.options.ecmaVersion>=8&&!M&&this.isAsyncProp(S)?(B=!0,M=this.options.ecmaVersion>=9&&this.eat(O.star),this.parsePropertyName(S,u)):B=!1,this.parsePropertyValue(S,n,M,B,te,re,u,ce),this.finishNode(S,"Property")},_.parsePropertyValue=function(n,u,S,M,B,te,re,ce){if((S||M)&&this.type===O.colon&&this.unexpected(),this.eat(O.colon))n.value=u?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,re),n.kind="init";else if(this.options.ecmaVersion>=6&&this.type===O.parenL)u&&this.unexpected(),n.kind="init",n.method=!0,n.value=this.parseMethod(S,M);else if(u||ce||!(this.options.ecmaVersion>=5)||n.computed||"Identifier"!==n.key.type||"get"!==n.key.name&&"set"!==n.key.name||this.type===O.comma||this.type===O.braceR||this.type===O.eq)this.options.ecmaVersion>=6&&!n.computed&&"Identifier"===n.key.type?((S||M)&&this.unexpected(),this.checkUnreserved(n.key),"await"===n.key.name&&!this.awaitIdentPos&&(this.awaitIdentPos=B),n.kind="init",u?n.value=this.parseMaybeDefault(B,te,this.copyNode(n.key)):this.type===O.eq&&re?(re.shorthandAssign<0&&(re.shorthandAssign=this.start),n.value=this.parseMaybeDefault(B,te,this.copyNode(n.key))):n.value=this.copyNode(n.key),n.shorthand=!0):this.unexpected();else if((S||M)&&this.unexpected(),n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1),n.value.params.length!==("get"===n.kind?0:1)){this.raiseRecoverable(n.value.start,"get"===n.kind?"getter should have no params":"setter should have exactly one param")}else"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params")},_.parsePropertyName=function(n){if(this.options.ecmaVersion>=6){if(this.eat(O.bracketL))return n.computed=!0,n.key=this.parseMaybeAssign(),this.expect(O.bracketR),n.key;n.computed=!1}return n.key=this.type===O.num||this.type===O.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},_.initFunction=function(n){n.id=null,this.options.ecmaVersion>=6&&(n.generator=n.expression=!1),this.options.ecmaVersion>=8&&(n.async=!1)},_.parseMethod=function(n,u,S){var M=this.startNode(),B=this.yieldPos,te=this.awaitPos,re=this.awaitIdentPos;return this.initFunction(M),this.options.ecmaVersion>=6&&(M.generator=n),this.options.ecmaVersion>=8&&(M.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Si(u,M.generator)|(S?128:0)),this.expect(O.parenL),M.params=this.parseBindingList(O.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(M,!1,!0,!1),this.yieldPos=B,this.awaitPos=te,this.awaitIdentPos=re,this.finishNode(M,"FunctionExpression")},_.parseArrowExpression=function(n,u,S,M){var B=this.yieldPos,te=this.awaitPos,re=this.awaitIdentPos;return this.enterScope(16|Si(S,!1)),this.initFunction(n),this.options.ecmaVersion>=8&&(n.async=!!S),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,n.params=this.toAssignableList(u,!0),this.parseFunctionBody(n,!0,!1,M),this.yieldPos=B,this.awaitPos=te,this.awaitIdentPos=re,this.finishNode(n,"ArrowFunctionExpression")},_.parseFunctionBody=function(n,u,S,M){var te=this.strict,re=!1;if(u&&this.type!==O.braceL)n.body=this.parseMaybeAssign(M),n.expression=!0,this.checkParams(n,!1);else{var ce=this.options.ecmaVersion>=7&&!this.isSimpleParamList(n.params);(!te||ce)&&(re=this.strictDirective(this.end))&&ce&&this.raiseRecoverable(n.start,"Illegal 'use strict' directive in function with non-simple parameter list");var me=this.labels;this.labels=[],re&&(this.strict=!0),this.checkParams(n,!te&&!re&&!u&&!S&&this.isSimpleParamList(n.params)),this.strict&&n.id&&this.checkLValSimple(n.id,5),n.body=this.parseBlock(!1,void 0,re&&!te),n.expression=!1,this.adaptDirectivePrologue(n.body.body),this.labels=me}this.exitScope()},_.isSimpleParamList=function(n){for(var u=0,S=n;u<S.length;u+=1)if("Identifier"!==S[u].type)return!1;return!0},_.checkParams=function(n,u){for(var S=Object.create(null),M=0,B=n.params;M<B.length;M+=1)this.checkLValInnerPattern(B[M],1,u?null:S)},_.parseExprList=function(n,u,S,M){for(var B=[],te=!0;!this.eat(n);){if(te)te=!1;else if(this.expect(O.comma),u&&this.afterTrailingComma(n))break;var re=void 0;S&&this.type===O.comma?re=null:this.type===O.ellipsis?(re=this.parseSpread(M),M&&this.type===O.comma&&M.trailingComma<0&&(M.trailingComma=this.start)):re=this.parseMaybeAssign(!1,M),B.push(re)}return B},_.checkUnreserved=function(n){var u=n.start,S=n.end,M=n.name;this.inGenerator&&"yield"===M&&this.raiseRecoverable(u,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===M&&this.raiseRecoverable(u,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===M&&this.raiseRecoverable(u,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&("arguments"===M||"await"===M)&&this.raise(u,"Cannot use "+M+" in class static initialization block"),this.keywords.test(M)&&this.raise(u,"Unexpected keyword '"+M+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(u,S).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(M)&&(!this.inAsync&&"await"===M&&this.raiseRecoverable(u,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(u,"The keyword '"+M+"' is reserved"))},_.parseIdent=function(n,u){var S=this.startNode();return this.type===O.name?S.name=this.value:this.type.keyword?(S.name=this.type.keyword,("class"===S.name||"function"===S.name)&&(this.lastTokEnd!==this.lastTokStart+1||46!==this.input.charCodeAt(this.lastTokStart))&&this.context.pop()):this.unexpected(),this.next(!!n),this.finishNode(S,"Identifier"),n||(this.checkUnreserved(S),"await"===S.name&&!this.awaitIdentPos&&(this.awaitIdentPos=S.start)),S},_.parsePrivateIdent=function(){var n=this.startNode();return this.type===O.privateId?n.name=this.value:this.unexpected(),this.next(),this.finishNode(n,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(n.start,"Private field '#"+n.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(n),n},_.parseYield=function(n){this.yieldPos||(this.yieldPos=this.start);var u=this.startNode();return this.next(),this.type===O.semi||this.canInsertSemicolon()||this.type!==O.star&&!this.type.startsExpr?(u.delegate=!1,u.argument=null):(u.delegate=this.eat(O.star),u.argument=this.parseMaybeAssign(n)),this.finishNode(u,"YieldExpression")},_.parseAwait=function(n){this.awaitPos||(this.awaitPos=this.start);var u=this.startNode();return this.next(),u.argument=this.parseMaybeUnary(null,!0,!1,n),this.finishNode(u,"AwaitExpression")};var D=it.prototype;D.raise=function(n,u){var S=Lt(this.input,n),M=new SyntaxError(u+=" ("+S.line+":"+S.column+")");throw M.pos=n,M.loc=S,M.raisedAt=this.pos,M},D.raiseRecoverable=D.raise,D.curPosition=function(){if(this.options.locations)return new Gt(this.curLine,this.pos-this.lineStart)};var C=it.prototype,R=function(u){this.flags=u,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};C.enterScope=function(n){this.scopeStack.push(new R(n))},C.exitScope=function(){this.scopeStack.pop()},C.treatFunctionsAsVarInScope=function(n){return 2&n.flags||!this.inModule&&1&n.flags},C.declareName=function(n,u,S){var M=!1;if(2===u){var B=this.currentScope();M=B.lexical.indexOf(n)>-1||B.functions.indexOf(n)>-1||B.var.indexOf(n)>-1,B.lexical.push(n),this.inModule&&1&B.flags&&delete this.undefinedExports[n]}else if(4===u)this.currentScope().lexical.push(n);else if(3===u){var re=this.currentScope();M=this.treatFunctionsAsVar?re.lexical.indexOf(n)>-1:re.lexical.indexOf(n)>-1||re.var.indexOf(n)>-1,re.functions.push(n)}else for(var ce=this.scopeStack.length-1;ce>=0;--ce){var me=this.scopeStack[ce];if(me.lexical.indexOf(n)>-1&&!(32&me.flags&&me.lexical[0]===n)||!this.treatFunctionsAsVarInScope(me)&&me.functions.indexOf(n)>-1){M=!0;break}if(me.var.push(n),this.inModule&&1&me.flags&&delete this.undefinedExports[n],259&me.flags)break}M&&this.raiseRecoverable(S,"Identifier '"+n+"' has already been declared")},C.checkLocalExport=function(n){-1===this.scopeStack[0].lexical.indexOf(n.name)&&-1===this.scopeStack[0].var.indexOf(n.name)&&(this.undefinedExports[n.name]=n)},C.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},C.currentVarScope=function(){for(var n=this.scopeStack.length-1;;n--){var u=this.scopeStack[n];if(259&u.flags)return u}},C.currentThisScope=function(){for(var n=this.scopeStack.length-1;;n--){var u=this.scopeStack[n];if(259&u.flags&&!(16&u.flags))return u}};var y=function(u,S,M){this.type="",this.start=S,this.end=0,u.options.locations&&(this.loc=new de(u,M)),u.options.directSourceFile&&(this.sourceFile=u.options.directSourceFile),u.options.ranges&&(this.range=[S,0])},E=it.prototype;function g(n,u,S,M){return n.type=u,n.end=S,this.options.locations&&(n.loc.end=M),this.options.ranges&&(n.range[1]=S),n}E.startNode=function(){return new y(this,this.start,this.startLoc)},E.startNodeAt=function(n,u){return new y(this,n,u)},E.finishNode=function(n,u){return g.call(this,n,u,this.lastTokEnd,this.lastTokEndLoc)},E.finishNodeAt=function(n,u,S,M){return g.call(this,n,u,S,M)},E.copyNode=function(n){var u=new y(this,n.start,this.startLoc);for(var S in n)u[S]=n[S];return u};var n,u,I="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",P=I+" Extended_Pictographic",T=P+" EBase EComp EMod EPres ExtPict",V={9:I,10:P,11:P,12:T,13:T},z="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",q="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",H=q+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",G=H+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",j=G+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",X={9:q,10:H,11:G,12:j,13:j+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith"},ee={};for(var le=0,pe=[9,10,11,12,13];le<pe.length;le+=1)u=void 0,(u=ee[n=pe[le]]={binary:ht(V[n]+" "+z),nonBinary:{General_Category:ht(z),Script:ht(X[n])}}).nonBinary.Script_Extensions=u.nonBinary.Script,u.nonBinary.gc=u.nonBinary.General_Category,u.nonBinary.sc=u.nonBinary.Script,u.nonBinary.scx=u.nonBinary.Script_Extensions;var Q=it.prototype,ae=function(u){this.parser=u,this.validFlags="gim"+(u.options.ecmaVersion>=6?"uy":"")+(u.options.ecmaVersion>=9?"s":"")+(u.options.ecmaVersion>=13?"d":""),this.unicodeProperties=ee[u.options.ecmaVersion>=13?13:u.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function he(n){return 36===n||n>=40&&n<=43||46===n||63===n||n>=91&&n<=94||n>=123&&n<=125}function Ie(n){return n>=65&&n<=90||n>=97&&n<=122}function Fe(n){return Ie(n)||95===n}function De(n){return Fe(n)||nt(n)}function nt(n){return n>=48&&n<=57}function ut(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102}function dt(n){return n>=65&&n<=70?n-65+10:n>=97&&n<=102?n-97+10:n-48}function rt(n){return n>=48&&n<=55}ae.prototype.reset=function(u,S,M){var B=-1!==M.indexOf("u");this.start=0|u,this.source=S+"",this.flags=M,this.switchU=B&&this.parser.options.ecmaVersion>=6,this.switchN=B&&this.parser.options.ecmaVersion>=9},ae.prototype.raise=function(u){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+u)},ae.prototype.at=function(u,S){void 0===S&&(S=!1);var M=this.source,B=M.length;if(u>=B)return-1;var te=M.charCodeAt(u);if(!S&&!this.switchU||te<=55295||te>=57344||u+1>=B)return te;var re=M.charCodeAt(u+1);return re>=56320&&re<=57343?(te<<10)+re-56613888:te},ae.prototype.nextIndex=function(u,S){void 0===S&&(S=!1);var M=this.source,B=M.length;if(u>=B)return B;var re,te=M.charCodeAt(u);return!S&&!this.switchU||te<=55295||te>=57344||u+1>=B||(re=M.charCodeAt(u+1))<56320||re>57343?u+1:u+2},ae.prototype.current=function(u){return void 0===u&&(u=!1),this.at(this.pos,u)},ae.prototype.lookahead=function(u){return void 0===u&&(u=!1),this.at(this.nextIndex(this.pos,u),u)},ae.prototype.advance=function(u){void 0===u&&(u=!1),this.pos=this.nextIndex(this.pos,u)},ae.prototype.eat=function(u,S){return void 0===S&&(S=!1),this.current(S)===u&&(this.advance(S),!0)},Q.validateRegExpFlags=function(n){for(var u=n.validFlags,S=n.flags,M=0;M<S.length;M++){var B=S.charAt(M);-1===u.indexOf(B)&&this.raise(n.start,"Invalid regular expression flag"),S.indexOf(B,M+1)>-1&&this.raise(n.start,"Duplicate regular expression flag")}},Q.validateRegExpPattern=function(n){this.regexp_pattern(n),!n.switchN&&this.options.ecmaVersion>=9&&n.groupNames.length>0&&(n.switchN=!0,this.regexp_pattern(n))},Q.regexp_pattern=function(n){n.pos=0,n.lastIntValue=0,n.lastStringValue="",n.lastAssertionIsQuantifiable=!1,n.numCapturingParens=0,n.maxBackReference=0,n.groupNames.length=0,n.backReferenceNames.length=0,this.regexp_disjunction(n),n.pos!==n.source.length&&(n.eat(41)&&n.raise("Unmatched ')'"),(n.eat(93)||n.eat(125))&&n.raise("Lone quantifier brackets")),n.maxBackReference>n.numCapturingParens&&n.raise("Invalid escape");for(var u=0,S=n.backReferenceNames;u<S.length;u+=1)-1===n.groupNames.indexOf(S[u])&&n.raise("Invalid named capture referenced")},Q.regexp_disjunction=function(n){for(this.regexp_alternative(n);n.eat(124);)this.regexp_alternative(n);this.regexp_eatQuantifier(n,!0)&&n.raise("Nothing to repeat"),n.eat(123)&&n.raise("Lone quantifier brackets")},Q.regexp_alternative=function(n){for(;n.pos<n.source.length&&this.regexp_eatTerm(n););},Q.regexp_eatTerm=function(n){return this.regexp_eatAssertion(n)?(n.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(n)&&n.switchU&&n.raise("Invalid quantifier"),!0):!!(n.switchU?this.regexp_eatAtom(n):this.regexp_eatExtendedAtom(n))&&(this.regexp_eatQuantifier(n),!0)},Q.regexp_eatAssertion=function(n){var u=n.pos;if(n.lastAssertionIsQuantifiable=!1,n.eat(94)||n.eat(36))return!0;if(n.eat(92)){if(n.eat(66)||n.eat(98))return!0;n.pos=u}if(n.eat(40)&&n.eat(63)){var S=!1;if(this.options.ecmaVersion>=9&&(S=n.eat(60)),n.eat(61)||n.eat(33))return this.regexp_disjunction(n),n.eat(41)||n.raise("Unterminated group"),n.lastAssertionIsQuantifiable=!S,!0}return n.pos=u,!1},Q.regexp_eatQuantifier=function(n,u){return void 0===u&&(u=!1),!!this.regexp_eatQuantifierPrefix(n,u)&&(n.eat(63),!0)},Q.regexp_eatQuantifierPrefix=function(n,u){return n.eat(42)||n.eat(43)||n.eat(63)||this.regexp_eatBracedQuantifier(n,u)},Q.regexp_eatBracedQuantifier=function(n,u){var S=n.pos;if(n.eat(123)){var M=0,B=-1;if(this.regexp_eatDecimalDigits(n)&&(M=n.lastIntValue,n.eat(44)&&this.regexp_eatDecimalDigits(n)&&(B=n.lastIntValue),n.eat(125)))return-1!==B&&B<M&&!u&&n.raise("numbers out of order in {} quantifier"),!0;n.switchU&&!u&&n.raise("Incomplete quantifier"),n.pos=S}return!1},Q.regexp_eatAtom=function(n){return this.regexp_eatPatternCharacters(n)||n.eat(46)||this.regexp_eatReverseSolidusAtomEscape(n)||this.regexp_eatCharacterClass(n)||this.regexp_eatUncapturingGroup(n)||this.regexp_eatCapturingGroup(n)},Q.regexp_eatReverseSolidusAtomEscape=function(n){var u=n.pos;if(n.eat(92)){if(this.regexp_eatAtomEscape(n))return!0;n.pos=u}return!1},Q.regexp_eatUncapturingGroup=function(n){var u=n.pos;if(n.eat(40)){if(n.eat(63)&&n.eat(58)){if(this.regexp_disjunction(n),n.eat(41))return!0;n.raise("Unterminated group")}n.pos=u}return!1},Q.regexp_eatCapturingGroup=function(n){if(n.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(n):63===n.current()&&n.raise("Invalid group"),this.regexp_disjunction(n),n.eat(41))return n.numCapturingParens+=1,!0;n.raise("Unterminated group")}return!1},Q.regexp_eatExtendedAtom=function(n){return n.eat(46)||this.regexp_eatReverseSolidusAtomEscape(n)||this.regexp_eatCharacterClass(n)||this.regexp_eatUncapturingGroup(n)||this.regexp_eatCapturingGroup(n)||this.regexp_eatInvalidBracedQuantifier(n)||this.regexp_eatExtendedPatternCharacter(n)},Q.regexp_eatInvalidBracedQuantifier=function(n){return this.regexp_eatBracedQuantifier(n,!0)&&n.raise("Nothing to repeat"),!1},Q.regexp_eatSyntaxCharacter=function(n){var u=n.current();return!!he(u)&&(n.lastIntValue=u,n.advance(),!0)},Q.regexp_eatPatternCharacters=function(n){for(var u=n.pos,S=0;-1!==(S=n.current())&&!he(S);)n.advance();return n.pos!==u},Q.regexp_eatExtendedPatternCharacter=function(n){var u=n.current();return!(-1===u||36===u||u>=40&&u<=43||46===u||63===u||91===u||94===u||124===u||(n.advance(),0))},Q.regexp_groupSpecifier=function(n){if(n.eat(63)){if(this.regexp_eatGroupName(n))return-1!==n.groupNames.indexOf(n.lastStringValue)&&n.raise("Duplicate capture group name"),void n.groupNames.push(n.lastStringValue);n.raise("Invalid group")}},Q.regexp_eatGroupName=function(n){if(n.lastStringValue="",n.eat(60)){if(this.regexp_eatRegExpIdentifierName(n)&&n.eat(62))return!0;n.raise("Invalid capture group name")}return!1},Q.regexp_eatRegExpIdentifierName=function(n){if(n.lastStringValue="",this.regexp_eatRegExpIdentifierStart(n)){for(n.lastStringValue+=gt(n.lastIntValue);this.regexp_eatRegExpIdentifierPart(n);)n.lastStringValue+=gt(n.lastIntValue);return!0}return!1},Q.regexp_eatRegExpIdentifierStart=function(n){var u=n.pos,S=this.options.ecmaVersion>=11,M=n.current(S);return n.advance(S),92===M&&this.regexp_eatRegExpUnicodeEscapeSequence(n,S)&&(M=n.lastIntValue),function be(n){return $e(n,!0)||36===n||95===n}(M)?(n.lastIntValue=M,!0):(n.pos=u,!1)},Q.regexp_eatRegExpIdentifierPart=function(n){var u=n.pos,S=this.options.ecmaVersion>=11,M=n.current(S);return n.advance(S),92===M&&this.regexp_eatRegExpUnicodeEscapeSequence(n,S)&&(M=n.lastIntValue),function _e(n){return Ut(n,!0)||36===n||95===n||8204===n||8205===n}(M)?(n.lastIntValue=M,!0):(n.pos=u,!1)},Q.regexp_eatAtomEscape=function(n){return!!(this.regexp_eatBackReference(n)||this.regexp_eatCharacterClassEscape(n)||this.regexp_eatCharacterEscape(n)||n.switchN&&this.regexp_eatKGroupName(n))||(n.switchU&&(99===n.current()&&n.raise("Invalid unicode escape"),n.raise("Invalid escape")),!1)},Q.regexp_eatBackReference=function(n){var u=n.pos;if(this.regexp_eatDecimalEscape(n)){var S=n.lastIntValue;if(n.switchU)return S>n.maxBackReference&&(n.maxBackReference=S),!0;if(S<=n.numCapturingParens)return!0;n.pos=u}return!1},Q.regexp_eatKGroupName=function(n){if(n.eat(107)){if(this.regexp_eatGroupName(n))return n.backReferenceNames.push(n.lastStringValue),!0;n.raise("Invalid named reference")}return!1},Q.regexp_eatCharacterEscape=function(n){return this.regexp_eatControlEscape(n)||this.regexp_eatCControlLetter(n)||this.regexp_eatZero(n)||this.regexp_eatHexEscapeSequence(n)||this.regexp_eatRegExpUnicodeEscapeSequence(n,!1)||!n.switchU&&this.regexp_eatLegacyOctalEscapeSequence(n)||this.regexp_eatIdentityEscape(n)},Q.regexp_eatCControlLetter=function(n){var u=n.pos;if(n.eat(99)){if(this.regexp_eatControlLetter(n))return!0;n.pos=u}return!1},Q.regexp_eatZero=function(n){return 48===n.current()&&!nt(n.lookahead())&&(n.lastIntValue=0,n.advance(),!0)},Q.regexp_eatControlEscape=function(n){var u=n.current();return 116===u?(n.lastIntValue=9,n.advance(),!0):110===u?(n.lastIntValue=10,n.advance(),!0):118===u?(n.lastIntValue=11,n.advance(),!0):102===u?(n.lastIntValue=12,n.advance(),!0):114===u&&(n.lastIntValue=13,n.advance(),!0)},Q.regexp_eatControlLetter=function(n){var u=n.current();return!!Ie(u)&&(n.lastIntValue=u%32,n.advance(),!0)},Q.regexp_eatRegExpUnicodeEscapeSequence=function(n,u){void 0===u&&(u=!1);var S=n.pos,M=u||n.switchU;if(n.eat(117)){if(this.regexp_eatFixedHexDigits(n,4)){var B=n.lastIntValue;if(M&&B>=55296&&B<=56319){var te=n.pos;if(n.eat(92)&&n.eat(117)&&this.regexp_eatFixedHexDigits(n,4)){var re=n.lastIntValue;if(re>=56320&&re<=57343)return n.lastIntValue=1024*(B-55296)+(re-56320)+65536,!0}n.pos=te,n.lastIntValue=B}return!0}if(M&&n.eat(123)&&this.regexp_eatHexDigits(n)&&n.eat(125)&&function Se(n){return n>=0&&n<=1114111}(n.lastIntValue))return!0;M&&n.raise("Invalid unicode escape"),n.pos=S}return!1},Q.regexp_eatIdentityEscape=function(n){if(n.switchU)return!!this.regexp_eatSyntaxCharacter(n)||!!n.eat(47)&&(n.lastIntValue=47,!0);var u=n.current();return!(99===u||n.switchN&&107===u||(n.lastIntValue=u,n.advance(),0))},Q.regexp_eatDecimalEscape=function(n){n.lastIntValue=0;var u=n.current();if(u>=49&&u<=57){do{n.lastIntValue=10*n.lastIntValue+(u-48),n.advance()}while((u=n.current())>=48&&u<=57);return!0}return!1},Q.regexp_eatCharacterClassEscape=function(n){var u=n.current();if(function Re(n){return 100===n||68===n||115===n||83===n||119===n||87===n}(u))return n.lastIntValue=-1,n.advance(),!0;if(n.switchU&&this.options.ecmaVersion>=9&&(80===u||112===u)){if(n.lastIntValue=-1,n.advance(),n.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(n)&&n.eat(125))return!0;n.raise("Invalid property name")}return!1},Q.regexp_eatUnicodePropertyValueExpression=function(n){var u=n.pos;if(this.regexp_eatUnicodePropertyName(n)&&n.eat(61)){var S=n.lastStringValue;if(this.regexp_eatUnicodePropertyValue(n))return this.regexp_validateUnicodePropertyNameAndValue(n,S,n.lastStringValue),!0}return n.pos=u,!!this.regexp_eatLoneUnicodePropertyNameOrValue(n)&&(this.regexp_validateUnicodePropertyNameOrValue(n,n.lastStringValue),!0)},Q.regexp_validateUnicodePropertyNameAndValue=function(n,u,S){Nt(n.unicodeProperties.nonBinary,u)||n.raise("Invalid property name"),n.unicodeProperties.nonBinary[u].test(S)||n.raise("Invalid property value")},Q.regexp_validateUnicodePropertyNameOrValue=function(n,u){n.unicodeProperties.binary.test(u)||n.raise("Invalid property name")},Q.regexp_eatUnicodePropertyName=function(n){var u=0;for(n.lastStringValue="";Fe(u=n.current());)n.lastStringValue+=gt(u),n.advance();return""!==n.lastStringValue},Q.regexp_eatUnicodePropertyValue=function(n){var u=0;for(n.lastStringValue="";De(u=n.current());)n.lastStringValue+=gt(u),n.advance();return""!==n.lastStringValue},Q.regexp_eatLoneUnicodePropertyNameOrValue=function(n){return this.regexp_eatUnicodePropertyValue(n)},Q.regexp_eatCharacterClass=function(n){if(n.eat(91)){if(n.eat(94),this.regexp_classRanges(n),n.eat(93))return!0;n.raise("Unterminated character class")}return!1},Q.regexp_classRanges=function(n){for(;this.regexp_eatClassAtom(n);){var u=n.lastIntValue;if(n.eat(45)&&this.regexp_eatClassAtom(n)){var S=n.lastIntValue;n.switchU&&(-1===u||-1===S)&&n.raise("Invalid character class"),-1!==u&&-1!==S&&u>S&&n.raise("Range out of order in character class")}}},Q.regexp_eatClassAtom=function(n){var u=n.pos;if(n.eat(92)){if(this.regexp_eatClassEscape(n))return!0;if(n.switchU){var S=n.current();(99===S||rt(S))&&n.raise("Invalid class escape"),n.raise("Invalid escape")}n.pos=u}var M=n.current();return 93!==M&&(n.lastIntValue=M,n.advance(),!0)},Q.regexp_eatClassEscape=function(n){var u=n.pos;if(n.eat(98))return n.lastIntValue=8,!0;if(n.switchU&&n.eat(45))return n.lastIntValue=45,!0;if(!n.switchU&&n.eat(99)){if(this.regexp_eatClassControlLetter(n))return!0;n.pos=u}return this.regexp_eatCharacterClassEscape(n)||this.regexp_eatCharacterEscape(n)},Q.regexp_eatClassControlLetter=function(n){var u=n.current();return!(!nt(u)&&95!==u||(n.lastIntValue=u%32,n.advance(),0))},Q.regexp_eatHexEscapeSequence=function(n){var u=n.pos;if(n.eat(120)){if(this.regexp_eatFixedHexDigits(n,2))return!0;n.switchU&&n.raise("Invalid escape"),n.pos=u}return!1},Q.regexp_eatDecimalDigits=function(n){var u=n.pos,S=0;for(n.lastIntValue=0;nt(S=n.current());)n.lastIntValue=10*n.lastIntValue+(S-48),n.advance();return n.pos!==u},Q.regexp_eatHexDigits=function(n){var u=n.pos,S=0;for(n.lastIntValue=0;ut(S=n.current());)n.lastIntValue=16*n.lastIntValue+dt(S),n.advance();return n.pos!==u},Q.regexp_eatLegacyOctalEscapeSequence=function(n){if(this.regexp_eatOctalDigit(n)){var u=n.lastIntValue;if(this.regexp_eatOctalDigit(n)){var S=n.lastIntValue;n.lastIntValue=u<=3&&this.regexp_eatOctalDigit(n)?64*u+8*S+n.lastIntValue:8*u+S}else n.lastIntValue=u;return!0}return!1},Q.regexp_eatOctalDigit=function(n){var u=n.current();return rt(u)?(n.lastIntValue=u-48,n.advance(),!0):(n.lastIntValue=0,!1)},Q.regexp_eatFixedHexDigits=function(n,u){var S=n.pos;n.lastIntValue=0;for(var M=0;M<u;++M){var B=n.current();if(!ut(B))return n.pos=S,!1;n.lastIntValue=16*n.lastIntValue+dt(B),n.advance()}return!0};var je=function(u){this.type=u.type,this.value=u.value,this.start=u.start,this.end=u.end,u.options.locations&&(this.loc=new de(u,u.startLoc,u.endLoc)),u.options.ranges&&(this.range=[u.start,u.end])},Ce=it.prototype;function lt(n){return"function"!=typeof BigInt?null:BigInt(n.replace(/_/g,""))}Ce.next=function(n){!n&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new je(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ce.getToken=function(){return this.next(),new je(this)},typeof Symbol<"u"&&(Ce[Symbol.iterator]=function(){var n=this;return{next:function(){var u=n.getToken();return{done:u.type===O.eof,value:u}}}}),Ce.nextToken=function(){var n=this.curContext();return(!n||!n.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(O.eof):n.override?n.override(this):void this.readToken(this.fullCharCodeAtPos())},Ce.readToken=function(n){return $e(n,this.options.ecmaVersion>=6)||92===n?this.readWord():this.getTokenFromCode(n)},Ce.fullCharCodeAtPos=function(){var n=this.input.charCodeAt(this.pos);if(n<=55295||n>=56320)return n;var u=this.input.charCodeAt(this.pos+1);return u<=56319||u>=57344?n:(n<<10)+u-56613888},Ce.skipBlockComment=function(){var n=this.options.onComment&&this.curPosition(),u=this.pos,S=this.input.indexOf("*/",this.pos+=2);if(-1===S&&this.raise(this.pos-2,"Unterminated comment"),this.pos=S+2,this.options.locations)for(var M=void 0,B=u;(M=ft(this.input,B,this.pos))>-1;)++this.curLine,B=this.lineStart=M;this.options.onComment&&this.options.onComment(!0,this.input.slice(u+2,S),u,this.pos,n,this.curPosition())},Ce.skipLineComment=function(n){for(var u=this.pos,S=this.options.onComment&&this.curPosition(),M=this.input.charCodeAt(this.pos+=n);this.pos<this.input.length&&!Ze(M);)M=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(u+n,this.pos),u,this.pos,S,this.curPosition())},Ce.skipSpace=function(){e:for(;this.pos<this.input.length;){var n=this.input.charCodeAt(this.pos);switch(n){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(n>8&&n<14||n>=5760&&Wt.test(String.fromCharCode(n))))break e;++this.pos}}},Ce.finishToken=function(n,u){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var S=this.type;this.type=n,this.value=u,this.updateContext(S)},Ce.readToken_dot=function(){var n=this.input.charCodeAt(this.pos+1);if(n>=48&&n<=57)return this.readNumber(!0);var u=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===n&&46===u?(this.pos+=3,this.finishToken(O.ellipsis)):(++this.pos,this.finishToken(O.dot))},Ce.readToken_slash=function(){var n=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===n?this.finishOp(O.assign,2):this.finishOp(O.slash,1)},Ce.readToken_mult_modulo_exp=function(n){var u=this.input.charCodeAt(this.pos+1),S=1,M=42===n?O.star:O.modulo;return this.options.ecmaVersion>=7&&42===n&&42===u&&(++S,M=O.starstar,u=this.input.charCodeAt(this.pos+2)),61===u?this.finishOp(O.assign,S+1):this.finishOp(M,S)},Ce.readToken_pipe_amp=function(n){var u=this.input.charCodeAt(this.pos+1);return u===n?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(O.assign,3):this.finishOp(124===n?O.logicalOR:O.logicalAND,2):61===u?this.finishOp(O.assign,2):this.finishOp(124===n?O.bitwiseOR:O.bitwiseAND,1)},Ce.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(O.assign,2):this.finishOp(O.bitwiseXOR,1)},Ce.readToken_plus_min=function(n){var u=this.input.charCodeAt(this.pos+1);return u===n?45!==u||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!xe.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(O.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===u?this.finishOp(O.assign,2):this.finishOp(O.plusMin,1)},Ce.readToken_lt_gt=function(n){var u=this.input.charCodeAt(this.pos+1),S=1;return u===n?(S=62===n&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+S)?this.finishOp(O.assign,S+1):this.finishOp(O.bitShift,S)):33!==u||60!==n||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===u&&(S=2),this.finishOp(O.relational,S)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Ce.readToken_eq_excl=function(n){var u=this.input.charCodeAt(this.pos+1);return 61===u?this.finishOp(O.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===n&&62===u&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(O.arrow)):this.finishOp(61===n?O.eq:O.prefix,1)},Ce.readToken_question=function(){var n=this.options.ecmaVersion;if(n>=11){var u=this.input.charCodeAt(this.pos+1);if(46===u){var S=this.input.charCodeAt(this.pos+2);if(S<48||S>57)return this.finishOp(O.questionDot,2)}if(63===u)return n>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(O.assign,3):this.finishOp(O.coalesce,2)}return this.finishOp(O.question,1)},Ce.readToken_numberSign=function(){var u=35;if(this.options.ecmaVersion>=13&&(++this.pos,$e(u=this.fullCharCodeAtPos(),!0)||92===u))return this.finishToken(O.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+gt(u)+"'")},Ce.getTokenFromCode=function(n){switch(n){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(O.parenL);case 41:return++this.pos,this.finishToken(O.parenR);case 59:return++this.pos,this.finishToken(O.semi);case 44:return++this.pos,this.finishToken(O.comma);case 91:return++this.pos,this.finishToken(O.bracketL);case 93:return++this.pos,this.finishToken(O.bracketR);case 123:return++this.pos,this.finishToken(O.braceL);case 125:return++this.pos,this.finishToken(O.braceR);case 58:return++this.pos,this.finishToken(O.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(O.backQuote);case 48:var u=this.input.charCodeAt(this.pos+1);if(120===u||88===u)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===u||79===u)return this.readRadixNumber(8);if(98===u||66===u)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(n);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(n);case 124:case 38:return this.readToken_pipe_amp(n);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(n);case 60:case 62:return this.readToken_lt_gt(n);case 61:case 33:return this.readToken_eq_excl(n);case 63:return this.readToken_question();case 126:return this.finishOp(O.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+gt(n)+"'")},Ce.finishOp=function(n,u){var S=this.input.slice(this.pos,this.pos+u);return this.pos+=u,this.finishToken(n,S)},Ce.readRegexp=function(){for(var n,u,S=this.pos;;){this.pos>=this.input.length&&this.raise(S,"Unterminated regular expression");var M=this.input.charAt(this.pos);if(xe.test(M)&&this.raise(S,"Unterminated regular expression"),n)n=!1;else{if("["===M)u=!0;else if("]"===M&&u)u=!1;else if("/"===M&&!u)break;n="\\"===M}++this.pos}var B=this.input.slice(S,this.pos);++this.pos;var te=this.pos,re=this.readWord1();this.containsEsc&&this.unexpected(te);var ce=this.regexpState||(this.regexpState=new ae(this));ce.reset(S,B,re),this.validateRegExpFlags(ce),this.validateRegExpPattern(ce);var me=null;try{me=new RegExp(B,re)}catch{}return this.finishToken(O.regexp,{pattern:B,flags:re,value:me})},Ce.readInt=function(n,u,S){for(var M=this.options.ecmaVersion>=12&&void 0===u,B=S&&48===this.input.charCodeAt(this.pos),te=this.pos,re=0,ce=0,me=0,Oe=u??1/0;me<Oe;++me,++this.pos){var ze=this.input.charCodeAt(this.pos),ct=void 0;if(M&&95===ze)B&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===ce&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===me&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),ce=ze;else{if((ct=ze>=97?ze-97+10:ze>=65?ze-65+10:ze>=48&&ze<=57?ze-48:1/0)>=n)break;ce=ze,re=re*n+ct}}return M&&95===ce&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===te||null!=u&&this.pos-te!==u?null:re},Ce.readRadixNumber=function(n){var u=this.pos;this.pos+=2;var S=this.readInt(n);return null==S&&this.raise(this.start+2,"Expected number in radix "+n),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(S=lt(this.input.slice(u,this.pos)),++this.pos):$e(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(O.num,S)},Ce.readNumber=function(n){var u=this.pos;!n&&null===this.readInt(10,void 0,!0)&&this.raise(u,"Invalid number");var S=this.pos-u>=2&&48===this.input.charCodeAt(u);S&&this.strict&&this.raise(u,"Invalid number");var M=this.input.charCodeAt(this.pos);if(!S&&!n&&this.options.ecmaVersion>=11&&110===M){var B=lt(this.input.slice(u,this.pos));return++this.pos,$e(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(O.num,B)}S&&/[89]/.test(this.input.slice(u,this.pos))&&(S=!1),46===M&&!S&&(++this.pos,this.readInt(10),M=this.input.charCodeAt(this.pos)),(69===M||101===M)&&!S&&((43===(M=this.input.charCodeAt(++this.pos))||45===M)&&++this.pos,null===this.readInt(10)&&this.raise(u,"Invalid number")),$e(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var te=function It(n,u){return u?parseInt(n,8):parseFloat(n.replace(/_/g,""))}(this.input.slice(u,this.pos),S);return this.finishToken(O.num,te)},Ce.readCodePoint=function(){var u;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var S=++this.pos;u=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,u>1114111&&this.invalidStringToken(S,"Code point out of bounds")}else u=this.readHexChar(4);return u},Ce.readString=function(n){for(var u="",S=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var M=this.input.charCodeAt(this.pos);if(M===n)break;92===M?(u+=this.input.slice(S,this.pos),u+=this.readEscapedChar(!1),S=this.pos):8232===M||8233===M?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ze(M)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return u+=this.input.slice(S,this.pos++),this.finishToken(O.string,u)};var At={};Ce.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(n){if(n!==At)throw n;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Ce.invalidStringToken=function(n,u){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw At;this.raise(n,u)},Ce.readTmplToken=function(){for(var n="",u=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var S=this.input.charCodeAt(this.pos);if(96===S||36===S&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==O.template&&this.type!==O.invalidTemplate?(n+=this.input.slice(u,this.pos),this.finishToken(O.template,n)):36===S?(this.pos+=2,this.finishToken(O.dollarBraceL)):(++this.pos,this.finishToken(O.backQuote));if(92===S)n+=this.input.slice(u,this.pos),n+=this.readEscapedChar(!0),u=this.pos;else if(Ze(S)){switch(n+=this.input.slice(u,this.pos),++this.pos,S){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:n+="\n";break;default:n+=String.fromCharCode(S)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),u=this.pos}else++this.pos}},Ce.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(O.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Ce.readEscapedChar=function(n){var u=this.input.charCodeAt(++this.pos);switch(++this.pos,u){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return gt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),n)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(u>=48&&u<=55){var M=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],B=parseInt(M,8);return B>255&&(M=M.slice(0,-1),B=parseInt(M,8)),this.pos+=M.length-1,u=this.input.charCodeAt(this.pos),("0"!==M||56===u||57===u)&&(this.strict||n)&&this.invalidStringToken(this.pos-1-M.length,n?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(B)}return Ze(u)?"":String.fromCharCode(u)}},Ce.readHexChar=function(n){var u=this.pos,S=this.readInt(16,n);return null===S&&this.invalidStringToken(u,"Bad character escape sequence"),S},Ce.readWord1=function(){this.containsEsc=!1;for(var n="",u=!0,S=this.pos,M=this.options.ecmaVersion>=6;this.pos<this.input.length;){var B=this.fullCharCodeAtPos();if(Ut(B,M))this.pos+=B<=65535?1:2;else{if(92!==B)break;this.containsEsc=!0,n+=this.input.slice(S,this.pos);var te=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var re=this.readCodePoint();(u?$e:Ut)(re,M)||this.invalidStringToken(te,"Invalid Unicode escape"),n+=gt(re),S=this.pos}u=!1}return n+this.input.slice(S,this.pos)},Ce.readWord=function(){var n=this.readWord1(),u=O.name;return this.keywords.test(n)&&(u=Rt[n]),this.finishToken(u,n)};it.acorn={Parser:it,version:"8.7.1",defaultOptions:Zt,Position:Gt,SourceLocation:de,getLineInfo:Lt,Node:y,TokenType:ye,tokTypes:O,keywordTypes:Rt,TokContext:f,tokContexts:d,isIdentifierChar:Ut,isIdentifierStart:$e,Token:je,isNewLine:Ze,lineBreak:xe,lineBreakG:Ri,nonASCIIwhitespace:Wt},we.Node=y,we.Parser=it,we.Position=Gt,we.SourceLocation=de,we.TokContext=f,we.Token=je,we.TokenType=ye,we.defaultOptions=Zt,we.getLineInfo=Lt,we.isIdentifierChar=Ut,we.isIdentifierStart=$e,we.isNewLine=Ze,we.keywordTypes=Rt,we.lineBreak=xe,we.lineBreakG=Ri,we.nonASCIIwhitespace=Wt,we.parse=function zt(n,u){return it.parse(n,u)},we.parseExpressionAt=function Bt(n,u,S){return it.parseExpressionAt(n,u,S)},we.tokContexts=d,we.tokTypes=O,we.tokenizer=function Et(n,u){return it.tokenizer(n,u)},we.version="8.7.1",Object.defineProperty(we,"__esModule",{value:!0})}(yi)},8946:function(Hi,yi,we){var wt,Ot,ti;(function(Xe,w){var qe=(Xe=Xe||we(4158)).window,We=Xe.document,W=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],i=t.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,o=Object.defineProperty,c=t.forEach||function(v,m){for(var D=0,C=this.length;D<C;D++)v.call(m,this[D],D,this)},l=function(v,m){for(var D in this)this.hasOwnProperty(D)&&v.call(m,this[D],D,this)},f=Object.assign||function(v){for(var m=1,D=arguments.length;m<D;m++){var C=arguments[m];for(var R in C)C.hasOwnProperty(R)&&(v[R]=C[R])}return v},d=function(v,m,D){if(v){var C=s(v,"length");(C&&"number"==typeof C.value?c:l).call(v,m,D=D||v)}return D};function b(v,m,D,C,R){var y={};function E(T,N){"string"==typeof(N=N||(N=s(m,T))&&(N.get?N:N.value))&&"#"===N[0]&&(N=v[N.substring(1)]||N);var H,V="function"==typeof N,z=N,q=R||V&&!N.base?N&&N.get?T in v:v[T]:null;(!R||!q)&&(V&&q&&(N.base=q),V&&!1!==C&&(H=T.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(y[H[3].toLowerCase()+H[4]]=H[2]),(!z||V||!z.get||"function"!=typeof z.get||!_.isPlainObject(z))&&(z={value:z,writable:!0}),(s(v,T)||{configurable:!0}).configurable&&(z.configurable=!0,z.enumerable=D??!H),o(v,T,z))}if(m){for(var g in m)m.hasOwnProperty(g)&&!e.test(g)&&E(g);for(var g in y){var I=y[g],P=v["set"+I],L=v["get"+I]||P&&v["is"+I];L&&(!0===C||0===L.length)&&E(g,{get:L,set:P})}}return v}function _(){for(var v=0,m=arguments.length;v<m;v++){var D=arguments[v];D&&f(this,D)}return this}return b(_,{inject:function(v){if(v){var m=!0===v.statics?v:v.statics,D=v.beans,C=v.preserve;m!==v&&b(this.prototype,v,v.enumerable,D,C),b(this,m,null,D,C)}for(var R=1,y=arguments.length;R<y;R++)this.inject(arguments[R]);return this},extend:function(){for(var m,D,R,v=this,C=0,y=arguments.length;C<y&&(!m||!D);C++)R=arguments[C],m=m||R.initialize,D=D||R.prototype;return m=m||function(){v.apply(this,arguments)},D=m.prototype=D||r(this.prototype),o(D,"constructor",{value:m,writable:!0,configurable:!0}),b(m,this),arguments.length&&this.inject.apply(m,arguments),m.base=v,m}}).inject({enumerable:!1,initialize:_,set:_,inject:function(){for(var v=0,m=arguments.length;v<m;v++){var D=arguments[v];D&&b(this,D,D.enumerable,D.beans,D.preserve)}return this},extend:function(){var v=r(this);return v.inject.apply(v,arguments)},each:function(v,m){return d(this,v,m)},clone:function(){return new this.constructor(this)},statics:{set:f,each:d,create:r,define:o,describe:s,clone:function(v){return f(new v.constructor,v)},isPlainObject:function(v){var m=null!=v&&v.constructor;return m&&(m===Object||m===_||"Object"===m.name)},pick:function(v,m){return v!==w?v:m},slice:function(v,m,D){return i.call(v,m,D)}}})};Hi.exports=W,W.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+W.each(this,function(e,t){if(!/^_/.test(t)){var i=typeof e;this.push(t+": "+("number"===i?ye.instance.number(e):"string"===i?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return W.importJSON(e,this)},exportJSON:function(e){return W.exportJSON(this,e)},toJSON:function(){return W.serialize(this)},set:function(e,t){return e&&W.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),i=t.prototype._class;return i&&!W.exports[i]&&(W.exports[i]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((i=e.length)!==t.length)return!1;for(;i--;)if(!W.equals(e[i],t[i]))return!1}else{var i,r=Object.keys(e);if((i=r.length)!==Object.keys(t).length)return!1;for(;i--;){var s=r[i];if(!t.hasOwnProperty(s)||!W.equals(e[s],t[s]))return!1}}return!0}return!1},read:function(e,t,i,r){if(this===W){var s=this.peek(e,t);return e.__index++,s}var o=this.prototype,c=o._readIndex,l=t||c&&e.__index||0,f=e.length,d=e[l];if(r=r||f-l,d instanceof this||i&&i.readNull&&null==d&&r<=1)return c&&(e.__index=l+1),d&&i&&i.clone?d.clone():d;if(d=W.create(o),c&&(d.__read=!0),d=d.initialize.apply(d,l>0||l+r<f?W.slice(e,l,l+r):e)||d,c){e.__index=l+d.__read;var b=d.__filtered;b&&(e.__filtered=b,d.__filtered=w),d.__read=w}return d},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,i,r){for(var o,s=[],c=t||0,l=r?c+r:e.length,f=c;f<l;f++)s.push(Array.isArray(o=e[f])?this.read(o,0,i):this.read(e,f,i,1));return s},readNamed:function(e,t,i,r,s){var o=this.getNamed(e,t),c=o!==w;if(c){var l=e.__filtered;if(!l){var f=this.getSource(e);(l=e.__filtered=W.create(f)).__unfiltered=f}l[t]=w}return this.read(c?[o]:e,i,r,s)},readSupported:function(e,t){var i=this.getSource(e),r=this,s=!1;return i&&Object.keys(i).forEach(function(o){if(o in t){var c=r.readNamed(e,o);c!==w&&(t[o]=c),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===w){var i=1===e.length&&e[0];t=e.__source=i&&W.isPlainObject(i)?i:null}return t},getNamed:function(e,t){var i=this.getSource(e);if(i)return t?i[t]:e.__filtered||i},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,i,r){var s;function o(b){if(!(i&&b in i||s&&b in s)){var _=t[b];_!==w&&(e[b]=_)}}if(r){for(var f,c={},l=0,d=r.length;l<d;l++)(f=r[l])in t&&(o(f),c[f]=!0);s=c}return Object.keys(t.__unfiltered||t).forEach(o),e},isPlainValue:function(e,t){return W.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,i,r){t=t||{};var o,s=!r;if(s&&(t.formatter=new ye(t.precision),r={length:0,definitions:{},references:{},add:function(_,v){var m="#"+_._id,D=this.references[m];if(!D){this.length++;var C=v.call(_),R=_._class;R&&C[0]!==R&&C.unshift(R),this.definitions[m]=C,D=this.references[m]=[m]}return D}}),e&&e._serialize){o=e._serialize(t,r);var c=e._class;c&&!e._compactSerialize&&(s||!i)&&o[0]!==c&&o.unshift(c)}else if(Array.isArray(e)){o=[];for(var l=0,f=e.length;l<f;l++)o[l]=W.serialize(e[l],t,i,r)}else if(W.isPlainObject(e)){o={};var d=Object.keys(e);for(l=0,f=d.length;l<f;l++){var b=d[l];o[b]=W.serialize(e[b],t,i,r)}}else o="number"==typeof e?t.formatter.number(e,t.precision):e;return s&&r.length>0?[["dictionary",r.definitions],o]:o},deserialize:function(e,t,i,r,s){var o=e,c=!i,l=c&&e&&e.length&&"dictionary"===e[0][0];if(i=i||{},Array.isArray(e)){var f=e[0],d="dictionary"===f;if(1==e.length&&/^#/.test(f))return i.dictionary[f];o=[];for(var b=(f=W.exports[f])?1:0,_=e.length;b<_;b++)o.push(W.deserialize(e[b],t,i,d,l));if(f){var v=o;o=t?t(f,v,c||s):new f(v)}}else if(W.isPlainObject(e))for(var m in o={},r&&(i.dictionary=o),e)o[m]=W.deserialize(e[m],t,i);return l?o[1]:o},exportJSON:function(e,t){var i=W.serialize(e,t);return t&&0==t.asString?i:JSON.stringify(i)},importJSON:function(e,t){return W.deserialize("string"==typeof e?JSON.parse(e):e,function(i,r,s){var o=s&&t&&t.constructor===i,c=o?t:W.create(i.prototype);if(1===r.length&&c instanceof ke&&(o||!(c instanceof ai))){var l=r[0];W.isPlainObject(l)&&(l.insert=!1,o&&(r=r.concat([ke.INSERT])))}return(o?c.set:i).apply(c,r),o&&(t=null),c})},push:function(e,t){var i=t.length;if(i<4096)e.push.apply(e,t);else{var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=t[s]}return e},splice:function(e,t,i,r){var s=t&&t.length,o=i===w;(i=o?e.length:i)>e.length&&(i=e.length);for(var c=0;c<s;c++)t[c]._index=i+c;if(o)return W.push(e,t),[];var l=[i,r];t&&W.push(l,t);for(var f=e.splice.apply(e,l),d=(c=0,f.length);c<d;c++)f[c]._index=w;for(c=i+s,d=e.length;c<d;c++)e[c]._index=c;return f},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,i){return i.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var ci={on:function(e,t){if("string"!=typeof e)W.each(e,function(o,c){this.on(c,o)},this);else{var i=this._eventTypes,r=i&&i[e],s=this._callbacks=this._callbacks||{};-1===(s=s[e]=s[e]||[]).indexOf(t)&&(s.push(t),r&&r.install&&1===s.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var o,i=this._eventTypes,r=i&&i[e],s=this._callbacks&&this._callbacks[e];return s&&(!t||-1!==(o=s.indexOf(t))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):-1!==o&&s.splice(o,1)),this}W.each(e,function(c,l){this.off(l,c)},this)},once:function(e,t){return this.on(e,function i(){t.apply(this,arguments),this.off(e,i)})},emit:function(e,t){var i=this._callbacks&&this._callbacks[e];if(!i)return!1;var r=W.slice(arguments,1),s=t&&t.target&&!t.currentTarget;i=i.slice(),s&&(t.currentTarget=this);for(var o=0,c=i.length;o<c;o++)if(0==i[o].apply(this,r)){t&&t.stop&&t.stop();break}return s&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,i=this._callbacks,r=e?"install":"uninstall";if(t)for(var s in i)if(i[s].length>0){var o=t[s],c=o&&o[r];c&&c.call(this,s)}},statics:{inject:function e(t){var i=t._events;if(i){var r={};W.each(i,function(s,o){var c="string"==typeof s,l=c?s:o,f=W.capitalize(l),d=l.substring(2).toLowerCase();r[d]=c?{}:s,l="_"+l,t["get"+f]=function(){return this[l]},t["set"+f]=function(b){var _=this[l];_&&this.off(d,_),b&&this.on(d,b),this[l]=b}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},xt=W.extend({_class:"PaperScope",initialize:function e(){Ve=this,this.settings=new W({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var i=He.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:Mi.nativeModes},He.release(i)}if(!this.agent){var r=Xe.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o="darwin"===s?"mac":s,c=t.agent=t.browser={platform:o};o&&(c[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(l,f,d,b,_){if(!c.chrome){var v="opera"===f?b:/^(node|trident)$/.test(f)?_:d;c.version=v,c.versionNumber=parseFloat(v),c.name=f={trident:"msie",jsdom:"node"}[f]||f,c[f]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var i=Ve.PaperScript.execute(e,this,t);return Qe.updateFocus(),i},install:function(e){var t=this;for(var i in W.each(["project","view","tool"],function(r){W.define(e,r,{configurable:!0,get:function(){return t[r]}})}),this)!/^_/.test(i)&&this[i]&&(e[i]=this[i])},setup:function(e){return Ve=this,this.project=new Wt(e),this},createCanvas:function(e,t){return He.getCanvas(e,t)},activate:function(){Ve=this},clear:function(){for(var e=this.projects,t=this.tools,i=e.length-1;i>=0;i--)e[i].remove();for(i=t.length-1;i>=0;i--)t[i].remove()},remove:function(){this.clear(),delete xt._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(i,r){return i[t](r)||i[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),$e=W.extend(ci,{initialize:function(e){this._scope=Ve,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(W.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),Ut={findItemBoundsCollisions:function(e,t,i){function r(c){for(var l=new Array(c.length),f=0;f<c.length;f++){var d=c[f].getBounds();l[f]=[d.left,d.top,d.right,d.bottom]}return l}var s=r(e),o=t&&t!==e?r(t):s;return this.findBoundsCollisions(s,o,i||0)},findCurveBoundsCollisions:function(e,t,i,r){function s(v){for(var m=Math.min,D=Math.max,C=new Array(v.length),R=0;R<v.length;R++){var y=v[R];C[R]=[m(y[0],y[2],y[4],y[6]),m(y[1],y[3],y[5],y[7]),D(y[0],y[2],y[4],y[6]),D(y[1],y[3],y[5],y[7])]}return C}var o=s(e),c=t&&t!==e?s(t):o;if(r){for(var l=this.findBoundsCollisions(o,c,i||0,!1,!0),f=this.findBoundsCollisions(o,c,i||0,!0,!0),d=[],b=0,_=l.length;b<_;b++)d[b]={hor:l[b],ver:f[b]};return d}return this.findBoundsCollisions(o,c,i||0)},findBoundsCollisions:function(e,t,i,r,s){var o=!t||e===t,c=o?e:e.concat(t),l=e.length,f=c.length;function d(le,pe,ge){for(var Q=0,ae=le.length;Q<ae;){var he=ae+Q>>>1;c[le[he]][pe]<ge?Q=he+1:ae=he}return Q-1}for(var b=r?1:0,_=b+2,v=r?0:1,m=v+2,D=new Array(f),C=0;C<f;C++)D[C]=C;D.sort(function(le,pe){return c[le][b]-c[pe][b]});var R=[],y=new Array(l);for(C=0;C<f;C++){var E=D[C],g=c[E],I=o?E:E-l,P=E<l,L=o||!P,T=P?[]:null;if(R.length){var N=d(R,_,g[b]-i)+1;if(R.splice(0,N),o&&s){T=T.concat(R);for(var V=0;V<R.length;V++)y[z=R[V]].push(I)}else{var q=g[m],H=g[v];for(V=0;V<R.length;V++){var z,G=c[z=R[V]],j=z<l,K=o||z>=l;(s||(P&&K||L&&j)&&q>=G[v]-i&&H<=G[m]+i)&&(P&&K&&T.push(o?z:z-l),L&&j&&y[z].push(I))}}}if(P&&(e===t&&T.push(E),y[E]=T),R.length){var ee=d(R,_,g[_]);R.splice(ee+1,0,E)}else R.push(E)}for(C=0;C<y.length;C++){var se=y[C];se&&se.sort(function(pe,ge){return pe-ge})}return y}},ye=W.extend({initialize:function(e){this.precision=W.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,i){return this.number(e)+(i||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});ye.instance=new ye;var Me=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,s=Math.pow,o=Math.log2||function(_){return Math.log(_)*Math.LOG2E},c=1e-12,l=112e-18;function f(_,v,m){return _<v?v:_>m?m:_}function d(_,v,m){function D(N){var V=134217729*N,q=N-V+V;return[q,N-q]}var C=v*v-_*m,R=v*v+_*m;if(3*i(C)<R){var y=D(_),E=D(v),g=D(m),I=v*v,L=_*m;C=I-L+(E[0]*E[0]-I+2*E[0]*E[1]+E[1]*E[1]-(y[0]*g[0]-L+y[0]*g[1]+y[1]*g[0]+y[1]*g[1]))}return C}function b(){var _=Math.max.apply(Math,arguments);return _&&(_<1e-8||_>1e8)?s(2,-Math.round(o(_))):0}return{EPSILON:c,MACHINE_EPSILON:l,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(_){return _>=-c&&_<=c},isMachineZero:function(_){return _>=-l&&_<=l},clamp:f,integrate:function(_,v,m,D){for(var C=e[D-2],R=t[D-2],y=.5*(m-v),E=y+v,g=0,I=D+1>>1,P=1&D?R[g++]*_(E):0;g<I;){var L=y*C[g];P+=R[g++]*(_(E+L)+_(E-L))}return y*P},findRoot:function(_,v,m,D,C,R,y){for(var E=0;E<R;E++){var g=_(m),I=g/v(m),P=m-I;if(i(I)<y){m=P;break}g>0?(C=m,m=P<=D?.5*(D+C):P):(D=m,m=P>=C?.5*(D+C):P)}return f(m,D,C)},solveQuadratic:function(_,v,m,D,C,R){var y,E=1/0;if(i(_)<c){if(i(v)<c)return i(m)<c?-1:0;y=-m/v}else{var g=d(_,v*=-.5,m);if(g&&i(g)<l){var I=b(i(_),i(v),i(m));I&&(g=d(_*=I,v*=I,m*=I))}if(g>=-l){var P=g<0?0:r(g),L=v+(v<0?-P:P);0===L?E=-(y=m/_):(y=L/_,E=m/L)}}var T=0,N=null==C,V=C-c,z=R+c;return isFinite(y)&&(N||y>V&&y<z)&&(D[T++]=N?y:f(y,C,R)),E!==y&&isFinite(E)&&(N||E>V&&E<z)&&(D[T++]=N?E:f(E,C,R)),T},solveCubic:function(_,v,m,D,C,R,y){var g,I,P,L,T,E=b(i(_),i(v),i(m),i(D));function N(ee){var se=_*(g=ee);L=(se+(I=se+v))*g+(P=I*g+m),T=P*g+D}if(E&&(_*=E,v*=E,m*=E,D*=E),i(_)<c)_=v,I=m,P=D,g=1/0;else if(i(D)<c)I=v,P=m,g=0;else{N(-v/_/3);var V=T/_,z=s(i(V),1/3),q=V<0?-1:1,H=-L/_,G=H>0?1.324717957244746*Math.max(z,r(H)):z,j=g-q*G;if(j!==g){do{N(j),j=0===L?g:g-T/L/(1+l)}while(q*j>q*g);i(_)*g*g>i(D/g)&&(I=((P=-D/g)-m)/g)}}var K=Me.solveQuadratic(_,I,P,C,R,y),X=null==R;return isFinite(g)&&(0===K||K>0&&g!==C[0]&&g!==C[1])&&(X||g>R-c&&g<y+c)&&(C[K++]=X?g:f(g,R,y)),K}}},ot={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},J=W.extend({_class:"Point",_readIndex:!0,initialize:function(t,i){var r=typeof t,s=this.__read,o=0;if("number"===r){var c="number"==typeof i;this._set(t,c?i:t),s&&(o=c?2:1)}else if("undefined"===r||null===t)this._set(0,0),s&&(o=null===t?1:0);else{var l="string"===r?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(l)?this._set(+l[0],+(l.length>1?l[1]:l[0])):"x"in l?this._set(l.x||0,l.y||0):"width"in l?this._set(l.width||0,l.height||0):"angle"in l?(this._set(l.length||0,0),this.setAngle(l.angle||0)):(this._set(0,0),o=0)}return s&&(this.__read=o),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new J(this.x,this.y)},toString:function(){var e=ye.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var i=e/this.getLength();Me.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=J.read(arguments),t=this.getLength()*e.getLength();if(Me.isZero(t))return NaN;var i=this.dot(e)/t;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=J.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=J.read(e),i=t.x-this.x,r=t.y-this.y,s=i*i+r*r,o=W.read(e);return o?s:Math.sqrt(s)},normalize:function(e){e===w&&(e=1);var t=this.getLength(),i=0!==t?e/t:0,r=new J(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var i=t?this.subtract(t):this,r=Math.sin(e),s=Math.cos(e);return i=new J(i.x*s-i.y*r,i.x*r+i.y*s),t?i.add(t):i},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=J.read(arguments);return new J(this.x+e.x,this.y+e.y)},subtract:function(){var e=J.read(arguments);return new J(this.x-e.x,this.y-e.y)},multiply:function(){var e=J.read(arguments);return new J(this.x*e.x,this.y*e.y)},divide:function(){var e=J.read(arguments);return new J(this.x/e.x,this.y/e.y)},modulo:function(){var e=J.read(arguments);return new J(this.x%e.x,this.y%e.y)},negate:function(){return new J(-this.x,-this.y)},isInside:function(){return xe.read(arguments).contains(this)},isClose:function(){var e=arguments,t=J.read(e),i=W.read(e);return this.getDistance(t)<=i},isCollinear:function(){var e=J.read(arguments);return J.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=J.read(arguments);return J.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=Me.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=J.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=J.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=J.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new J(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=J.read(e),i=J.read(e);return new J(Math.min(t.x,i.x),Math.min(t.y,i.y))},max:function(){var e=arguments,t=J.read(e),i=J.read(e);return new J(Math.max(t.x,i.x),Math.max(t.y,i.y))},random:function(){return new J(Math.random(),Math.random())},isCollinear:function(e,t,i,r){return Math.abs(e*r-t*i)<=1e-8*Math.sqrt((e*e+t*t)*(i*i+r*r))},isOrthogonal:function(e,t,i,r){return Math.abs(e*i+t*r)<=1e-8*Math.sqrt((e*e+t*t)*(i*i+r*r))}}},W.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new J(t(this.x),t(this.y))}},{})),Rt=J.extend({initialize:function(t,i,r,s){this._x=t,this._y=i,this._owner=r,this._setter=s},_set:function(e,t,i){return this._x=e,this._y=t,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),fe=W.extend({_class:"Size",_readIndex:!0,initialize:function(t,i){var r=typeof t,s=this.__read,o=0;if("number"===r){var c="number"==typeof i;this._set(t,c?i:t),s&&(o=c?2:1)}else if("undefined"===r||null===t)this._set(0,0),s&&(o=null===t?1:0);else{var l="string"===r?t.split(/[\s,]+/)||[]:t;o=1,Array.isArray(l)?this._set(+l[0],+(l.length>1?l[1]:l[0])):"width"in l?this._set(l.width||0,l.height||0):"x"in l?this._set(l.x||0,l.y||0):(this._set(0,0),o=0)}return s&&(this.__read=o),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new fe(this.width,this.height)},toString:function(){var e=ye.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=fe.read(arguments);return new fe(this.width+e.width,this.height+e.height)},subtract:function(){var e=fe.read(arguments);return new fe(this.width-e.width,this.height-e.height)},multiply:function(){var e=fe.read(arguments);return new fe(this.width*e.width,this.height*e.height)},divide:function(){var e=fe.read(arguments);return new fe(this.width/e.width,this.height/e.height)},modulo:function(){var e=fe.read(arguments);return new fe(this.width%e.width,this.height%e.height)},negate:function(){return new fe(-this.width,-this.height)},isZero:function(){var e=Me.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new fe(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new fe(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new fe(Math.random(),Math.random())}}},W.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new fe(t(this.width),t(this.height))}},{})),O=fe.extend({initialize:function(t,i,r,s){this._width=t,this._height=i,this._owner=r,this._setter=s},_set:function(e,t,i){return this._width=e,this._height=t,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),xe=W.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,r,s){var l,o=arguments,c=typeof t;if("number"===c?(this._set(t,i,r,s),l=4):"undefined"===c||null===t?(this._set(0,0,0,0),l=null===t?1:0):1===o.length&&(Array.isArray(t)?(this._set.apply(this,t),l=1):t.x!==w||t.width!==w?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),l=1):t.from===w&&t.to===w&&(this._set(0,0,0,0),W.readSupported(o,this)&&(l=1))),l===w){var v,m,f=J.readNamed(o,"from"),d=W.peek(o),b=f.x,_=f.y;if(d&&d.x!==w||W.hasNamed(o,"to")){var D=J.readNamed(o,"to");(v=D.x-b)<0&&(b=D.x,v=-v),(m=D.y-_)<0&&(_=D.y,m=-m)}else{var C=fe.read(o);v=C.width,m=C.height}this._set(b,_,v,m),l=o.__index}var R=o.__filtered;return R&&(this.__filtered=R),this.__read&&(this.__read=l),this},set:"#initialize",_set:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},clone:function(){return new xe(this.x,this.y,this.width,this.height)},equals:function(e){var t=W.isPlainValue(e)?xe.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=ye.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?J:Rt)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=J.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?fe:O)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=fe.read(arguments),t=this._sx,i=this._sy,r=e.width,s=e.height;t&&(this.x+=(this.width-r)*t),i&&(this.y+=(this.height-s)*i),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?J:Rt)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=J.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==w||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(xe.read(arguments)):this._containsPoint(J.read(arguments))},_containsPoint:function(e){var t=e.x,i=e.y;return t>=this.x&&i>=this.y&&t<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(e){var t=e.x,i=e.y;return t>=this.x&&i>=this.y&&t+e.width<=this.x+this.width&&i+e.height<=this.y+this.height},intersects:function(){var e=xe.read(arguments),t=W.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=xe.read(arguments),t=Math.max(this.x,e.x),i=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return new xe(t,i,r-t,s-i)},unite:function(){var e=xe.read(arguments),t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);return new xe(t,i,r-t,s-i)},include:function(){var e=J.read(arguments),t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),s=Math.max(this.y+this.height,e.y);return new xe(t,i,r-t,s-i)},expand:function(){var e=fe.read(arguments),t=e.width,i=e.height;return new xe(this.x-t/2,this.y-i/2,this.width+t,this.height+i)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===w?e:t)-this.height)}},W.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var i=e.join(""),r=/^[RL]/.test(i);t>=4&&(e[1]+=r?"Y":"X");var s=e[r?0:1],o=e[r?1:0],c="get"+s,l="get"+o,f="set"+s,d="set"+o,_="set"+i;this["get"+i]=function(v){return new(v?J:Rt)(this[c](),this[l](),this,_)},this[_]=function(){var v=J.read(arguments);this[f](v.x),this[d](v.y)}},{beans:!0})),Ri=xe.extend({initialize:function(t,i,r,s,o,c){this._set(t,i,r,s,!0),this._owner=o,this._setter=c},_set:function(e,t,i,r,s){return this._x=e,this._y=t,this._width=i,this._height=r,s||this._owner[this._setter](this),this}},new function(){var e=xe.prototype;return W.each(["x","y","width","height"],function(t){var i=W.capitalize(t),r="_"+t;this["get"+i]=function(){return this[r]},this["set"+i]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},W.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var i="set"+t;this[i]=function(){this._dontNotify=!0,e[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var i=this._owner;i._changeSelection&&i._changeSelection(2,t)}}))}),Ze=W.extend({_class:"Matrix",initialize:function e(t,i){var r=arguments,s=r.length,o=!0;if(s>=6?this._set.apply(this,r):1===s||2===s?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,i):Array.isArray(t)?this._set.apply(this,i?t.concat([i]):t):o=!1:s?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,i,r,s,o,c){return this._a=e,this._b=t,this._c=i,this._d=r,this._tx=s,this._ty=o,c||this._changed(),this},_serialize:function(e,t){return W.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new Ze(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=ye.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var i=this._owner;return!!i&&(i.transform(null,W.pick(e,!0),t),this.isIdentity())},translate:function(){var e=J.read(arguments),t=e.x,i=e.y;return this._tx+=t*this._a+i*this._c,this._ty+=t*this._b+i*this._d,this._changed(),this},scale:function(){var e=arguments,t=J.read(e),i=J.read(e,0,{readNull:!0});return i&&this.translate(i),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,i&&this.translate(i.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=J.read(arguments,1),i=t.x,r=t.y,s=Math.cos(e),o=Math.sin(e),c=i-i*s+r*o,l=r-i*o-r*s,f=this._a,d=this._b,b=this._c,_=this._d;return this._a=s*f+o*b,this._b=s*d+o*_,this._c=-o*f+s*b,this._d=-o*d+s*_,this._tx+=c*f+l*b,this._ty+=c*d+l*_,this._changed(),this},shear:function(){var e=arguments,t=J.read(e),i=J.read(e,0,{readNull:!0});i&&this.translate(i);var r=this._a,s=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*s,i&&this.translate(i.negate()),this._changed(),this},skew:function(){var e=arguments,t=J.read(e),i=J.read(e,0,{readNull:!0}),r=Math.PI/180,s=new J(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(s,i)},append:function(e,t){if(e){var i=this._a,r=this._b,s=this._c,o=this._d,c=e._a,l=e._c,f=e._b,d=e._d,b=e._tx,_=e._ty;this._a=c*i+f*s,this._c=l*i+d*s,this._b=c*r+f*o,this._d=l*r+d*o,this._tx+=b*i+_*s,this._ty+=b*r+_*o,t||this._changed()}return this},prepend:function(e,t){if(e){var i=this._a,r=this._b,s=this._c,o=this._d,c=this._tx,l=this._ty,f=e._a,d=e._c,b=e._b,_=e._d,v=e._tx,m=e._ty;this._a=f*i+d*r,this._c=f*s+d*o,this._b=b*i+_*r,this._d=b*s+_*o,this._tx=f*c+d*l+v,this._ty=b*c+_*l+m,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty,c=e*r-t*i,l=null;return c&&!isNaN(c)&&isFinite(s)&&isFinite(o)&&(this._a=r/c,this._b=-t/c,this._c=-i/c,this._d=e/c,this._tx=(i*o-r*s)/c,this._ty=(t*s-e*o)/c,l=this),l},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Ze(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,i){return arguments.length<3?this._transformPoint(J.read(arguments)):this._transformCoordinates(e,t,i)},_transformPoint:function(e,t,i){var r=e.x,s=e.y;return t||(t=new J),t._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(e,t,i){for(var r=0,s=2*i;r<s;r+=2){var o=e[r],c=e[r+1];t[r]=o*this._a+c*this._c+this._tx,t[r+1]=o*this._b+c*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,i=e.y,r=t+e.width,s=i+e.height,o=[t,i,r,i,r,s,t,s];return this._transformCoordinates(o,o,4)},_transformBounds:function(e,t,i){for(var r=this._transformCorners(e),s=r.slice(0,2),o=s.slice(),c=2;c<8;c++){var l=r[c],f=1&c;l<s[f]?s[f]=l:l>o[f]&&(o[f]=l)}return t||(t=new xe),t._set(s[0],s[1],o[0]-s[0],o[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(J.read(arguments))},_inverseTransform:function(e,t,i){var r=this._a,s=this._b,o=this._c,c=this._d,l=this._tx,f=this._ty,d=r*c-s*o,b=null;if(d&&!isNaN(d)&&isFinite(l)&&isFinite(f)){var _=e.x-this._tx,v=e.y-this._ty;t||(t=new J),b=t._set((_*c-v*o)/d,(v*r-_*s)/d,i)}return b},decompose:function(){var f,d,b,e=this._a,t=this._b,i=this._c,r=this._d,s=e*r-t*i,o=Math.sqrt,c=Math.atan2,l=180/Math.PI;if(0!==e||0!==t){var _=o(e*e+t*t);f=Math.acos(e/_)*(t>0?1:-1),d=[_,s/_],b=[c(e*i+t*r,_*_),0]}else if(0!==i||0!==r){var v=o(i*i+r*r);f=Math.asin(i/v)*(r>0?1:-1),d=[s/v,v],b=[0,c(e*i+t*r,v*v)]}else f=0,b=d=[0,0];return{translation:this.getTranslation(),rotation:f*l,scaling:new J(d),skewing:new J(b[0]*l,b[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new J(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},W.each(["a","b","c","d","tx","ty"],function(e){var t=W.capitalize(e),i="_"+e;this["get"+t]=function(){return this[i]},this["set"+t]=function(r){this[i]=r,this._changed()}},{})),ft=W.extend({_class:"Line",initialize:function(t,i,r,s,o){var c=!1;arguments.length>=4?(this._px=t,this._py=i,this._vx=r,this._vy=s,c=o):(this._px=t.x,this._py=t.y,this._vx=i.x,this._vy=i.y,c=r),c||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new J(this._px,this._py)},getVector:function(){return new J(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return ft.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return ft.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return ft.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return J.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return J.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,i,r,s,o,c,l,f,d){f||(i-=e,r-=t,c-=s,l-=o);var b=i*l-r*c;if(!Me.isMachineZero(b)){var _=e-s,v=t-o,m=(c*v-l*_)/b,D=(i*v-r*_)/b,R=-1e-12,y=1+1e-12;if(d||R<m&&m<y&&R<D&&D<y)return d||(m=m<=0?0:m>=1?1:m),new J(e+m*i,t+m*r)}},getSide:function(e,t,i,r,s,o,c,l){c||(i-=e,r-=t);var f=s-e,b=f*r-(o-t)*i;return!l&&Me.isMachineZero(b)&&(b=(f*i+f*i)/(i*i+r*r))>=0&&b<=1&&(b=0),b<0?-1:b>0?1:0},getSignedDistance:function(e,t,i,r,s,o,c){return c||(i-=e,r-=t),0===i?r>0?s-e:e-s:0===r?i<0?o-t:t-o:((s-e)*r-(o-t)*i)/(r>i?r*Math.sqrt(1+i*i/(r*r)):i*Math.sqrt(1+r*r/(i*i)))},getDistance:function(e,t,i,r,s,o,c){return Math.abs(ft.getSignedDistance(e,t,i,r,s,o,c))}}}),Wt=$e.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){$e.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new ui(null,null,this),this._view=Qe.create(this,t||He.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return W.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var r=this._changes;if(r&&t){var s=this._changesById,o=t._id,c=s[o];c?c.flags|=e:r.push(s[o]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ai({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Ht,match:function(i){var r=i._definition,s=r._id;return t[s]||(t[s]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var i in e){var r=e[i],s=r._selection;1&s&&r.isInserted()?t.push(r):s||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,i=this._selectionItems;e._selection?i[t]!==e&&(this._selectionCount++,i[t]=e):i[t]===e&&(this._selectionCount--,delete i[t])},selectAll:function(){for(var e=this._children,t=0,i=e.length;t<i;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(w,e)},insertLayer:function(e,t){if(t instanceof ai){t._remove(!1,!0),W.splice(this._children,[t],e,0),t._setProject(this,!0);var i=t._name;i&&t.setName(i),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,i){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(w,new ai(ke.NO_INSERT),!0)).insertChild(e,t),i&&t.activate&&t.activate(),t},getItems:function(e){return ke._getItems(this,e)},getItem:function(e){return ke._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return W.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var i=t[e];if(i){for(var r in i){var s=i[r];for(var o in t){var c=t[o];c&&c!=i&&delete c[s._id]}s.remove()}t[e]=null}}},draw:function(e,t,i){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,s=new W({offset:new J(0,0),pixelRatio:i,viewMatrix:t.isIdentity()?null:t,matrices:[new Ze],updateMatrix:!0}),o=0,c=r.length;o<c;o++)r[o].draw(e,s);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var l=this._selectionItems,f=this._scope.settings.handleSize,d=this._updateVersion;for(var b in l)l[b]._drawSelection(e,t,f,l,d);e.restore()}}}),ke=W.extend(ci,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=W.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Ze,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return W.each(e,function(t){this._events[t]={install:function(i){this.getView()._countItemEvent(i,1)},uninstall:function(i){this.getView()._countItemEvent(i,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var i=e&&W.isPlainObject(e),r=i&&!0===e.internal,s=this._matrix=new Ze,o=i&&e.project||Ve.project,c=Ve.settings;return this._id=r?null:ot.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&c.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new ui(o._currentStyle,this,o),r||i&&0==e.insert||!c.insertItems&&(!i||1!=e.insert)?this._setProject(o):(i&&e.parent||o)._insertItem(w,this,!0),i&&e!==ke.NO_INSERT&&e!==ke.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(e,t){var i={},r=this;function s(o){for(var c in o){var l=r[c];W.equals(l,"leading"===c?1.2*o.fontSize:o[c])||(i[c]=W.serialize(l,e,"data"!==c,t))}}return s(this._serializeFields),this instanceof Ft||s(this._style._defaults),[this._class,i]},_changed:function(e){var t=this._symbol,i=this._parent||t,r=this._project;8&e&&(this._bounds=this._position=this._decomposed=w),16&e&&(this._globalMatrix=w),i&&72&e&&ke._clearBoundsCache(i),2&e&&ke._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var i=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in i||(i[e]=this)}this._name=e||w,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},W.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=W.capitalize(e),i="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[i]},this["set"+t]=function(s){s!=this[i]&&(this[i]=s,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var i=this._selection;this.setSelection(t?i|e:i&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,i=e.length;t<i;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,i=0,r=t.length;i<r;i++)t[i].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var i=0,r=e.length;i<r;i++)if(!e[i].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var i=0,r=t.length;i<r;i++)t[i].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?J:Rt,i=this._position||(this._position=this._getPositionFromBounds());return new t(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(J.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new Rt(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=J.read(arguments,0,{clone:!0,readNull:!0}),this._position=w}},W.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(i){return this.getBounds(i,e)}},{beans:!0,getBounds:function(e,t){var i=t||e instanceof Ze,r=W.set({},i?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(i&&e,r).rect;return arguments.length?s:new Ri(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var e=xe.read(arguments),t=this.getBounds(),i=this._matrix,r=new Ze,s=e.getCenter();r.translate(s),(e.width!=t.width||e.height!=t.height)&&(i.isInvertible()||(i.set(i._backup||(new Ze).translate(i.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),s=t.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(e,t){var i=this._children;return i&&i.length?(ke._updateBoundsCache(this,t.cacheItem),ke._getBounds(i,e,t)):new xe},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,i){e=e&&e._orNullIfIdentity();var r=t.internal&&!i,s=t.cacheItem,o=r?null:this._matrix._orNullIfIdentity(),c=s&&(!e||e.equals(o))&&this._getBoundsCacheKey(t,r),l=this._bounds;if(ke._updateBoundsCache(this._parent||this._symbol,s),c&&l&&c in l)return{rect:(f=l[c]).rect.clone(),nonscaling:f.nonscaling};var d=this._getBounds(e||o,t),b=d.rect||d,_=this._style,v=d.nonscaling||_.hasStroke()&&!_.getStrokeScaling();if(c){l||(this._bounds=l={});var f=l[c]={rect:b.clone(),nonscaling:v,internal:r}}return{rect:b,nonscaling:v}},_getStrokeMatrix:function(e,t){var i=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=i?i.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var i=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[i]||(r.list.push(t),r.ids[i]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=w;for(var i=0,r=t.list,s=r.length;i<s;i++){var o=r[i];o!==e&&(o._bounds=o._position=w,o._boundsCache&&ke._clearBoundsCache(o))}}},_getBounds:function(e,t,i){var r=1/0,s=-r,o=r,c=s,l=!1;i=i||{};for(var f=0,d=e.length;f<d;f++){var b=e[f];if(b._visible&&!b.isEmpty(!0)){var _=b._getCachedBounds(t&&t.appended(b._matrix),i,!0),v=_.rect;r=Math.min(v.x,r),o=Math.min(v.y,o),s=Math.max(v.x+v.width,s),c=Math.max(v.y+v.height,c),_.nonscaling&&(l=!0)}}return{rect:isFinite(r)?new xe(r,o,s-r,c-o):new xe,nonscaling:l}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var i=this._decomposed;this.rotate(e-t),i&&(i.rotation=e,this._decomposed=i)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new Rt(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=J.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var i=this.getRotation(),r=this._decomposed,s=new Ze,o=Me.isZero;if(o(e.x)||o(e.y))s.translate(r.translation),i&&s.rotate(i),s.scale(t.x,t.y),this._matrix.set(s);else{var c=this.getPosition(!0);s.translate(c),i&&s.rotate(i),s.scale(t.x/e.x,t.y/e.y),i&&s.rotate(-i),s.translate(c.negate()),this.transform(s)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var i=this._parent,r=[];i;){if(!i._globalMatrix){t=null;for(var s=0,o=r.length;s<o;s++)r[s]._globalMatrix=null;break}r.push(i),i=i._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(i=this._parent)&&t.prepend(i.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof ai)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return W.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(ke.NO_INSERT),i=this._children,r=W.pick(e?e.insert:w,e===w||!0===e),s=W.pick(e?e.deep:w,!0);i&&t.copyAttributes(this),(!i||s)&&t.copyContent(this),i||t.copyAttributes(this),r&&t.insertAbove(this);var o=this._name,c=this._parent;if(o&&c){i=c._children;for(var l=o,f=1;i[o];)o=l+" "+f++;o!==l&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,i=0,r=t&&t.length;i<r;i++)this.addChild(t[i].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=i.length;r<s;r++){var o=i[r];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var c=e._data,l=e._name;this._data=c?W.clone(c):null,l&&this.setName(l)},rasterize:function(e,t){var i,r,s;W.isPlainObject(e)?(i=e.resolution,r=e.insert,s=e.raster):(i=e,r=t),s||(s=new Nt(ke.NO_INSERT));var o=this.getStrokeBounds(),c=(i||this.getView().getResolution())/72,l=o.getTopLeft().floor(),f=o.getBottomRight().ceil(),d=new fe(f.subtract(l)),b=d.multiply(c);if(s.setSize(b,!0),!b.isZero()){var _=s.getContext(!0),v=(new Ze).scale(c).translate(l.negate());_.save(),v.applyToContext(_),this.draw(_,new W({matrices:[v]})),_.restore()}return s._matrix.set((new Ze).translate(l.add(d.divide(2))).scale(1/c)),(r===w||r)&&s.insertAbove(this),s},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(J.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var i=t.length-1;i>=0;i--)if(t[i].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return xe.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ue.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof ke&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var r=arguments;return this._hitTest(J.read(r),gt.getOptions(r))}function t(){var r=arguments,s=J.read(r),o=gt.getOptions(r),c=[];return this._hitTest(s,new W({all:c},o)),c}function i(r,s,o,c){var l=this._children;if(l)for(var f=l.length-1;f>=0;f--){var d=l[f],b=d!==c&&d._hitTest(r,s,o);if(b&&!s.all)return b}return null}return Wt.inject({hitTest:e,hitTestAll:t,_hitTest:i}),{hitTest:e,hitTestAll:t,_hitTestChildren:i}},{_hitTest:function(e,t,i){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,s=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(t.tolerance,1e-12),c=t._tolerancePadding=new fe(Ue._getStrokePadding(o,r._shiftless().invert()));if(!(e=r._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(c.multiply(2))._containsPoint(e))return null;var b,_,l=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==W.hyphenate(this._class)||t.class&&!(this instanceof t.class)),f=t.match,d=this;function v(g){return g&&f&&!f(g)&&(g=null),g&&t.all&&t.all.push(g),g}function m(g,I){var P=I?b["get"+I]():d.getPosition();if(e.subtract(P).divide(c).length<=1)return new gt(g,d,{name:I?W.hyphenate(I):g,point:P})}var D=t.position,C=t.center,R=t.bounds;if(l&&this._parent&&(D||C||R)){if((C||R)&&(b=this.getInternalBounds()),!(_=D&&m("position")||C&&m("center","Center"))&&R)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],E=0;E<8&&!_;E++)_=m("bounds",y[E]);_=v(_)}return _||(_=this._hitTestChildren(e,t,s)||l&&v(this._hitTestSelf(e,t,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),_&&_.point&&(_.point=r.transform(_.point)),_},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new gt("fill",this)},matches:function(e,t){var r=typeof e;if("object"===r){for(var s in e)if(e.hasOwnProperty(s)&&!this.matches(s,e[s]))return!1;return!0}if("function"===r)return e(this);if("match"===e)return t(this);var o=/^(empty|editable)$/.test(e)?this["is"+W.capitalize(e)]():"type"===e?W.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;o=this._class}if("function"==typeof t)return!!t(o);if(t){if(t.test)return t.test(o);if(W.isPlainObject(t))return function i(c,l){for(var f in c)if(c.hasOwnProperty(f)){var d=c[f],b=l[f];if(W.isPlainObject(d)&&W.isPlainObject(b)){if(!i(d,b))return!1}else if(!W.equals(d,b))return!1}return!0}(t,o)}return W.equals(o,t)},getItems:function(e){return ke._getItems(this,e,this._matrix)},getItem:function(e){return ke._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,i,r,s,o){if(!s){var c="object"==typeof i&&i,l=c&&c.overlapping,f=c&&c.inside,v=(d=l||f)&&xe.read([d]);s={items:[],recursive:c&&!1!==c.recursive,inside:!!f,overlapping:!!l,rect:v,path:l&&new Ue.Rectangle({rectangle:v,insert:!1})},c&&(i=W.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var b=t._children,_=s.items;r=(v=s.rect)&&(r||new Ze);for(var m=0,D=b&&b.length;m<D;m++){var C=b[m],R=r&&r.appended(C._matrix),y=!0;if(v){var d=C.getBounds(R);if(!v.intersects(d))continue;v.contains(d)||s.overlapping&&(d.contains(v)||s.path.intersects(C,R))||(y=!1)}if(y&&C.matches(i)&&(_.push(C),o)||(!1!==s.recursive&&e(C,i,R,s,o),o&&_.length>0))break}return _}}},{importJSON:function(e){var t=W.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(w,e)},insertChild:function(e,t){var i=t?this.insertChildren(e,[t]):null;return i&&i[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var i=this._children;if(i&&t&&t.length>0){for(var r={},s=(t=W.slice(t)).length-1;s>=0;s--){var c=(o=t[s])&&o._id;!o||r[c]?t.splice(s,1):(o._remove(!1,!0),r[c]=!0)}W.splice(i,t,e,0);for(var l=this._project,f=l._changes,d=(s=0,t.length);s<d;s++){var o,b=(o=t[s])._name;o._parent=this,o._setProject(l,!0),b&&o.setName(b),f&&o._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var i=e&&e._getOwner(),r=e!==this&&i?this:null;return r&&(r._remove(!1,!0),i._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(w,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(w,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var i=t[0].reduce(e);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,i=e._namedChildren,r=this._name,s=i[r],o=s?s.indexOf(this):-1;-1!==o&&(t[r]==this&&delete t[r],s.splice(o,1),s.length?t[r]=s[0]:delete i[r])}},_remove:function(e,t){var i=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),!!i&&(this._name&&this._removeNamed(),null!=s&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),W.splice(i._children,null,s,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=W.pick(t,this._children.length);for(var i=W.splice(this._children,null,e,t-e),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,i=t?t.length:0;if(e){for(var r=0;r<i;r++)if(!t[r].isEmpty(e))return!1;return!0}return!i},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(c){var l=[];do{l.unshift(c)}while(c=c._parent);return l}for(var i=t(this),r=t(e),s=0,o=Math.min(i.length,r.length);s<o;s++)if(i[s]!=r[s])return i[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},W.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var i=arguments,r=(t?W:J).read(i),s=J.read(i,0,{readNull:!0});return this.transform((new Ze)[e](r,s||this.getPosition(!0)))}},{translate:function(){var e=new Ze;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,i){var r=this._matrix,s=e&&!e.isIdentity(),o=i&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||t&&this._children);if(!s&&!o)return this;if(s){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var c=this._style,l=c.getFillColor(!0),f=c.getStrokeColor(!0);l&&l.transform(e),f&&f.transform(e)}if(o&&(o=this._transformContent(r,t,i))){var d=this._pivot;d&&r._transformPoint(d,d,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var b=this._bounds,_=this._position;(s||o)&&this._changed(25);var v=s&&b&&e.decompose();if(v&&v.skewing.isZero()&&v.rotation%90==0){for(var m in b){var D=b[m];if(D.nonscaling)delete b[m];else if(o||!D.internal){var C=D.rect;e._transformBounds(C,C)}}this._bounds=b;var R=b[this._getBoundsCacheKey(this._boundsOptions||{})];R&&(this._position=this._getPositionFromBounds(R.rect))}else s&&_&&this._pivot&&(this._position=e._transformPoint(_,_));return this},_transformContent:function(e,t,i){var r=this._children;if(r){for(var s=0,o=r.length;s<o;s++)r[s].transform(e,t,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(J.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(J.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(J.read(arguments))},localToParent:function(){return this._matrix._transformPoint(J.read(arguments))},fitBounds:function(e,t){e=xe.read(arguments);var i=this.getBounds(),r=i.height/i.width,s=e.height/e.width,o=(t?r>s:r<s)?e.width/i.width:e.height/i.height,c=new xe(new J,new fe(i.width*o,i.height*o));c.setCenter(e.getCenter()),this.setBounds(c)}}),{_setStyles:function(e,t,i){var r=this._style,s=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,s)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,s),e.lineWidth=r.getStrokeWidth();var o=r.getStrokeJoin(),c=r.getStrokeCap(),l=r.getMiterLimit();if(o&&(e.lineJoin=o),c&&(e.lineCap=c),l&&(e.miterLimit=l),Ve.support.nativeDash){var f=r.getDashArray(),d=r.getDashOffset();f&&f.length&&("setLineDash"in e?(e.setLineDash(f),e.lineDashOffset=d):(e.mozDash=f,e.mozDashOffset=d))}}if(r.hasShadow()){var b=t.pixelRatio||1,_=i._shiftless().prepend((new Ze).scale(b,b)),v=_.transform(new J(r.getShadowBlur(),0)),m=_.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=v.getLength(),e.shadowOffsetX=m.x,e.shadowOffsetY=m.y}},draw:function(e,t,i){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var s=t.matrices,o=t.viewMatrix,c=this._matrix,l=s[s.length-1].appended(c);if(l.isInvertible()){o=o?o.appended(l):l,s.push(l),t.updateMatrix&&(this._globalMatrix=l);var D,C,R,f=this._blendMode,d=Me.clamp(this._opacity,0,1),b="normal"===f,_=Mi.nativeModes[f],v=b&&1===d||t.dontStart||t.clip||(_||b&&d<1)&&this._canComposite(),m=t.pixelRatio||1;if(!v){var y=this.getStrokeBounds(o);if(!y.width||!y.height)return void s.pop();R=t.offset,C=t.offset=y.getTopLeft().floor(),D=e,e=He.getContext(y.getSize().ceil().add(1).multiply(m)),1!==m&&e.scale(m,m)}e.save();var E=i?i.appended(c):this._canScaleStroke&&!this.getStrokeScaling(!0)&&o,g=!v&&t.clipItem,I=!E||g;if(v?(e.globalAlpha=d,_&&(e.globalCompositeOperation=f)):I&&e.translate(-C.x,-C.y),I&&(v?c:o).applyToContext(e),g&&t.clipItem.draw(e,t.extend({clip:!0})),E){e.setTransform(m,0,0,m,0,0);var P=t.offset;P&&e.translate(-P.x,-P.y)}this._draw(e,t,o,E),e.restore(),s.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),v||(Mi.process(f,e,D,d,C.subtract(R).multiply(m)),He.release(e),t.offset=R)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof Ct)return t._isUpdated(e);var i=this._updateVersion===e;return!i&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,i=!0),i},_drawSelection:function(e,t,i,r,s){var o=this._selection,c=1&o,l=2&o||c&&this._selectBounds,f=4&o;if(this._drawSelected||(c=!1),(c||l||f)&&this._isUpdated(s)){var d,b=this.getSelectedColor(!0)||(d=this.getLayer())&&d.getSelectedColor(!0),_=t.appended(this.getGlobalMatrix(!0)),v=i/2;if(e.strokeStyle=e.fillStyle=b?b.toCanvasStyle(e):"#009dec",c&&this._drawSelected(e,_,r),f){var m=this.getPosition(!0),D=this._parent,C=D?D.localToGlobal(m):m,R=C.x,y=C.y;e.beginPath(),e.arc(R,y,v,0,2*Math.PI,!0),e.stroke();for(var E=[[0,-1],[1,0],[0,1],[-1,0]],g=v,I=i+1,P=0;P<4;P++){var L=E[P],T=L[0],N=L[1];e.moveTo(R+T*g,y+N*g),e.lineTo(R+T*I,y+N*I),e.stroke()}}if(l){var V=_._transformCorners(this.getInternalBounds());for(e.beginPath(),P=0;P<8;P++)e[P?"lineTo":"moveTo"](V[P],V[++P]);for(e.closePath(),e.stroke(),P=0;P<8;P++)e.fillRect(V[P]-v,V[++P]-v,i,i)}}},_canComposite:function(){return!1}},W.each(["down","drag","up","move"],function(e){this["removeOn"+W.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var i="mouse"+t,r=this._project,s=r._removeSets=r._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}}),{tween:function(e,t,i){i||(i=t,t=e,e=null,i||(i=t,t=null));var o=null!=i&&("number"==typeof i?i:i.duration),c=new it(this,e,t,o,i&&i.easing,i&&i.start);return o&&this.on("frame",function l(f){c._handleFrame(1e3*f.time),c.running||this.off("frame",l)}),c},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),Ft=ke.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=w)},_getClipItem:function(){var e=this._clipItem;if(e===w){e=null;for(var t=this._children,i=0,r=t.length;i<r;i++)if(t[i]._clipMask){e=t[i];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,i){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),W.set({},i,{stroke:!1})):e.base.call(this,t,i)},_hitTestChildren:function e(t,i,r){var s=this._getClipItem();return(!s||s.contains(t))&&e.base.call(this,t,i,r,s)},_draw:function(e,t){var i=t.clip,r=!i&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),i?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var s=this._children,o=0,c=s.length;o<c;o++){var l=s[o];l!==r&&l.draw(e,t)}}}),ai=Ft.extend({_class:"Layer",initialize:function(){Ft.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),St=ke.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,i){this._initialize(t,i)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&W.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new O(e.width,e.height,this,"setSize")},setSize:function(){var e=fe.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,i=e.width,r=e.height;"rectangle"===t?this._radius.set(fe.min(this._radius,e.divide(2).abs())):"circle"===t?(i=r=(i+r)/2,this._radius=i/2):"ellipse"===t&&this._radius._set(i/2,r/2),this._size._set(i,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new O(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var i=2*e;this._radius=e,this._size._set(i,i)}else if(e=fe.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(i=fe.max(this._size,e.multiply(2)),this._size.set(i)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(Ue[W.capitalize(this._type)])({center:new J,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Ve.settings.applyMatrix&&t.setApplyMatrix(!0),(e===w||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,i,r){var s=this._style,o=s.hasFill(),c=s.hasStroke(),l=t.dontFinish||t.clip,f=!r;if(o||c||l){var d=this._type,b=this._radius,_="circle"===d;if(t.dontStart||e.beginPath(),f&&_)e.arc(0,0,b,0,2*Math.PI,!0);else{var v=_?b:b.width,m=_?b:b.height,D=this._size,C=D.width,R=D.height;if(f&&"rectangle"===d&&0===v&&0===m)e.rect(-C/2,-R/2,C,R);else{var y=C/2,E=R/2,g=.44771525016920644,I=v*g,P=m*g,L=[-y,-E+m,-y,-E+P,-y+I,-E,-y+v,-E,y-v,-E,y-I,-E,y,-E+P,y,-E+m,y,E-m,y,E-P,y-I,E,y-v,E,-y+v,E,-y+I,E,-y,E-P,-y,E-m];r&&r.transform(L,L,32),e.moveTo(L[0],L[1]),e.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7]),y!==v&&e.lineTo(L[8],L[9]),e.bezierCurveTo(L[10],L[11],L[12],L[13],L[14],L[15]),E!==m&&e.lineTo(L[16],L[17]),e.bezierCurveTo(L[18],L[19],L[20],L[21],L[22],L[23]),y!==v&&e.lineTo(L[24],L[25]),e.bezierCurveTo(L[26],L[27],L[28],L[29],L[30],L[31])}}e.closePath()}!l&&(o||c)&&(this._setStyles(e,t,i),o&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),c&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var i=new xe(this._size).setCenter(0,0),r=this._style,s=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(i=e._transformBounds(i)),s?i.expand(Ue._getStrokePadding(s,this._getStrokeMatrix(e,t))):i}},new function(){function e(i,r,s){var o=i._radius;if(!o.isZero())for(var c=i._size.divide(2),l=1;l<=4;l++){var f=new J(l>1&&l<4?-1:1,l>2?-1:1),d=f.multiply(c),b=d.subtract(f.multiply(o));if(new xe(s?d.add(f.multiply(s)):d,b).contains(r))return{point:b,quadrant:l}}}function t(i,r,s,o){var c=i.divide(r);return(!o||c.isInQuadrant(o))&&c.subtract(c.normalize()).multiply(r).divide(s).length<=1}return{_contains:function i(r){if("rectangle"===this._type){var s=e(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:i.base.call(this,r)}return r.divide(this.size).getLength()<=.5},_hitTestSelf:function i(r,s,o,c){var l=!1,f=this._style,d=s.stroke&&f.hasStroke(),b=s.fill&&f.hasFill();if(d||b){var _=this._type,v=this._radius,m=d?f.getStrokeWidth()/2:0,D=s._tolerancePadding.add(Ue._getStrokePadding(m,!f.getStrokeScaling()&&c));if("rectangle"===_){var C=D.multiply(2),R=e(this,r,C);if(R)l=t(r.subtract(R.point),v,D,R.quadrant);else{var y=new xe(this._size).setCenter(0,0),E=y.expand(C),g=y.expand(C.negate());l=E._containsPoint(r)&&!g._containsPoint(r)}}else l=t(r,v,D)}return l?new gt(d?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function e(t,i,r,s,o){var c=W.create(St.prototype);return c._type=t,c._size=r,c._radius=s,c._initialize(W.getNamed(o),i),c}return{Circle:function(){var t=arguments,i=J.readNamed(t,"center"),r=W.readNamed(t,"radius");return e("circle",i,new fe(2*r),r,t)},Rectangle:function(){var t=arguments,i=xe.readNamed(t,"rectangle"),r=fe.min(fe.readNamed(t,"radius"),i.getSize(!0).divide(2));return e("rectangle",i.getCenter(!0),i.getSize(!0),r,t)},Ellipse:function(){var t=arguments,i=St._readEllipse(t),r=i.radius;return e("ellipse",i.center,r.multiply(2),r,t)},_readEllipse:function(t){var i,r;if(W.hasNamed(t,"radius"))i=J.readNamed(t,"center"),r=fe.readNamed(t,"radius");else{var s=xe.readNamed(t,"rectangle");i=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:i,radius:r}}}}}),Nt=ke.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==w&&J.read(arguments))){var r,s=typeof t,o="string"===s?We.getElementById(t):"object"===s?t:null;if(o&&o!==ke.NO_INSERT)if(o.getContext||null!=o.naturalHeight)r=o;else if(o){var c=fe.read(arguments);c.isZero()||(r=He.getCanvas(c))}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new fe,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,i=e._canvas;if(t)this._setImage(t);else if(i){var r=He.getCanvas(e._size);r.getContext("2d").drawImage(i,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new O(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var i=fe.read(arguments);if(i.equals(this._size))t&&this.clear();else if(i.width>0&&i.height>0){var r=!t&&this.getElement();this._setImage(He.getCanvas(i)),r&&this.getContext(!0).drawImage(r,0,0,i.width,i.height)}else this._canvas&&He.release(this._canvas),this._size=i.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new J(0,0).transform(e),i=new J(1,0).transform(e).subtract(t),r=new J(0,1).transform(e).subtract(t);return new fe(72/i.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function i(r){var s=t.getView(),o=r&&r.type||"load";s&&t.responds(o)&&(Ve=s._scope,t.emit(o,new Jt(r)))}this._setImage(e),this._loaded?setTimeout(i,0):e&&tt.add(e,{load:function(r){t._setImage(e),i(r)},error:i})},_setImage:function(e){this._canvas&&He.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new fe(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=He.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{He.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new Xe.Image,i=this._crossOrigin;i&&(t.crossOrigin=i),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing="string"==typeof e?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=xe.read(arguments),t=He.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=xe.read(arguments),t=new Nt(ke.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(e){var t=J.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,i;if(e?e instanceof Zt?(i=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new xe(e):"x"in e&&(t=new xe(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var s=Math.min(t.width,32),o=Math.min(t.height,32),c=Nt._sampleContext;c?c.clearRect(0,0,33,33):c=Nt._sampleContext=He.getContext(new fe(32)),c.save();var l=(new Ze).scale(s/t.width,o/t.height).translate(-t.x,-t.y);l.applyToContext(c),i&&i.draw(c,new W({clip:!0,matrices:[l]})),this._matrix.applyToContext(c);var f=this.getElement(),d=this._size;f&&c.drawImage(f,-d.width/2,-d.height/2),c.restore();for(var b=c.getImageData(.5,.5,Math.ceil(s),Math.ceil(o)).data,_=[0,0,0],v=0,m=0,D=b.length;m<D;m+=4){var C=b[m+3];v+=C,_[0]+=b[m]*(C/=255),_[1]+=b[m+1]*C,_[2]+=b[m+2]*C}for(m=0;m<3;m++)_[m]/=v;return v?st.read(_):null},getPixel:function(){var e=J.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new st("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=J.read(e),i=st.read(e),r=i._convert("rgb"),s=i._alpha,o=this.getContext(!0),c=o.createImageData(1,1),l=c.data;l[0]=255*r[0],l[1]=255*r[1],l[2]=255*r[2],l[3]=null!=s?255*s:255,o.putImageData(c,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=fe.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=xe.read(arguments);return e.isEmpty()&&(e=new xe(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=J.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var i=new xe(this._size).setCenter(0,0);return e?e._transformBounds(i):i},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new gt("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,i){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=Me.clamp(this._opacity,0,1),this._setStyles(e,t,i);var s=this._smoothing,o="off"===s;et.setPrefixed(e,o?"imageSmoothingEnabled":"imageSmoothingQuality",!o&&s),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ht=ke.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==w&&J.read(arguments,1))||this.setDefinition(t instanceof ht?t:new ht(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(e),t)},_hitTestSelf:function(e,t,i){var r=t.extend({all:!1}),s=this._definition._item._hitTest(e,r,i);return s&&(s.item=this),s},_draw:function(e,t){this._definition._item.draw(e,t)}}),ht=W.extend({_class:"SymbolDefinition",initialize:function(t,i){this._id=ot.get(),this.project=Ve.project,t&&this.setItem(t,i)},_serialize:function(e,t){return t.add(this,function(){return W.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&ke._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new J),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new Ht(this,e)},clone:function(){return new ht(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),gt=W.extend({_class:"HitResult",initialize:function(t,i,r){this.type=t,this.item=i,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&W.read(e);return new W({type:null,tolerance:Ve.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),Ee=W.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,r,s,o,c){var f,d,b,_,l=arguments.length;l>0&&(null==t||"object"==typeof t?1===l&&t&&"point"in t?(f=t.point,d=t.handleIn,b=t.handleOut,_=t.selection):(f=t,d=i,b=r,_=s):(f=[t,i],d=r!==w?[r,s]:null,b=o!==w?[o,c]:null)),new Gt(f,this,"_point"),new Gt(d,this,"_handleIn"),new Gt(b,this,"_handleOut"),_&&this.setSelection(_)},_serialize:function(e,t){var i=this._point,r=this._selection,s=r||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return r&&s.push(r),W.serialize(s,e,!0,t)},_changed:function(e){var t=this._path;if(t){var s,i=t._curves,r=this._index;i&&((!e||e===this._point||e===this._handleIn)&&(s=r>0?i[r-1]:t._closed?i[i.length-1]:null)&&s._changed(),(!e||e===this._point||e===this._handleOut)&&(s=i[r])&&s._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(J.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(J.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(J.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,i=this._path;this._selection=e=e||0,i&&e!==t&&(i._updateSelection(this,t,e),i._changed(257))},_changeSelection:function(e,t){var i=this._selection;this.setSelection(t?i|e:i&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==w?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new Lt(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,i){var r=e||{},s=r.type,o=r.factor,c=this.getPrevious(),l=this.getNext(),f=(c||this)._point,d=this._point,b=(l||this)._point,_=f.getDistance(d),v=d.getDistance(b);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(c&&l){var I=f.subtract(b),P=o===w?.4:o,L=P*_/(_+v);t||this.setHandleIn(I.multiply(L)),i||this.setHandleOut(I.multiply(L-P))}}else{var g,m=o===w?.5:o,D=Math.pow(_,m),C=D*D,R=Math.pow(v,m),y=R*R;if(!t&&c){var E=2*y+3*R*D+C;this.setHandleIn(0!=(g=3*R*(R+D))?new J((y*f._x+E*d._x-C*b._x)/g-d._x,(y*f._y+E*d._y-C*b._y)/g-d._y):new J)}if(!i&&l)E=2*C+3*D*R+y,this.setHandleOut(0!=(g=3*D*(D+R))?new J((C*b._x+E*d._x-y*f._x)/g-d._x,(C*b._y+E*d._y-y*f._y)/g-d._y):new J)}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,i=e.clone();e.set(t),t.set(i)},reversed:function(){return new Ee(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new Ee(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,i){var r=1-i,s=i,o=e._point,c=t._point,l=e._handleIn,f=t._handleIn,d=t._handleOut,b=e._handleOut;this._point._set(r*o._x+s*c._x,r*o._y+s*c._y,!0),this._handleIn._set(r*l._x+s*f._x,r*l._y+s*f._y,!0),this._handleOut._set(r*b._x+s*d._x,r*b._y+s*d._y,!0),this._changed()},_transformCoordinates:function(e,t,i){var r=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,o=i&&this._handleOut.isZero()?null:this._handleOut,c=r._x,l=r._y,f=2;return t[0]=c,t[1]=l,s&&(t[f++]=s._x+c,t[f++]=s._y+l),o&&(t[f++]=o._x+c,t[f++]=o._y+l),e&&(e._transformCoordinates(t,t,f/2),c=t[0],l=t[1],i?(r._x=c,r._y=l,f=2,s&&(s._x=t[f++]-c,s._y=t[f++]-l),o&&(o._x=t[f++]-c,o._y=t[f++]-l)):(s||(t[f++]=c,t[f++]=l),o||(t[f++]=c,t[f++]=l))),t}}),Gt=J.extend({initialize:function(t,i,r){var s,o,c;if(t)if((s=t[0])!==w)o=t[1];else{var l=t;(s=l.x)===w&&(s=(l=J.read(arguments)).x),o=l.y,c=l.selected}else s=o=0;this._x=s,this._y=o,this._owner=i,i[r]=this,c&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=Me.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),de=W.extend({_class:"Curve",beans:!0,initialize:function(t,i,r,s,o,c,l,f){var b,_,v,m,D,C,d=arguments.length;3===d?(this._path=t,b=i,_=r):d?1===d?"segment1"in t?(b=new Ee(t.segment1),_=new Ee(t.segment2)):"point1"in t?(v=t.point1,D=t.handle1,C=t.handle2,m=t.point2):Array.isArray(t)&&(v=[t[0],t[1]],m=[t[6],t[7]],D=[t[2]-t[0],t[3]-t[1]],C=[t[4]-t[6],t[5]-t[7]]):2===d?(b=new Ee(t),_=new Ee(i)):4===d?(v=t,D=i,C=r,m=s):8===d&&(v=[t,i],m=[l,f],D=[r-t,s-i],C=[o-l,c-f]):(b=new Ee,_=new Ee),this._segment1=b||new Ee(v,null,D),this._segment2=_||new Ee(m,C,null)},_serialize:function(e,t){return W.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=w},clone:function(){return new de(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return de.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,i=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(i)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(J.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(J.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(J.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(J.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return de.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],i=0;i<8;i+=2)t.push(new J(e[i],e[i+1]));return t}},{getLength:function(){return null==this._length&&(this._length=de.getLength(this.getValues(),0,1)),this._length},getArea:function(){return de.getArea(this.getValues())},getLine:function(){return new ft(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new de(de.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return de.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var s=null;if(e>=1e-8&&e<=.99999999){var o=de.subdivide(this.getValues(),e),c=o[0],l=o[1],f=t||this.hasHandles(),d=this._segment1,b=this._segment2,_=this._path;f&&(d._handleOut._set(c[2]-c[0],c[3]-c[1]),b._handleIn._set(l[4]-l[6],l[5]-l[7]));var v=c[6],m=c[7],D=new Ee(new J(v,m),f&&new J(c[4]-v,c[5]-m),f&&new J(l[2]-v,l[3]-m));_?(_.insert(d._index+1,D),s=this.getNext()):(this._segment2=D,this._changed(),s=new de(D,b))}return s},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===w?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===w?.5:t?e:this.getTimeAt(e))},reversed:function(){return new de(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,i,r){var s=e._point,o=e._handleOut,c=t._handleIn,l=t._point,f=s.x,d=s.y,b=l.x,_=l.y,v=r?[f,d,f,d,b,_,b,_]:[f,d,f+o._x,d+o._y,b+c._x,_+c._y,b,_];return i&&i._transformCoordinates(v,v,4),v},subdivide:function(e,t){var i=e[0],r=e[1],s=e[2],o=e[3],c=e[4],l=e[5],f=e[6],d=e[7];t===w&&(t=.5);var b=1-t,_=b*i+t*s,v=b*r+t*o,m=b*s+t*c,D=b*o+t*l,C=b*c+t*f,R=b*l+t*d,y=b*_+t*m,E=b*v+t*D,g=b*m+t*C,I=b*D+t*R,P=b*y+t*g,L=b*E+t*I;return[[i,r,_,v,y,E,P,L],[P,L,g,I,C,R,f,d]]},getMonoCurves:function(e,t){var i=[],r=t?0:1,s=e[r+0],o=e[r+2],c=e[r+4],l=e[r+6];if(s>=o==o>=c&&o>=c==c>=l||de.isStraight(e))i.push(e);else{var m=[],D=Me.solveQuadratic(3*(o-c)-s+l,2*(s+c)-4*o,o-s,m,1e-8,.99999999);if(D){m.sort();var C=m[0],R=de.subdivide(e,C);i.push(R[0]),D>1&&(R=de.subdivide(R[1],C=(m[1]-C)/(1-C)),i.push(R[0])),i.push(R[1])}else i.push(e)}return i},solveCubic:function(e,t,i,r,s,o){var c=e[t],l=e[t+2],f=e[t+4],d=e[t+6],b=0;if(!(c<i&&d<i&&l<i&&f<i||c>i&&d>i&&l>i&&f>i)){var _=3*(l-c),v=3*(f-l)-_;b=Me.solveCubic(d-c-_-v,v,_,c-i,r,s,o)}return b},getTimeOf:function(e,t){var i=new J(e[0],e[1]),r=new J(e[6],e[7]),o=1e-7;if(null===(t.isClose(i,1e-12)?0:t.isClose(r,1e-12)?1:null))for(var l=[t.x,t.y],f=[],d=0;d<2;d++)for(var b=de.solveCubic(e,d,l[d],f,0,1),_=0;_<b;_++){var v=f[_];if(t.isClose(de.getPoint(e,v),o))return v}return t.isClose(i,o)?0:t.isClose(r,o)?1:null},getNearestTime:function(e,t){if(de.isStraight(e)){var i=e[0],r=e[1],c=e[6]-i,l=e[7]-r,f=c*c+l*l;if(0===f)return 0;var d=((t.x-i)*c+(t.y-r)*l)/f;return d<1e-12?0:d>.999999999999?1:de.getTimeOf(e,new J(i+d*c,r+d*l))}var _=1/0,v=0;function m(R){if(R>=0&&R<=1){var y=t.getDistance(de.getPoint(e,R),!0);if(y<_)return _=y,v=R,!0}}for(var D=0;D<=100;D++)m(D/100);for(var C=.005;C>1e-8;)!m(v-C)&&!m(v+C)&&(C/=2);return v},getPart:function(e,t,i){var r=t>i;if(r){var s=t;t=i,i=s}return t>0&&(e=de.subdivide(e,t)[1]),i<1&&(e=de.subdivide(e,(i-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var i=e[0],r=e[1],f=e[6],d=e[7],b=3*e[2]-2*i-f,_=3*e[3]-2*r-d,v=3*e[4]-2*f-i,m=3*e[5]-2*d-r;return Math.max(b*b,v*v)+Math.max(_*_,m*m)<=16*t*t},getArea:function(e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],c=e[5],l=e[6],f=e[7];return 3*((f-i)*(r+o)-(l-t)*(s+c)+s*(t-o)-r*(i-c)+f*(o+t/3)-l*(c+i/3))/20},getBounds:function(e){for(var t=e.slice(0,2),i=t.slice(),r=[0,0],s=0;s<2;s++)de._addBounds(e[s],e[s+2],e[s+4],e[s+6],s,0,t,i,r);return new xe(t[0],t[1],i[0]-t[0],i[1]-t[1])},_addBounds:function(e,t,i,r,s,o,c,l,f){function d(P,L){var T=P-L,N=P+L;T<c[s]&&(c[s]=T),N>l[s]&&(l[s]=N)}var b=c[s]+(o/=2),_=l[s]-o;if(e<b||t<b||i<b||r<b||e>_||t>_||i>_||r>_)if(t<e!=t<r&&i<e!=i<r)d(e,0),d(r,0);else{var C=Me.solveQuadratic(3*(t-i)-e+r,2*(e+i)-4*t,t-e,f);d(r,0);for(var E=0;E<C;E++){var g=f[E],I=1-g;1e-8<=g&&g<=.99999999&&d(I*I*I*e+3*I*I*g*t+3*I*g*g*i+g*g*g*r,o)}}}}},W.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Ue[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),W.each({isStraight:function(e,t,i,r){if(t.isZero()&&i.isZero())return!0;var s=r.subtract(e);if(s.isZero())return!1;if(s.isCollinear(t)&&s.isCollinear(i)){var o=new ft(e,r);if(o.getDistance(e.add(t))<1e-7&&o.getDistance(r.add(i))<1e-7){var l=s.dot(s),f=s.dot(t)/l,d=s.dot(i)/l;return f>=0&&f<=1&&d<=0&&d>=-1}}return!1},isLinear:function(e,t,i,r){var s=r.subtract(e).divide(3);return t.equals(s)&&i.negate().equals(s)}},function(e,t){this[t]=function(i){var r=this._segment1,s=this._segment2;return e(r._point,r._handleOut,s._handleIn,s._point,i)},this.statics[t]=function(i,r){var s=i[0],o=i[1],c=i[6],l=i[7];return e(new J(s,o),new J(i[2]-s,i[3]-o),new J(i[4]-c,i[5]-l),new J(c,l),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new Lt(this,e):null},getTimeAt:function(e,t){return de.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=J.read(arguments);return e.isZero()?[]:de.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(J.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return de.getTimeOf(this.getValues(),J.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=J.read(arguments),t=this.getValues(),i=de.getNearestTime(t,e),r=de.getPoint(t,i);return new Lt(this,i,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return W.each(e,function(t){this[t+"At"]=function(i,r){var s=this.getValues();return de[t](s,r?i:de.getTimeAt(s,i))},this[t+"AtTime"]=function(i){return de[t](this.getValues(),i)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var s=r[0],o=r[1],c=r[2],l=r[3],f=r[4],d=r[5],v=9*(c-f)+3*(r[6]-s),m=6*(s+f)-12*c,D=3*(c-s),C=9*(l-d)+3*(r[7]-o),R=6*(o+d)-12*l,y=3*(l-o);return function(E){var g=(v*E+m)*E+D,I=(C*E+R)*E+y;return Math.sqrt(g*g+I*I)}}function t(r,s){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(s-r))))}function i(r,s,o,c){if(null==s||s<0||s>1)return null;var l=r[0],f=r[1],d=r[2],b=r[3],_=r[4],v=r[5],m=r[6],D=r[7],C=Me.isZero;C(d-l)&&C(b-f)&&(d=l,b=f),C(_-m)&&C(v-D)&&(_=m,v=D);var L,T,R=3*(d-l),y=3*(_-d)-R,E=m-l-R-y,g=3*(b-f),I=3*(v-b)-g,P=D-f-g-I;if(0===o)L=0===s?l:1===s?m:((E*s+y)*s+R)*s+l,T=0===s?f:1===s?D:((P*s+I)*s+g)*s+f;else{var N=1e-8,V=1-N;if(s<N?(L=R,T=g):s>V?(L=3*(m-_),T=3*(D-v)):(L=(3*E*s+2*y)*s+R,T=(3*P*s+2*I)*s+g),c){0===L&&0===T&&(s<N||s>V)&&(L=_-d,T=v-b);var z=Math.sqrt(L*L+T*T);z&&(L/=z,T/=z)}if(3===o){_=6*E*s+2*y,v=6*P*s+2*I;var q=Math.pow(L*L+T*T,1.5);L=0!==q?(L*v-T*_)/q:0,T=0}}return 2===o?new J(T,-L):new J(L,T)}return{statics:{classify:function(r){var s=r[0],o=r[1],c=r[2],l=r[3],f=r[4],d=r[5],b=r[6],_=r[7],m=c*(o-_)+l*(b-s)+s*_-o*b,C=3*(f*(l-o)+d*(s-c)+c*o-l*s),R=C-m,y=R-m+(s*(_-d)+o*(f-b)+b*d-_*f),E=Math.sqrt(y*y+R*R+C*C),g=0!==E?1/E:0,I=Me.isZero,P="serpentine";function L(z,q,H){var G=q!==w,j=G&&q>0&&q<1,K=G&&H>0&&H<1;return G&&(!(j||K)||"loop"===z&&!(j&&K))&&(z="arch",j=K=!1),{type:z,roots:j||K?j&&K?q<H?[q,H]:[H,q]:[j?q:H]:null}}if(R*=g,C*=g,I(y*=g))return I(R)?L(I(C)?"line":"quadratic"):L(P,C/(3*R));var T=3*R*R-4*y*C;if(I(T))return L("cusp",R/(2*y));var N=T>0?Math.sqrt(T/3):Math.sqrt(-T),V=2*y;return L(T>0?P:"loop",(R+N)/V,(R-N)/V)},getLength:function(r,s,o,c){if(s===w&&(s=0),o===w&&(o=1),de.isStraight(r)){var l=r;o<1&&(l=de.subdivide(l,o)[0],s/=o),s>0&&(l=de.subdivide(l,s)[1]);var f=l[6]-l[0],d=l[7]-l[1];return Math.sqrt(f*f+d*d)}return Me.integrate(c||e(r),s,o,t(s,o))},getTimeAt:function(r,s,o){if(o===w&&(o=s<0?1:0),0===s)return o;var c=Math.abs,f=s>0,d=f?o:0,b=f?1:o,_=e(r),v=de.getLength(r,d,b,_),m=c(s)-v;if(c(m)<1e-12)return f?b:d;if(m>1e-12)return null;var C=0;return Me.findRoot(function R(y){return C+=Me.integrate(_,o,y,t(o,y)),o=y,C-s},_,o+s/v,d,b,32,1e-12)},getPoint:function(r,s){return i(r,s,0,!1)},getTangent:function(r,s){return i(r,s,1,!0)},getWeightedTangent:function(r,s){return i(r,s,1,!1)},getNormal:function(r,s){return i(r,s,2,!0)},getWeightedNormal:function(r,s){return i(r,s,2,!1)},getCurvature:function(r,s){return i(r,s,3,!1).x},getPeaks:function(r){var s=r[0],o=r[1],c=r[2],l=r[3],f=r[4],d=r[5],v=3*c-s-3*f+r[6],m=3*s-6*c+3*f,D=-3*s+3*c,C=3*l-o-3*d+r[7],R=3*o-6*l+3*d,y=-3*o+3*l,I=[];return Me.solveCubic(9*(v*v+C*C),9*(v*m+R*C),2*(m*m+R*R)+3*(D*v+y*C),D*m+R*y,I,1e-8,.99999999),I.sort()}}}},new function(){function e(m,D,C,R,y,E,g){var I=!g&&C.getPrevious()===y,P=!g&&C!==y&&C.getNext()===y,L=1e-8,T=1-L;if(null!==R&&R>=(I?L:0)&&R<=(P?T:1)&&null!==E&&E>=(P?L:0)&&E<=(I?T:1)){var N=new Lt(C,R,null,g),V=new Lt(y,E,null,g);N._intersection=V,V._intersection=N,(!D||D(N))&&Lt.insert(m,N,!0)}}function t(m,D,C,R,y,E,g,I,P,L,T,N,V){if(++P>=4096||++I>=40)return P;var Se,Re,q=D[0],H=D[1],G=D[6],j=D[7],K=ft.getSignedDistance,X=K(q,H,G,j,D[2],D[3]),ee=K(q,H,G,j,D[4],D[5]),se=X*ee>0?3/4:4/9,le=se*Math.min(0,X,ee),pe=se*Math.max(0,X,ee),ge=K(q,H,G,j,m[0],m[1]),Q=K(q,H,G,j,m[2],m[3]),ae=K(q,H,G,j,m[4],m[5]),he=K(q,H,G,j,m[6],m[7]),be=function i(m,D,C,R){var T,y=[0,m],E=[1/3,D],g=[2/3,C],I=[1,R],P=D-(2*m+R)/3,L=C-(m+2*R)/3;if(P*L<0)T=[[y,E,I],[y,g,I]];else{var N=P/L;T=[N>=2?[y,E,I]:N<=.5?[y,g,I]:[y,E,g,I],[y,I]]}return(P||L)<0?T.reverse():T}(ge,Q,ae,he),_e=be[0],Ie=be[1];if(0===X&&0===ee&&0===ge&&0===Q&&0===ae&&0===he||null==(Se=r(_e,Ie,le,pe))||null==(Re=r(_e.reverse(),Ie.reverse(),le,pe)))return P;var Fe=L+(T-L)*Se,De=L+(T-L)*Re;if(Math.max(V-N,De-Fe)<1e-9){var nt=(Fe+De)/2,ut=(N+V)/2;e(y,E,g?R:C,g?ut:nt,g?C:R,g?nt:ut)}else{m=de.getPart(m,Se,Re);var dt=V-N;if(Re-Se>.8)if(De-Fe>dt)P=t(D,(rt=de.subdivide(m,.5))[0],R,C,y,E,!g,I,P,N,V,Fe,nt=(Fe+De)/2),P=t(D,rt[1],R,C,y,E,!g,I,P,N,V,nt,De);else{var rt;P=t((rt=de.subdivide(D,.5))[0],m,R,C,y,E,!g,I,P,N,ut=(N+V)/2,Fe,De),P=t(rt[1],m,R,C,y,E,!g,I,P,ut,V,Fe,De)}else P=0===dt||dt>=1e-9?t(D,m,R,C,y,E,!g,I,P,N,V,Fe,De):t(m,D,C,R,y,E,g,I,P,Fe,De,N,V)}return P}function r(m,D,C,R){return m[0][1]<C?s(m,!0,C):D[0][1]>R?s(D,!1,R):m[0][0]}function s(m,D,C){for(var R=m[0][0],y=m[0][1],E=1,g=m.length;E<g;E++){var I=m[E][0],P=m[E][1];if(D?P>=C:P<=C)return P===C?I:R+(C-y)*(I-R)/(P-y);R=I,y=P}return null}function o(m,D,C,R,y){var E=Me.isZero;if(E(R)&&E(y)){var g=de.getTimeOf(m,new J(D,C));return null===g?[]:[g]}for(var I=Math.atan2(-y,R),P=Math.sin(I),L=Math.cos(I),T=[],N=[],V=0;V<8;V+=2){var z=m[V]-D,q=m[V+1]-C;T.push(z*L-q*P,z*P+q*L)}return de.solveCubic(T,1,0,N,0,1),N}function c(m,D,C,R,y,E,g){for(var I=D[0],P=D[1],N=o(m,I,P,D[6]-I,D[7]-P),V=0,z=N.length;V<z;V++){var q=N[V],H=de.getPoint(m,q),G=de.getTimeOf(D,H);null!==G&&e(y,E,g?R:C,g?G:q,g?C:R,g?q:G)}}function l(m,D,C,R,y,E){var g=ft.intersect(m[0],m[1],m[6],m[7],D[0],D[1],D[6],D[7]);g&&e(y,E,C,de.getTimeOf(m,g),R,de.getTimeOf(D,g))}function f(m,D,C,R,y,E){var g=1e-12,I=Math.min,P=Math.max;if(P(m[0],m[2],m[4],m[6])+g>I(D[0],D[2],D[4],D[6])&&I(m[0],m[2],m[4],m[6])-g<P(D[0],D[2],D[4],D[6])&&P(m[1],m[3],m[5],m[7])+g>I(D[1],D[3],D[5],D[7])&&I(m[1],m[3],m[5],m[7])-g<P(D[1],D[3],D[5],D[7])){var L=_(m,D);if(L)for(var T=0;T<2;T++){var N=L[T];e(y,E,C,N[0],R,N[1],!0)}else{var V=de.isStraight(m),z=de.isStraight(D),q=V&&z,H=V&&!z,G=y.length;if((q?l:V||z?c:t)(H?D:m,H?m:D,H?R:C,H?C:R,y,E,H,0,0,0,1,0,1),!q||y.length===G)for(T=0;T<4;T++){var j=T>>1,K=1&T,X=6*j,ee=6*K,se=new J(m[X],m[X+1]),le=new J(D[ee],D[ee+1]);se.isClose(le,g)&&e(y,E,C,j,R,K)}}}return y}function d(m,D,C,R){var y=de.classify(m);if("loop"===y.type){var E=y.roots;e(C,R,D,E[0],D,E[1])}return C}function _(m,D){function C(he){var be=he[6]-he[0],_e=he[7]-he[1];return be*be+_e*_e}var R=Math.abs,y=ft.getDistance,g=1e-7,I=de.isStraight(m),P=de.isStraight(D),L=I&&P,T=C(m)<C(D),N=T?D:m,V=T?m:D,z=N[0],q=N[1],H=N[6]-z,G=N[7]-q;if(y(z,q,H,G,V[0],V[1],!0)<g&&y(z,q,H,G,V[6],V[7],!0)<g)!L&&y(z,q,H,G,N[2],N[3],!0)<g&&y(z,q,H,G,N[4],N[5],!0)<g&&y(z,q,H,G,V[2],V[3],!0)<g&&y(z,q,H,G,V[4],V[5],!0)<g&&(I=P=L=!0);else if(L)return null;if(I^P)return null;for(var j=[m,D],K=[],X=0;X<4&&K.length<2;X++){var ee=1&X,se=1^ee,le=X>>1,pe=de.getTimeOf(j[ee],new J(j[se][le?6:0],j[se][le?7:1]));if(null!=pe){var ge=ee?[le,pe]:[pe,le];(!K.length||R(ge[0]-K[0][0])>1e-8&&R(ge[1]-K[0][1])>1e-8)&&K.push(ge)}if(X>2&&!K.length)break}if(2!==K.length)K=null;else if(!L){var Q=de.getPart(m,K[0][0],K[1][0]),ae=de.getPart(D,K[0][1],K[1][1]);(R(ae[2]-Q[2])>g||R(ae[3]-Q[3])>g||R(ae[4]-Q[4])>g||R(ae[5]-Q[5])>g)&&(K=null)}return K}return{getIntersections:function(m){var D=this.getValues(),C=m&&m!==this&&m.getValues();return C?f(D,C,this,m,[]):d(D,this,[])},statics:{getOverlaps:_,getIntersections:function b(m,D,C,R,y,E){var I=!D;I&&(D=m);for(var P=m.length,L=D.length,T=new Array(P),N=I?T:new Array(L),V=[],z=0;z<P;z++)T[z]=m[z].getValues(R);if(!I)for(z=0;z<L;z++)N[z]=D[z].getValues(y);for(var q=Ut.findCurveBoundsCollisions(T,N,1e-7),H=0;H<P;H++){var G=m[H],j=T[H];I&&d(j,G,V,C);var K=q[H];if(K)for(var X=0;X<K.length;X++){if(E&&V.length)return V;var ee=K[X];(!I||ee>H)&&f(j,N[ee],G,D[ee],V,C)}}return V},getCurveLineIntersections:o,getTimesWithTangent:function v(m,D){var C=m[0],R=m[1],y=m[2],E=m[3],g=m[4],I=m[5],P=m[6],L=m[7],T=D.normalize(),N=T.x,V=T.y,z=3*P-9*g+9*y-3*C,q=3*L-9*I+9*E-3*R,H=6*g-12*y+6*C,G=6*I-12*E+6*R,j=3*y-3*C,K=3*E-3*R,X=2*z*V-2*q*N,ee=[];if(Math.abs(X)<Me.CURVETIME_EPSILON){if(0!=(X=z*G-q*H)){var le=-(z*K-q*j)/X;le>=0&&le<=1&&ee.push(le)}}else{var pe=(H*H-4*z*j)*V*V+(-2*H*G+4*q*j+4*z*K)*N*V+(G*G-4*q*K)*N*N,ge=H*V-G*N;if(pe>=0&&0!=X){var Q=Math.sqrt(pe),ae=-(ge+Q)/X,he=(-ge+Q)/X;ae>=0&&ae<=1&&ee.push(ae),he>=0&&he<=1&&ee.push(he)}}return ee}}}}),Lt=W.extend({_class:"CurveLocation",initialize:function(t,i,r,s,o){if(i>=.99999999){var c=t.getNext();c&&(i=0,t=c)}this._setCurve(t),this._time=i,this._point=r||t.getPointAtTime(i),this._overlap=s,this._distance=o,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),i=this.getTime();0===i?e=t._segment1:1===i?e=t._segment2:null!=i&&(e=t.getPartLength(0,i)<t.getPartLength(i,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function i(r){var s=r&&r.getCurve();if(s&&null!=(t._time=s.getTimeOf(t._point)))return t._setCurve(s),s}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),i=this.getIndex();if(t&&null!=i)for(var r=t.getCurves(),s=0;s<i;s++)e+=r[s].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),i=this.getTime();this._curveOffset=e=null!=i&&t&&t.getPartLength(0,i)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,i=e&&e.splitAtTime(this.getTime());return i&&this._setSegment(t.getLastSegment()),i},equals:function(e,t){var i=this===e;if(!i&&e instanceof Lt){var r=this.getCurve(),s=e.getCurve(),o=r._path;if(o===s._path){var l=Math.abs,d=l(this.getOffset()-e.getOffset()),b=!t&&this._intersection,_=!t&&e._intersection;i=(d<1e-7||o&&l(o.getLength()-d)<1e-7)&&(!b&&!_||b&&_&&b.equals(_,!0))}}return i},toString:function(){var e=[],t=this.getPoint(),i=ye.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var s=this.getTime();return null!=s&&e.push("time: "+i.number(s)),null!=this._distance&&e.push("distance: "+i.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),i=e.getCurve();return!(t.isStraight()&&i.isStraight()&&t.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),i=e.getTime(),r=1e-8,s=1-r,o=t>=r&&t<=s,c=i>=r&&i<=s;if(o&&c)return!this.isTouching();var l=this.getCurve(),f=l&&t<r?l.getPrevious():l,d=e.getCurve(),b=d&&i<r?d.getPrevious():d;if(t>s&&(l=l.getNext()),i>s&&(d=d.getNext()),!(f&&l&&b&&d))return!1;var _=[];function v(N,V){var z=N.getValues(),q=de.classify(z).roots||de.getPeaks(z),H=q.length,G=de.getLength(z,V&&H?q[H-1]:0,!V&&H?q[0]:1);_.push(H?G:G/32)}function m(N,V,z){return V<z?N>V&&N<z:N>V||N<z}o||(v(f,!0),v(l,!1)),c||(v(b,!0),v(d,!1));var D=this.getPoint(),C=Math.min.apply(Math,_),R=o?l.getTangentAtTime(t):l.getPointAt(C).subtract(D),y=o?R.negate():f.getPointAt(-C).subtract(D),E=c?d.getTangentAtTime(i):d.getPointAt(C).subtract(D),g=c?E.negate():b.getPointAt(-C).subtract(D),I=y.getAngle(),P=R.getAngle(),L=g.getAngle(),T=E.getAngle();return!!(o?m(I,L,T)^m(P,L,T)&&m(I,T,L)^m(P,T,L):m(L,I,P)^m(T,I,P)&&m(L,P,I)^m(T,P,I))},hasOverlap:function(){return!!this._overlap}},W.each(de._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var i=this.getCurve(),r=this.getTime();return null!=r&&i&&i[t](r,!0)}},{preserve:!0}),new function(){function e(t,i,r){var s=t.length,o=0,c=s-1;function l(D,C){for(var R=D+C;R>=-1&&R<=s;R+=C){var y=t[(R%s+s)%s];if(!i.getPoint().isClose(y.getPoint(),1e-7))break;if(i.equals(y))return y}return null}for(;o<=c;){var b,f=o+c>>>1,d=t[f];if(r&&(b=i.equals(d)?d:l(f,-1)||l(f,1)))return i._overlap&&(b._overlap=b._intersection._overlap=!0),b;var _=i.getPath(),v=d.getPath();(_!==v?_._id-v._id:i.getIndex()+i.getTime()-(d.getIndex()+d.getTime()))<0?c=f-1:o=f+1}return t.splice(o,0,i),i}return{statics:{insert:e,expand:function(t){for(var i=t.slice(),r=t.length-1;r>=0;r--)e(i,t[r]._intersection,!1);return i}}}}),Zt=ke.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,i,r;if(W.isPlainObject(e)?(i=e.segments,t=e.pathData):Array.isArray(e)?i=e:"string"==typeof e&&(t=e),i){var s=i[0];r=s&&Array.isArray(s[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(r?Ct:Ue)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var i,s,o,t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),r=!1,c=new J,l=new J;function f(g,I){var P=+i[g];return r&&(P+=c[I]),P}function d(g){return new J(f(g,"x"),f(g+1,"y"))}this.clear();for(var b=0,_=t&&t.length;b<_;b++){var v=t[b],m=v[0],D=m.toLowerCase(),C=(i=v.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&i.length;switch(r=m===D,"z"===s&&!/[mz]/.test(D)&&this.moveTo(c),D){case"m":case"l":for(var R="m"===D,y=0;y<C;y+=2)this[R?"moveTo":"lineTo"](c=d(y)),R&&(l=c,R=!1);o=c;break;case"h":case"v":var E="h"===D?"x":"y";for(c=c.clone(),y=0;y<C;y++)c[E]=f(y,E),this.lineTo(c);o=c;break;case"c":for(y=0;y<C;y+=6)this.cubicCurveTo(d(y),o=d(y+2),c=d(y+4));break;case"s":for(y=0;y<C;y+=4)this.cubicCurveTo(/[cs]/.test(s)?c.multiply(2).subtract(o):c,o=d(y),c=d(y+2)),s=D;break;case"q":for(y=0;y<C;y+=4)this.quadraticCurveTo(o=d(y),c=d(y+2));break;case"t":for(y=0;y<C;y+=2)this.quadraticCurveTo(o=/[qt]/.test(s)?c.multiply(2).subtract(o):c,c=d(y)),s=D;break;case"a":for(y=0;y<C;y+=7)this.arcTo(c=d(y+5),new fe(+i[y],+i[y+1]),+i[y+2],+i[y+4],+i[y+3]);break;case"z":this.closePath(1e-12),c=l}s=D}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,i,r){var s=this===e||!e,o=this._matrix._orNullIfIdentity(),c=s?o:(i||e._matrix)._orNullIfIdentity();return s||this.getBounds(o).intersects(e.getBounds(c),1e-12)?de.getIntersections(this.getCurves(),!s&&e.getCurves(),t,o,c,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=J.read(arguments),t=this.getCurves(),i=1/0,r=null,s=0,o=t.length;s<o;s++){var c=t[s].getNearestLocation(e);c._distance<i&&(i=c._distance,r=c)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,i){var r=!this._children,s=r?"_segments":"_children",o=e[s],c=t[s],l=this[s];if(!o||!c||o.length!==c.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var f=l.length,d=c.length;if(f<d)for(var b=r?Ee:Ue,_=f;_<d;_++)this.add(new b);else f>d&&this[r?"removeSegments":"removeChildren"](d,f);for(_=0;_<d;_++)l[_].interpolate(o[_],c[_],i);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var i=this._children||[this],r=e._children?e._children.slice():[e],s=i.length,o=r.length,c=[],l=0;t=!0;for(var f=Ut.findItemBoundsCollisions(i,r,Me.GEOMETRIC_EPSILON),d=s-1;d>=0&&t;d--){var b=i[d];t=!1;var _=f[d];if(_)for(var v=_.length-1;v>=0&&!t;v--)b.compare(r[_[v]])&&(c[_[v]]||(c[_[v]]=!0,l++),t=!0)}t=t&&l===o}return t}}),Ue=Zt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,r=Array.isArray(t)?"object"==typeof t[0]?t:i:!t||t.size!==w||t.x===w&&t.point===w?null:i;r&&r.length>0?this.setSegments(r):(this._curves=w,this._segmentSelection=0,!r&&"string"==typeof t&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&W.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=w,32&t)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&t&&(this._bounds=w)},getStyle:function(){var e=this._parent;return(e instanceof Ct?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),i=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=w,i){var r=e[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(Ee.readList(e,0,{},i))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var i=this._countCurves();e=this._curves=new Array(i);for(var r=0;r<i;r++)e[r]=new de(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new de(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var l,f,d,b,_,v,m,D,i=this._segments,r=i.length,s=new ye(t),o=new Array(6),c=!0,C=[];function R(E,g){if(E._transformCoordinates(e,o),l=o[0],f=o[1],c)C.push("M"+s.pair(l,f)),c=!1;else if(v=o[3],(_=o[2])===l&&v===f&&m===d&&D===b){if(!g){var I=l-d,P=f-b;C.push(0===I?"v"+s.number(P):0===P?"h"+s.number(I):"l"+s.pair(I,P))}}else C.push("c"+s.pair(m-d,D-b)+" "+s.pair(_-d,v-b)+" "+s.pair(l-d,f-b));d=l,b=f,m=o[4],D=o[5]}if(!r)return"";for(var y=0;y<r;y++)R(i[y]);return this._closed&&r>0&&(R(i[0],!0),C.push("z")),C.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,i=new Array(6),r=0,s=t.length;r<s;r++)t[r]._transformCoordinates(e,i,!0);return!0},_add:function(e,c){for(var i=this._segments,r=this._curves,s=e.length,o=null==c,l=(c=o?i.length:c,0);l<s;l++){var f=e[l];f._path&&(f=e[l]=f.clone()),f._path=this,f._index=c+l,f._selection&&this._updateSelection(f,0,f._selection)}if(o)W.push(i,e);else{i.splice.apply(i,[c,0].concat(e)),l=c+s;for(var d=i.length;l<d;l++)i[l]._index=l}if(r){var b=this._countCurves(),_=c>0&&c+s-1===b?c-1:c,v=_,m=Math.min(_+s,b);for(e._curves&&(r.splice.apply(r,[_,0].concat(e._curves)),v+=e._curves.length),l=v;l<m;l++)r.splice(l,0,new de(this,null,null));this._adjustCurves(_,m)}return this._changed(41),e},_adjustCurves:function(e,t){for(var s,i=this._segments,r=this._curves,o=e;o<t;o++)(s=r[o])._path=this,s._segment1=i[o],s._segment2=i[o+1]||i[0],s._changed();(s=r[this._closed&&!e?i.length-1:e-1])&&(s._segment2=i[e]||i[0],s._changed()),(s=r[t])&&(s._segment1=i[t],s._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(Ee.readList(t)):this._add([Ee.read(t)])[0]},insert:function(e,t){var i=arguments;return i.length>2&&"number"!=typeof t?this._add(Ee.readList(i,1),e):this._add([Ee.read(i,1)],e)[0]},addSegment:function(){return this._add([Ee.read(arguments)])[0]},insertSegment:function(e){return this._add([Ee.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(Ee.readList(e))},insertSegments:function(e,t){return this._add(Ee.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,i){e=e||0,t=W.pick(t,this._segments.length);var r=this._segments,s=this._curves,o=r.length,c=r.splice(e,t-e),l=c.length;if(!l)return c;for(var f=0;f<l;f++){var d=c[f];d._selection&&this._updateSelection(d,d._selection,0),d._index=d._path=null}f=e;for(var b=r.length;f<b;f++)r[f]._index=f;if(s){var _=e>0&&t===o+(this._closed?1:0)?e-1:e;for(f=(s=s.splice(_,l)).length-1;f>=0;f--)s[f]._path=null;i&&(c._curves=s.slice(1)),this._adjustCurves(_,_)}return this._changed(41),c},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,i=e.length;t<i;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,i=e.length;t<i;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,i=0,r=e.length;i<r;i++)t+=e[i].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,i=this._closed;e=0;for(var r=0,s=t.length;r<s;r++){var o=r+1===s;e+=de.getArea(de.getValues(t[r],t[o?0:r+1],null,o&&!i))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,i=t.length,r=e?7:0;this._segmentSelection=r*i;for(var s=0;s<i;s++)t[s]._selection=r},_updateSelection:function(e,t,i){e._selection=i,(this._segmentSelection+=i-t)>0&&this.setSelected(!0)},divideAt:function(e){var i,t=this.getLocationAt(e);return t&&(i=t.getCurve().divideAt(t.getCurveOffset()))?i._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),i=t&&t.index,r=t&&t.time;r>.99999999&&(i++,r=0);var c=this.getCurves();if(i>=0&&i<c.length){r>=1e-8&&c[i++].divideAtTime(r);var f,l=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),f=this):((f=new Ue(ke.NO_INSERT)).insertAbove(this),f.copyAttributes(this)),f._add(l,0),this.addSegment(l[0]),f}return null},split:function(e,t){var i,r=t===w?e:(i=this.getCurves()[e])&&i.getLocationAtTime(t);return null!=r?this.splitAt(r):null},join:function(e,t){var i=t||0;if(e&&e!==this){var r=e._segments,s=this.getLastSegment(),o=e.getLastSegment();if(!o)return this;s&&s._point.isClose(o._point,i)&&e.reverse();var c=e.getFirstSegment();if(s&&s._point.isClose(c._point,i))s.setHandleOut(c._handleOut),this._add(r.slice(1));else{var l=this.getFirstSegment();l&&l._point.isClose(c._point,i)&&e.reverse(),o=e.getLastSegment(),l&&l._point.isClose(o._point,i)?(l.setHandleIn(o._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var f=this.getFirstSegment(),d=this.getLastSegment();return f!==d&&f._point.isClose(d._point,i)&&(f.setHandleIn(d._handleIn),d.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),i=e&&e.simplify,r=i?1e-7:0,s=t.length-1;s>=0;s--){var o=t[s];!o.hasHandles()&&(!o.hasLength(r)||i&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var i=this._segments[e],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var i=new wi(this,e||.25,256,!0).parts,r=i.length,s=[],o=0;o<r;o++)s.push(new Ee(i[o].curve.slice(0,2)));!this._closed&&r>0&&s.push(new Ee(i[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(e){var t=new oi(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,i=e||{},r=i.type||"asymmetric",s=this._segments,o=s.length,c=this._closed;function l(_e,Ie){var Se=_e&&_e.index;if(null!=Se){var Re=_e.path;if(Re&&Re!==t)throw new Error(_e._class+" "+Se+" of "+Re+" is not part of "+t);Ie&&_e instanceof de&&Se++}else Se="number"==typeof _e?_e:Ie;return Math.min(Se<0&&c?Se%o:Se<0?Se+o:Se,o-1)}var f=c&&i.from===w&&i.to===w,d=l(i.from,0),b=l(i.to,o-1);if(d>b)if(c)d-=o;else{var _=d;d=b,b=_}if(/^(?:asymmetric|continuous)$/.test(r)){var v="asymmetric"===r,m=Math.min,D=b-d+1,C=D-1,R=f?m(D,4):1,y=R,E=R,g=[];if(c||(y=m(1,d),E=m(1,o-b-1)),(C+=y+E)<=1)return;for(var I=0,P=d-y;I<=C;I++,P++)g[I]=s[(P<0?P+o:P)%o]._point;var L=g[0]._x+2*g[1]._x,T=g[0]._y+2*g[1]._y,N=2,V=C-1,z=[L],q=[T],H=[N],G=[],j=[];for(I=1;I<C;I++){var K=I<V,se=K?4:v?3:8,le=K?2:v?0:1,pe=(K||v?1:2)/N;N=H[I]=(K?4:v?2:7)-pe,L=z[I]=se*g[I]._x+le*g[I+1]._x-pe*L,T=q[I]=se*g[I]._y+le*g[I+1]._y-pe*T}for(G[V]=z[V]/H[V],j[V]=q[V]/H[V],I=C-2;I>=0;I--)G[I]=(z[I]-G[I+1])/H[I],j[I]=(q[I]-j[I+1])/H[I];G[C]=(3*g[C]._x-G[V])/2,j[C]=(3*g[C]._y-j[V])/2,I=y;var ge=C-E;for(P=d;I<=ge;I++,P++){var Q=s[P<0?P+o:P],ae=Q._point,he=G[I]-ae._x,be=j[I]-ae._y;(f||I<ge)&&Q.setHandleOut(he,be),(f||I>y)&&Q.setHandleIn(-he,-be)}}else for(I=d;I<=b;I++)s[I<0?I+o:I].smooth(i,!f&&I===d,!f&&I===b)},toShape:function(e){if(!this._closed)return null;var i,r,s,o,t=this._segments;function c(v,m){var D=t[v],C=D.getNext(),R=t[m],y=R.getNext();return D._handleOut.isZero()&&C._handleIn.isZero()&&R._handleOut.isZero()&&y._handleIn.isZero()&&C._point.subtract(D._point).isCollinear(y._point.subtract(R._point))}function f(v){var m=t[v],D=m.getNext(),C=m._handleOut,R=D._handleIn,y=.5522847498307936;if(C.isOrthogonal(R)){var E=m._point,g=D._point,I=new ft(E,C,!0).intersect(new ft(g,R,!0),!0);return I&&Me.isZero(C.getLength()/I.subtract(E).getLength()-y)&&Me.isZero(R.getLength()/I.subtract(g).getLength()-y)}return!1}function d(v,m){return t[v]._point.getDistance(t[m]._point)}if(!this.hasHandles()&&4===t.length&&c(0,2)&&c(1,3)&&function l(v){var m=t[v],D=m.getPrevious(),C=m.getNext();return D._handleOut.isZero()&&m._handleIn.isZero()&&m._handleOut.isZero()&&C._handleIn.isZero()&&m._point.subtract(D._point).isOrthogonal(C._point.subtract(m._point))}(1)?(i=St.Rectangle,r=new fe(d(0,3),d(0,1)),o=t[1]._point.add(t[2]._point).divide(2)):8===t.length&&f(0)&&f(2)&&f(4)&&f(6)&&c(1,5)&&c(3,7)?(i=St.Rectangle,s=(r=new fe(d(1,6),d(0,3))).subtract(new fe(d(0,7),d(1,2))).divide(2),o=t[3]._point.add(t[4]._point).divide(2)):4===t.length&&f(0)&&f(1)&&f(2)&&f(3)&&(Me.isZero(d(0,2)-d(1,3))?(i=St.Circle,s=d(0,2)/2):(i=St.Ellipse,s=new fe(d(2,0)/2,d(3,1)/2)),o=t[1]._point),i){var b=this.getPosition(!0),_=new i({center:b,size:r,radius:s,insert:!1});return _.copyAttributes(this,!0),_._matrix.prepend(this._matrix),_.rotate(o.subtract(b).getAngle()+90),(e===w||e)&&_.insertAbove(this),_}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof Ct)return e.base.call(this,t);var i=this.getCurves(),r=t.getCurves(),s=i.length,o=r.length;if(!s||!o)return s==o;for(var d,_,c=i[0].getValues(),l=[],f=0,b=0,v=0;v<o;v++){var R=r[v].getValues();if(l.push(R),m=de.getOverlaps(c,R)){d=!v&&m[0][0]>0?o-1:v,_=m[0][1];break}}var y,D=Math.abs;for(R=l[d];c&&R;){var m;if((m=de.getOverlaps(c,R))&&D(m[0][0]-b)<1e-8){1===(b=m[1][0])&&(c=++f<s?i[f].getValues():null,b=0);var g=m[0][1];if(D(g-_)<1e-8){if(y||(y=[d,g]),1===(_=m[1][1])&&(++d>=o&&(d=0),R=l[d]||r[d].getValues(),_=0),!c)return y[0]===d&&y[1]===_;continue}}break}return!1},_hitTestSelf:function(e,t,i,r){var _,v,m,D,C,R,s=this,o=this.getStyle(),c=this._segments,l=c.length,f=this._closed,d=t._tolerancePadding,b=d,y=t.stroke&&o.hasStroke(),E=t.fill&&o.hasFill(),g=t.curves,I=y?o.getStrokeWidth()/2:E&&t.tolerance>0||g?0:null;function P(G,j){return e.subtract(G).divide(j).length<=1}function L(G,j,K){if(!t.selected||j.isSelected()){var X=G._point;if(j!==X&&(j=j.add(X)),P(j,b))return new gt(K,s,{segment:G,point:j})}}function T(G,j){return(j||t.segments)&&L(G,G._point,"segment")||!j&&t.handles&&(L(G,G._handleIn,"handle-in")||L(G,G._handleOut,"handle-out"))}function N(G){D.add(G)}function V(G){var K,j=f||G._index>0&&G._index<l-1;return"round"===(j?_:v)?P(G._point,b):(D=new Ue({internal:!0,closed:!0}),j?G.isSmooth()||Ue._addBevelJoin(G,_,I,m,null,r,N,!0):"square"===v&&Ue._addSquareCap(G,v,I,null,r,N,!0),D.isEmpty()?void 0:D.contains(e)||(K=D.getNearestLocation(e))&&P(K.getPoint(),d))}if(null!==I&&(I>0?(_=o.getStrokeJoin(),v=o.getStrokeCap(),m=o.getMiterLimit(),b=b.add(Ue._getStrokePadding(I,r))):_=v="round"),!t.ends||t.segments||f){if(t.segments||t.handles)for(var z=0;z<l;z++)if(R=T(c[z]))return R}else if(R=T(c[0],!0)||T(c[l-1],!0))return R;if(null!==I){if(C=this.getNearestLocation(e)){var q=C.getTime();0===q||1===q&&l>1?V(C.getSegment())||(C=null):P(C.getPoint(),b)||(C=null)}if(!C&&"miter"===_&&l>1)for(z=0;z<l;z++){var H=c[z];if(e.getDistance(H._point)<=m*I&&V(H)){C=H.getLocation();break}}}return!C&&E&&this._contains(e)||C&&!y&&!g?new gt("fill",this):C?new gt(y?"stroke":"curve",this,{location:C,point:C.getPoint()}):null}},W.each(de._evaluateMethods,function(e){this[e+"At"]=function(t){var i=this.getLocationAt(t);return i&&i[e]()}},{beans:!1,getLocationOf:function(){for(var e=J.read(arguments),t=this.getCurves(),i=0,r=t.length;i<r;i++){var s=t[i].getLocationOf(e);if(s)return s}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),i=0,r=0,s=t.length;r<s;r++){var o=i,c=t[r];if((i+=c.getLength())>e)return c.getLocationAt(e-o)}if(t.length>0&&e<=this.getLength())return new Lt(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=J.read(arguments);if(e.isZero())return[];for(var t=[],i=0,r=this.getCurves(),s=0,o=r.length;s<o;s++){for(var c=r[s],l=c.getTimesWithTangent(e),f=0,d=l.length;f<d;f++){var b=i+c.getOffsetAtTime(l[f]);t.indexOf(b)<0&&t.push(b)}i+=c.length}return t}}),new function(){function t(i,r,s){var d,b,_,v,m,D,C,R,o=r._segments,c=o.length,l=new Array(6),f=!0;function y(g){if(s)g._transformCoordinates(s,l),d=l[0],b=l[1];else{var I=g._point;d=I._x,b=I._y}var P;f?(i.moveTo(d,b),f=!1):(s?(m=l[2],D=l[3]):(m=d+(P=g._handleIn)._x,D=b+P._y),m===d&&D===b&&C===_&&R===v?i.lineTo(d,b):i.bezierCurveTo(C,R,m,D,d,b)),_=d,v=b,s?(C=l[4],R=l[5]):(C=_+(P=g._handleOut)._x,R=v+P._y)}for(var E=0;E<c;E++)y(o[E]);r._closed&&c>0&&y(o[0])}return{_draw:function(i,r,s,o){var c=r.dontStart,l=r.dontFinish||r.clip,f=this.getStyle(),d=f.hasFill(),b=f.hasStroke(),_=f.getDashArray(),v=!Ve.support.nativeDash&&b&&_&&_.length;function m(g){return _[(g%v+v)%v]}if(c||i.beginPath(),(d||b&&!v||l)&&(t(i,this,o),this._closed&&i.closePath()),!l&&(d||b)&&(this._setStyles(i,r,s),d&&(i.fill(f.getFillRule()),i.shadowColor="rgba(0,0,0,0)"),b)){if(v){c||i.beginPath();for(var y,D=new wi(this,.25,32,!1,o),C=D.length,R=-f.getDashOffset(),E=0;R>0;)R-=m(E--)+m(E--);for(;R<C;)y=R+m(E++),(R>0||y>0)&&D.drawPart(i,Math.max(R,0),Math.max(y,0)),R=y+m(E++)}i.stroke()}},_drawSelected:function(i,r){i.beginPath(),t(i,this,r),i.stroke(),function e(i,r,s,o){if(!(o<=0))for(var b,_,c=o/2,l=o-2,f=c-1,d=new Array(6),m=0,D=r.length;m<D;m++){var C=r[m],R=C._selection;if(C._transformCoordinates(s,d),b=d[0],_=d[1],2&R&&v(2),4&R&&v(4),i.fillRect(b-c,_-c,o,o),l>0&&!(1&R)){var y=i.fillStyle;i.fillStyle="#ffffff",i.fillRect(b-f,_-f,l,l),i.fillStyle=y}}function v(E){var g=d[E],I=d[E+1];(b!=g||_!=I)&&(i.beginPath(),i.moveTo(b,_),i.lineTo(g,I),i.stroke(),i.beginPath(),i.arc(g,I,c,0,2*Math.PI,!0),i.fill())}}(i,this._segments,r,Ve.settings.handleSize)}}},new function(){function e(t){var i=t._segments;if(!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new Ee(J.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ee(J.read(arguments))])},cubicCurveTo:function(){var t=arguments,i=J.read(t),r=J.read(t),s=J.read(t),o=e(this);o.setHandleOut(i.subtract(o._point)),this._add([new Ee(s,r.subtract(s))])},quadraticCurveTo:function(){var t=arguments,i=J.read(t),r=J.read(t),s=e(this)._point;this.cubicCurveTo(i.add(s.subtract(i).multiply(1/3)),i.add(r.subtract(i).multiply(1/3)),r)},curveTo:function(){var t=arguments,i=J.read(t),r=J.read(t),s=W.pick(W.read(t),.5),o=1-s,c=e(this)._point,l=i.subtract(c.multiply(o*o)).subtract(r.multiply(s*s)).divide(2*s*o);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(l,r)},arcTo:function(){var b,_,v,m,t=arguments,i=Math.abs,r=Math.sqrt,s=e(this),o=s._point,c=J.read(t),f=W.peek(t);if("boolean"==typeof(d=W.pick(f,!0)))var l=(D=o.add(c).divide(2)).add(D.subtract(o).rotate(d?-90:90));else if(W.remain(t)<=2)l=c,c=J.read(t);else if(!o.equals(c)){var C=fe.read(t),R=Me.isZero;if(R(C.width)||R(C.height))return this.lineTo(c);var y=W.read(t),d=!!W.read(t),E=!!W.read(t),D=o.add(c).divide(2),I=(g=o.subtract(D).rotate(-y)).x,P=g.y,L=i(C.width),T=i(C.height),N=L*L,V=T*T,z=I*I,q=P*P,H=r(z/N+q/V);if(H>1&&(N=(L*=H)*L,V=(T*=H)*T),i(H=(N*V-N*q-V*z)/(N*q+V*z))<1e-12&&(H=0),H<0)throw new Error("Cannot create an arc with the given arguments");b=new J(L*P/T,-T*I/L).multiply((E===d?-1:1)*r(H)).rotate(y).add(D),_=(v=(m=(new Ze).translate(b).rotate(y).scale(L,T))._inverseTransform(o)).getDirectedAngle(m._inverseTransform(c)),!d&&_>0?_-=360:d&&_<0&&(_+=360)}if(l){var G=new ft(o.add(l).divide(2),l.subtract(o).rotate(90),!0),j=new ft(l.add(c).divide(2),c.subtract(l).rotate(90),!0),K=new ft(o,c),X=K.getSide(l);if(!(b=G.intersect(j,!0))){if(!X)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}_=(v=o.subtract(b)).getDirectedAngle(c.subtract(b));var ee=K.getSide(b,!0);0===ee?_=X*i(_):X===ee&&(_+=_<0?360:-360)}if(_){for(var se=1e-5,le=i(_),pe=le>=360?4:Math.ceil((le-se)/90),ge=_/pe,Q=ge*Math.PI/360,ae=4/3*Math.sin(Q)/(1+Math.cos(Q)),he=[],be=0;be<=pe;be++){var g=c,_e=null;if(be<pe&&(_e=v.rotate(90).multiply(ae),m?(g=m._transformPoint(v),_e=m._transformPoint(v.add(_e)).subtract(g)):g=b.add(v)),be){var Ie=v.rotate(-90).multiply(ae);m&&(Ie=m._transformPoint(v.add(Ie)).subtract(g)),he.push(new Ee(g,Ie,_e))}else s.setHandleOut(_e);v=v.rotate(ge)}this._add(he)}},lineBy:function(){var t=J.read(arguments),i=e(this)._point;this.lineTo(i.add(t))},curveBy:function(){var t=arguments,i=J.read(t),r=J.read(t),s=W.read(t),o=e(this)._point;this.curveTo(o.add(i),o.add(r),s)},cubicCurveBy:function(){var t=arguments,i=J.read(t),r=J.read(t),s=J.read(t),o=e(this)._point;this.cubicCurveTo(o.add(i),o.add(r),o.add(s))},quadraticCurveBy:function(){var t=arguments,i=J.read(t),r=J.read(t),s=e(this)._point;this.quadraticCurveTo(s.add(i),s.add(r))},arcBy:function(){var t=arguments,i=e(this)._point,r=i.add(J.read(t)),s=W.pick(W.peek(t),!0);this.arcTo(r,"boolean"==typeof s?s:i.add(J.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){return Ue[t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,i,r,s,o){var c=e[0];if(!c)return new xe;var l=new Array(6),f=c._transformCoordinates(r,new Array(6)),d=f.slice(0,2),b=d.slice(),_=new Array(2);function v(C){C._transformCoordinates(r,l);for(var R=0;R<2;R++)de._addBounds(f[R],f[R+4],l[R+2],l[R],R,o?o[R]:0,d,b,_);var y=f;f=l,l=y}for(var m=1,D=e.length;m<D;m++)v(e[m]);return t&&v(c),new xe(d[0],d[1],b[0]-d[0],b[1]-d[1])},getStrokeBounds:function(e,t,i,r,s){var o=i.getStyle(),c=o.hasStroke(),l=o.getStrokeWidth(),f=c&&i._getStrokeMatrix(r,s),d=c&&Ue._getStrokePadding(l,f),b=Ue.getBounds(e,t,i,r,s,d);if(!c)return b;var _=l/2,v=o.getStrokeJoin(),m=o.getStrokeCap(),D=o.getMiterLimit(),C=new xe(new fe(d));function R(L){b=b.include(L)}function y(L){b=b.unite(C.setCenter(L._point.transform(r)))}function E(L,T){"round"===T||L.isSmooth()?y(L):Ue._addBevelJoin(L,T,_,D,r,f,R)}function g(L,T){"round"===T?y(L):Ue._addSquareCap(L,T,_,r,f,R)}var I=e.length-(t?0:1);if(I>0){for(var P=1;P<I;P++)E(e[P],v);t?E(e[0],v):(g(e[0],m),g(e[e.length-1],m))}return b},_getStrokePadding:function(e,t){if(!t)return[e,e];var i=new J(e,0).transform(t),r=new J(0,e).transform(t),s=i.getAngleInRadians(),o=i.getLength(),c=r.getLength(),l=Math.sin(s),f=Math.cos(s),d=Math.tan(s),b=Math.atan2(c*d,o),_=Math.atan2(c,d*o);return[Math.abs(o*Math.cos(b)*f+c*Math.sin(b)*l),Math.abs(c*Math.sin(_)*f+o*Math.cos(_)*l)]},_addBevelJoin:function(e,t,i,r,s,o,c,l){var f=e.getCurve(),d=f.getPrevious(),b=f.getPoint1().transform(s),_=d.getNormalAtTime(1).multiply(i).transform(o),v=f.getNormalAtTime(0).multiply(i).transform(o),m=_.getDirectedAngle(v);if((m<0||m>=180)&&(_=_.negate(),v=v.negate()),l&&c(b),c(b.add(_)),"miter"===t){var D=new ft(b.add(_),new J(-_.y,_.x),!0).intersect(new ft(b.add(v),new J(-v.y,v.x),!0),!0);D&&b.getDistance(D)<=r*i&&c(D)}c(b.add(v))},_addSquareCap:function(e,t,i,r,s,o,c){var l=e._point.transform(r),f=e.getLocation(),d=f.getNormal().multiply(0===f.getTime()?i:-i).transform(s);"square"===t&&(c&&(o(l.subtract(d)),o(l.add(d))),l=l.add(d.rotate(-90))),o(l.add(d)),o(l.subtract(d))},getHandleBounds:function(e,t,i,r,s){var l,f,o=i.getStyle();if(s.stroke&&o.hasStroke()){var d=i._getStrokeMatrix(r,s),b=o.getStrokeWidth()/2,_=b;"miter"===o.getStrokeJoin()&&(_=b*o.getMiterLimit()),"square"===o.getStrokeCap()&&(_=Math.max(_,b*Math.SQRT2)),l=Ue._getStrokePadding(b,d),f=Ue._getStrokePadding(_,d)}for(var v=new Array(6),m=1/0,D=-m,C=m,R=D,y=0,E=e.length;y<E;y++){e[y]._transformCoordinates(r,v);for(var I=0;I<6;I+=2){var P=I?l:f,L=P?P[0]:0,T=P?P[1]:0,N=v[I],V=v[I+1],z=N-L,q=N+L,H=V-T,G=V+T;z<m&&(m=z),q>D&&(D=q),H<C&&(C=H),G>R&&(R=G)}}return new xe(m,C,D-m,R-C)}}});Ue.inject({statics:new function(){var e=.5522847498307936,t=[new Ee([-1,0],[0,e],[0,-e]),new Ee([0,-1],[-e,0],[e,0]),new Ee([1,0],[0,-e],[0,e]),new Ee([0,1],[e,0],[-e,0])];function i(s,o,c){var l=W.getNamed(c),f=new Ue(l&&(1==l.insert?ke.INSERT:0==l.insert?ke.NO_INSERT:null));return f._add(s),f._closed=o,f.set(l,ke.INSERT)}function r(s,o,c){for(var l=new Array(4),f=0;f<4;f++){var d=t[f];l[f]=new Ee(d._point.multiply(o).add(s),d._handleIn.multiply(o),d._handleOut.multiply(o))}return i(l,!0,c)}return{Line:function(){var s=arguments;return i([new Ee(J.readNamed(s,"from")),new Ee(J.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,o=J.readNamed(s,"center"),c=W.readNamed(s,"radius");return r(o,new fe(c),s)},Rectangle:function(){var _,s=arguments,o=xe.readNamed(s,"rectangle"),c=fe.readNamed(s,"radius",0,{readNull:!0}),l=o.getBottomLeft(!0),f=o.getTopLeft(!0),d=o.getTopRight(!0),b=o.getBottomRight(!0);if(!c||c.isZero())_=[new Ee(l),new Ee(f),new Ee(d),new Ee(b)];else{var v=(c=fe.min(c,o.getSize(!0).divide(2))).width,m=c.height,D=v*e,C=m*e;_=[new Ee(l.add(v,0),null,[-D,0]),new Ee(l.subtract(0,m),[0,C]),new Ee(f.add(0,m),null,[0,-C]),new Ee(f.add(v,0),[-D,0],null),new Ee(d.subtract(v,0),null,[D,0]),new Ee(d.add(0,m),[0,-C],null),new Ee(b.subtract(0,m),null,[0,C]),new Ee(b.subtract(v,0),[D,0])]}return i(_,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,o=St._readEllipse(s);return r(o.center,o.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,o=J.readNamed(s,"from"),c=J.readNamed(s,"through"),l=J.readNamed(s,"to"),f=W.getNamed(s),d=new Ue(f&&0==f.insert&&ke.NO_INSERT);return d.moveTo(o),d.arcTo(c,l),d.set(f)},RegularPolygon:function(){for(var s=arguments,o=J.readNamed(s,"center"),c=W.readNamed(s,"sides"),l=W.readNamed(s,"radius"),f=360/c,d=c%3==0,b=new J(0,d?-l:l),_=d?-1:.5,v=new Array(c),m=0;m<c;m++)v[m]=new Ee(o.add(b.rotate((m+_)*f)));return i(v,!0,s)},Star:function(){for(var s=arguments,o=J.readNamed(s,"center"),c=2*W.readNamed(s,"points"),l=W.readNamed(s,"radius1"),f=W.readNamed(s,"radius2"),d=360/c,b=new J(0,-1),_=new Array(c),v=0;v<c;v++)_[v]=new Ee(o.add(b.rotate(d*v).multiply(v%2?f:l)));return i(_,!0,s)}}}});var Ct=Zt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,i){var r=i,s=r[0];s&&"number"==typeof s[0]&&(r=[r]);for(var o=i.length-1;o>=0;o--){var c=r[o];r===i&&!(c instanceof Ue)&&(r=W.slice(r)),Array.isArray(c)?r[o]=new Ue({segments:c,insert:!1}):c instanceof Ct&&(r.splice.apply(r,[o,1].concat(c.removeChildren())),c.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var i=this._children,r=i.length-1;r>=0;r--)(s=i[r].reduce(t)).isEmpty()&&s.remove();var s;return i.length?e.base.call(this):((s=new Ue(ke.NO_INSERT)).copyAttributes(this),s.insertAbove(this),this.remove(),s)},isClosed:function(){for(var e=this._children,t=0,i=e.length;t<i;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,i=0,r=t.length;i<r;i++)t[i].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],i=0,r=e.length;i<r;i++)W.push(t,e[i].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,i=0,r=e.length;i<r;i++)t+=e[i].getArea();return t},getLength:function(){for(var e=this._children,t=0,i=0,r=e.length;i<r;i++)t+=e[i].getLength();return t},getPathData:function(e,t){for(var i=this._children,r=[],s=0,o=i.length;s<o;s++){var c=i[s],l=c._matrix;r.push(c.getPathData(e&&!l.isIdentity()?e.appended(l):e,t))}return r.join("")},_hitTestChildren:function e(t,i,r){return e.base.call(this,t,i.class===Ue||"path"===i.type?i:W.set({},i,{fill:!1}),r)},_draw:function(e,t,i,r){var s=this._children;if(s.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var o=0,c=s.length;o<c;o++)s[o].draw(e,t,r);if(!t.clip){this._setStyles(e,t,i);var l=this._style;l.hasFill()&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,i){for(var r=this._children,s=0,o=r.length;s<o;s++){var c=r[s],l=c._matrix;i[c._id]||c._drawSelected(e,l.isIdentity()?t:t.appended(l))}}},new function(){function e(t,i){var r=t._children;if(i&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return W.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var i=e(this,!0);i[t].apply(i,arguments)}},{moveTo:function(){var t=e(this),i=t&&t.isEmpty()?t:new Ue(ke.NO_INSERT);i!==t&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var t=e(this,!0),i=t&&t.getLastSegment(),r=J.read(arguments);this.moveTo(i?r.add(i._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},W.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var r,i=this._children,s=0,o=i.length;s<o;s++)r=i[s][e](t)||r;return r}},{}));Zt.inject(new function(){var e=Math.min,t=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(y){return y._children||[y]}function o(y,E){var g=y.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(E){for(var I=s(g),P=0,L=I.length;P<L;P++)!(y=I[P])._closed&&!y.isEmpty()&&(y.closePath(1e-12),y.getFirstSegment().setHandleIn(0,0),y.getLastSegment().setHandleOut(0,0));g=g.resolveCrossings().reorient("nonzero"===g.getFillRule(),!0)}return g}function c(y,E,g,I,P){var L=new Ct(ke.NO_INSERT);return L.addChildren(y,!0),L=L.reduce({simplify:E}),P&&0==P.insert||L.insertAbove(I&&g.isSibling(I)&&g.getIndex()<I.getIndex()?I:g),L.copyAttributes(g,!0),L}function l(y){return y.hasOverlap()||y.isCrossing()}function f(y,E,g,I){if(I&&(0==I.trace||I.stroke)&&/^(subtract|intersect)$/.test(g))return d(y,E,g);var P=o(y,!0),L=E&&y!==E&&o(E,!0),T=r[g];T[g]=!0,L&&(T.subtract||T.exclude)^L.isClockwise()^P.isClockwise()&&L.reverse();var G,N=m(Lt.expand(P.getIntersections(L,l))),V=s(P),z=L&&s(L),q=[],H=[];function j(_e){for(var Ie=0,Se=_e.length;Ie<Se;Ie++){var Re=_e[Ie];W.push(q,Re._segments),W.push(H,Re.getCurves()),Re._overlapsOnly=!0}}function K(_e){for(var Ie=[],Se=0,Re=_e&&_e.length;Se<Re;Se++)Ie.push(H[_e[Se]]);return Ie}if(N.length){j(V),z&&j(z);for(var X=new Array(H.length),ee=0,se=H.length;ee<se;ee++)X[ee]=H[ee].getValues();var le=Ut.findCurveBoundsCollisions(X,X,0,!0),pe={};for(ee=0;ee<H.length;ee++){var ge=H[ee],Q=ge._path._id;(pe[Q]=pe[Q]||{})[ge.getIndex()]={hor:K(le[ee].hor),ver:K(le[ee].ver)}}for(ee=0,se=N.length;ee<se;ee++)C(N[ee]._segment,P,L,pe,T);for(ee=0,se=q.length;ee<se;ee++){var he=q[ee],be=he._intersection;he._winding||C(he,P,L,pe,T),be&&be._overlap||(he._path._overlapsOnly=!1)}G=R(q,T)}else G=v(z?V.concat(z):V.slice(),function(_e){return!!T[_e]});return c(G,!0,y,E,I)}function d(y,E,g){var I=o(y),P=o(E),L=I.getIntersections(P,l),T="subtract"===g,N="divide"===g,V={},z=[];function q(j){if(!V[j._id]&&(N||P.contains(j.getPointAt(j.getLength()/2))^T))return z.unshift(j),V[j._id]=!0}for(var H=L.length-1;H>=0;H--){var G=L[H].split();G&&(q(G)&&G.getFirstSegment().setHandleIn(0,0),I.getLastSegment().setHandleOut(0,0))}return q(I),c(z,!1,y,E)}function b(y,E){for(var g=y;g;){if(g===E)return;g=g._previous}for(;y._next&&y._next!==E;)y=y._next;if(!y._next){for(;E._previous;)E=E._previous;y._next=E,E._previous=y}}function _(y){for(var E=y.length-1;E>=0;E--)y[E].clearHandles()}function v(y,E,g){var I=y&&y.length;if(I){var P=W.each(y,function(le,pe){this[le._id]={container:null,winding:le.isClockwise()?1:-1,index:pe}},{}),L=y.slice().sort(function(le,pe){return i(pe.getArea())-i(le.getArea())}),T=L[0],N=Ut.findItemBoundsCollisions(L,null,Me.GEOMETRIC_EPSILON);null==g&&(g=T.isClockwise());for(var V=0;V<I;V++){var z=L[V],q=P[z._id],H=0,G=N[V];if(G)for(var j=null,K=G.length-1;K>=0;K--)if(G[K]<V){j=j||z.getInteriorPoint();var X=L[G[K]];if(X.contains(j)){var ee=P[X._id];q.winding+=H=ee.winding,q.container=ee.exclude?ee.container:X;break}}if(E(q.winding)===E(H))q.exclude=!0,y[q.index]=null;else{var se=q.container;z.setClockwise(se?!se.isClockwise():g)}}}return y}function m(y,E,g){var z,q,H,I=E&&[],T=!1,N=g||[],V=g&&{};function G(Ie){return Ie._path._id+"."+Ie._segment1._index}for(var j=(g&&g.length)-1;j>=0;j--)(K=g[j])._path&&(V[G(K)]=!0);for(j=y.length-1;j>=0;j--){var K,pe,X=y[j],ee=X._time,se=ee,le=E&&!E(X);if((K=X._curve)&&(K!==q?(T=!K.hasHandles()||V&&V[G(K)],z=[],H=null,q=K):H>=1e-8&&(ee/=H)),le)z&&z.push(X);else{if(E&&I.unshift(X),H=se,ee<1e-8)pe=K._segment1;else if(ee>.99999999)pe=K._segment2;else{var ge=K.divideAtTime(ee,!0);T&&N.push(K,ge),pe=ge._segment1;for(var Q=z.length-1;Q>=0;Q--){var ae=z[Q];ae._time=(ae._time-ee)/(1-ee)}}X._setSegment(pe);var he=pe._intersection,be=X._intersection;if(he){b(he,be);for(var _e=he;_e;)b(_e._intersection,he),_e=_e._next}else pe._intersection=be}}return g||_(N),I||y}function D(y,E,g,I,P){var he,be,L=Array.isArray(E)?E:E[g?"hor":"ver"],T=g?1:0,N=1^T,V=[y.x,y.y],z=V[T],q=V[N],G=1e-6,j=z-1e-9,K=z+1e-9,X=0,ee=0,se=0,le=0,pe=!1,ge=!1,Q=1,ae=[];function _e(je){var Ce=je[N+0],It=je[N+6];if(!(q<e(Ce,It)||q>t(Ce,It))){var lt=je[T+0],At=je[T+2],$t=je[T+4],zt=je[T+6];if(Ce===It)return void((lt<K&&zt>j||zt<K&&lt>j)&&(pe=!0));var Bt=q===Ce?0:q===It||j>t(lt,At,$t,zt)||K<e(lt,At,$t,zt)?1:de.solveCubic(je,N,q,ae,0,1)>0?ae[0]:1,Et=0===Bt?lt:1===Bt?zt:de.getPoint(je,Bt)[g?"y":"x"],n=Ce>It?1:-1,S=he[T+6];return q!==Ce?(Et<j?se+=n:Et>K?le+=n:pe=!0,Et>z-G&&Et<z+G&&(Q/=2)):(n!==(he[N]>he[N+6]?1:-1)?lt<j?se+=n:lt>K&&(le+=n):lt!=S&&(S<K&&Et>K?(le+=n,pe=!0):S>j&&Et<j&&(se+=n,pe=!0)),Q/=4),he=je,!P&&Et>j&&Et<K&&0===de.getTangent(je,Bt)[g?"x":"y"]&&D(y,E,!g,I,!0)}}function Ie(je){var Ce=je[N+0],It=je[N+2],lt=je[N+4],At=je[N+6];if(q<=t(Ce,It,lt,At)&&q>=e(Ce,It,lt,At))for(var u,$t=je[T+0],zt=je[T+2],Bt=je[T+4],Et=je[T+6],n=j>t($t,zt,Bt,Et)||K<e($t,zt,Bt,Et)?[je]:de.getMonoCurves(je,g),S=0,M=n.length;S<M;S++)if(u=_e(n[S]))return u}for(var Se=0,Re=L.length;Se<Re;Se++){var ut,Fe=L[Se],De=Fe._path,nt=Fe.getValues();if(!(Se&&L[Se-1]._path===De||(he=null,De._closed||(be=de.getValues(De.getLastCurve().getSegment2(),Fe.getSegment1(),null,!I),be[N]!==be[N+6]&&(he=be)),he))){he=nt;for(var dt=De.getLastCurve();dt&&dt!==Fe;){var rt=dt.getValues();if(rt[N]!==rt[N+6]){he=rt;break}dt=dt.getPrevious()}}if(ut=Ie(nt))return ut;if(Se+1===Re||L[Se+1]._path!==De){if(be&&(ut=Ie(be)))return ut;pe&&!se&&!le&&(se=le=De.isClockwise(I)^g?1:-1),X+=se,ee+=le,se=le=0,pe&&(ge=!0,pe=!1),be=null}}return X=i(X),ee=i(ee),{winding:t(X,ee),windingL:X,windingR:ee,quality:Q,onPath:ge}}function C(y,E,g,I,P){var L=[],T=y,N=0;do{if(V=y.getCurve()){var z=V.getLength();L.push({segment:y,curve:V,length:z}),N+=z}y=y.getNext()}while(y&&!y._intersection&&y!==T);for(var q=[.5,.25,.75],H={winding:0,quality:-1},K=0;K<q.length&&H.quality<.5;K++){z=N*q[K];for(var X=0,ee=L.length;X<ee;X++){var se=L[X],le=se.length;if(z<=le){var V,pe=(V=se.curve)._path,ge=pe._parent,Q=ge instanceof Ct?ge:pe,ae=Me.clamp(V.getTimeAt(z),.001,.999),he=V.getPointAtTime(ae),be=i(V.getTangentAtTime(ae).y)<Math.SQRT1_2,_e=null;if(P.subtract&&g){var Se=(Q===E?g:E)._getWinding(he,be,!0);if(Q===E&&Se.winding||Q===g&&!Se.winding){if(Se.quality<1)continue;_e={winding:0,quality:1}}}(_e=_e||D(he,I[pe._id][V.getIndex()],be,!0)).quality>H.quality&&(H=_e);break}z-=le}}for(X=L.length-1;X>=0;X--)L[X].segment._winding=H}function R(y,E){var I,g=[];function P(Re){var Fe;return!(!Re||Re._visited||E&&(!E[(Fe=Re._winding||{}).winding]||E.unite&&2===Fe.winding&&Fe.windingL&&Fe.windingR))}function L(Re){if(Re)for(var Fe=0,De=I.length;Fe<De;Fe++)if(Re===I[Fe])return!0;return!1}function T(Re){for(var Fe=Re._segments,De=0,nt=Fe.length;De<nt;De++)Fe[De]._visited=!0}function N(Re,Fe){var De=Re._intersection,nt=De,ut=[];function dt(rt,je){for(;rt&&rt!==je;){var Ce=rt._segment,It=Ce&&Ce._path;if(It){var lt=Ce.getNext()||It.getFirstSegment(),At=lt._intersection;Ce!==Re&&(L(Ce)||L(lt)||lt&&P(Ce)&&(P(lt)||At&&P(At._segment)))&&ut.push(Ce),Fe&&I.push(Ce)}rt=rt._next}}if(Fe&&(I=[Re]),De){for(dt(De);De&&De._previous;)De=De._previous;dt(De,nt)}return ut}y.sort(function(Re,Fe){var De=Re._intersection,nt=Fe._intersection,ut=!(!De||!De._overlap),rt=Re._path,je=Fe._path;return ut^!(!nt||!nt._overlap)?ut?1:-1:!De^!nt?De?1:-1:rt!==je?rt._id-je._id:Re._index-Fe._index});for(var V=0,z=y.length;V<z;V++){var ee,se,le,q=y[V],H=P(q),G=null,j=!1,K=!0,X=[];if(H&&q._path._overlapsOnly){var pe=q._path,ge=q._intersection._segment._path;pe.compare(ge)&&(pe.getArea()&&g.push(pe.clone(!1)),T(pe),T(ge),H=!1)}for(;H;){var Q=!G,ae=N(q,Q),he=ae.shift(),be=!(j=!Q&&(L(q)||L(he)))&&he;if(Q&&(G=new Ue(ke.NO_INSERT),ee=null),j){(q.isFirst()||q.isLast())&&(K=q._path._closed),q._visited=!0;break}if(be&&ee&&(X.push(ee),ee=null),ee||(be&&ae.push(q),ee={start:G._segments.length,crossings:ae,visited:se=[],handleIn:le}),be&&(q=he),!P(q)){G.removeSegments(ee.start);for(var _e=0,Ie=se.length;_e<Ie;_e++)se[_e]._visited=!1;se.length=0;do{(!(q=ee&&ee.crossings.shift())||!q._path)&&(q=null,(ee=X.pop())&&(se=ee.visited,le=ee.handleIn))}while(ee&&!P(q));if(!q)break}var Se=q.getNext();G.add(new Ee(q._point,le,Se&&q._handleOut)),q._visited=!0,se.push(q),q=Se||q._path.getFirstSegment(),le=Se&&Se._handleIn}j&&(K&&(G.getFirstSegment().setHandleIn(le),G.setClosed(K)),0!==G.getArea()&&g.push(G))}return g}return{_getWinding:function(y,E,g){return D(y,this.getCurves(),E,g)},unite:function(y,E){return f(this,y,"unite",E)},intersect:function(y,E){return f(this,y,"intersect",E)},subtract:function(y,E){return f(this,y,"subtract",E)},exclude:function(y,E){return f(this,y,"exclude",E)},divide:function(y,E){return E&&(0==E.trace||E.stroke)?d(this,y,"divide"):c([this.subtract(y,E),this.intersect(y,E)],!0,this,y,E)},resolveCrossings:function(){var y=this._children,E=y||[this];function g(ee,se){var le=ee&&ee._intersection;return le&&le._overlap&&le._path===se}var I=!1,P=!1,L=this.getIntersections(null,function(ee){return ee.hasOverlap()&&(I=!0)||ee.isCrossing()&&(P=!0)}),T=I&&P&&[];if(L=Lt.expand(L),I)for(var N=m(L,function(ee){return ee.hasOverlap()},T),V=N.length-1;V>=0;V--){var z=N[V],q=z._path,H=z._segment,G=H.getPrevious(),j=H.getNext();g(G,q)&&g(j,q)&&(H.remove(),G._handleOut._set(0,0),j._handleIn._set(0,0),G!==H&&!G.getCurve().hasLength()&&(j._handleIn.set(G._handleIn),G.remove()))}P&&(m(L,I&&function(ee){var se=ee.getCurve(),le=ee.getSegment(),pe=ee._intersection,ge=pe._curve,Q=pe._segment;if(se&&ge&&se._path&&ge._path)return!0;le&&(le._intersection=null),Q&&(Q._intersection=null)},T),T&&_(T),E=R(W.each(E,function(ee){W.push(this,ee._segments)},[])));var X,K=E.length;return K>1&&y?(E!==y&&this.setChildren(E),X=this):1===K&&!y&&(E[0]!==this&&this.setSegments(E[0].removeSegments()),X=this),X||((X=new Ct(ke.NO_INSERT)).addChildren(E),(X=X.reduce()).copyAttributes(this),this.replaceWith(X)),X},reorient:function(y,E){var g=this._children;return g&&g.length?this.setChildren(v(this.removeChildren(),function(I){return!!(y?I:1&I)},E)):E!==w&&this.setClockwise(E),this},getInteriorPoint:function(){var E=this.getBounds().getCenter(!0);if(!this.contains(E)){for(var g=this.getCurves(),I=E.y,P=[],L=[],T=0,N=g.length;T<N;T++){var V=g[T].getValues(),z=V[1],q=V[3],H=V[5],G=V[7];if(I>=e(z,q,H,G)&&I<=t(z,q,H,G))for(var j=de.getMonoCurves(V),K=0,X=j.length;K<X;K++){var ee=j[K],se=ee[1],le=ee[7];if(se!==le&&(I>=se&&I<=le||I>=le&&I<=se)){var pe=I===se?ee[0]:I===le?ee[6]:1===de.solveCubic(ee,1,I,L,0,1)?de.getPoint(ee,L[0]).x:(ee[0]+ee[6])/2;P.push(pe)}}}P.length>1&&(P.sort(function(ge,Q){return ge-Q}),E.x=(P[0]+P[1])/2)}return E}}});var wi=W.extend({_class:"PathFlattener",initialize:function(e,t,i,r,s){var _,o=[],c=[],l=0,f=1/(i||32),d=e._segments,b=d[0];function v(R,y){var E=de.getValues(R,y,s);o.push(E),m(E,R._index,0,1)}function m(R,y,E,g){if(!(g-E>f)||r&&de.isStraight(R)||de.isFlatEnough(R,t||.25)){var L=R[6]-R[0],T=R[7]-R[1],N=Math.sqrt(L*L+T*T);N>0&&c.push({offset:l+=N,curve:R,index:y,time:g})}else{var I=de.subdivide(R,.5),P=(E+g)/2;m(I[0],y,E,P),m(I[1],y,P,g)}}for(var D=1,C=d.length;D<C;D++)v(b,_=d[D]),b=_;e._closed&&v(_||b,d[0]),this.curves=o,this.parts=c,this.length=l,this.index=0},_get:function(e){for(var s,t=this.parts,i=t.length,o=this.index;s=o,o&&!(t[--o].offset<e););for(;s<i;s++){var c=t[s];if(c.offset>=e){this.index=s;var l=t[s-1],f=l&&l.index===c.index?l.time:0,d=l?l.offset:0;return{index:c.index,time:f+(c.time-f)*(e-d)/(c.offset-d)}}}return{index:t[i-1].index,time:1}},drawPart:function(e,t,i){for(var r=this._get(t),s=this._get(i),o=r.index,c=s.index;o<=c;o++){var l=de.getPart(this.curves[o],o===r.index?r.time:0,o===s.index?s.time:1);o===r.index&&e.moveTo(l[0],l[1]),e.bezierCurveTo.apply(e,l.slice(2))}}},W.each(de._evaluateMethods,function(e){this[e+"At"]=function(t){var i=this._get(t);return de[e](this.curves[i.index],i.time)}},{})),oi=W.extend({initialize:function(e){for(var o,t=this.points=[],i=e._segments,r=e._closed,s=0,c=i.length;s<c;s++){var l=i[s].point;(!o||!o.equals(l))&&t.push(o=l.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,i=t.length,r=null;return i>0&&(r=[new Ee(t[0])],i>1&&(this.fitCubic(r,e,0,i-1,t[1].subtract(t[0]),t[i-2].subtract(t[i-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,i,r,s,o){var c=this.points;if(r-i!=1){for(var v,b=this.chordLengthParameterize(i,r),_=Math.max(t,t*t),m=!0,D=0;D<=4;D++){var C=this.generateBezier(i,r,b,s,o),R=this.findMaxError(i,r,C,b);if(R.error<t&&m)return void this.addCurve(e,C);if(v=R.index,R.error>=_)break;m=this.reparameterize(i,r,b,C),_=R.error}var y=c[v-1].subtract(c[v+1]);this.fitCubic(e,t,i,v,s,y),this.fitCubic(e,t,v,r,y.negate(),o)}else{var l=c[i],f=c[r],d=l.getDistance(f)/3;this.addCurve(e,[l,l.add(s.normalize(d)),f.add(o.normalize(d)),f])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new Ee(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,i,r,s){for(var o=1e-12,c=Math.abs,l=this.points,f=l[e],d=l[t],b=[[0,0],[0,0]],_=[0,0],v=0,m=t-e+1;v<m;v++){var D=i[v],C=1-D,R=3*D*C,y=C*C*C,E=R*C,g=R*D,I=D*D*D,P=r.normalize(E),L=s.normalize(g),T=l[e+v].subtract(f.multiply(y+E)).subtract(d.multiply(g+I));b[0][0]+=P.dot(P),b[0][1]+=P.dot(L),b[1][0]=b[0][1],b[1][1]+=L.dot(L),_[0]+=P.dot(T),_[1]+=L.dot(T)}var V,z,N=b[0][0]*b[1][1]-b[1][0]*b[0][1];if(c(N)>o)V=(_[0]*b[1][1]-_[1]*b[0][1])/N,z=(b[0][0]*_[1]-b[1][0]*_[0])/N;else{var G=b[0][0]+b[0][1],j=b[1][0]+b[1][1];V=z=c(G)>o?_[0]/G:c(j)>o?_[1]/j:0}var ee,se,K=d.getDistance(f),X=o*K;if(V<X||z<X)V=z=K/3;else{var le=d.subtract(f);ee=r.normalize(V),se=s.normalize(z),ee.dot(le)-se.dot(le)>K*K&&(V=z=K/3,ee=se=null)}return[f,f.add(ee||r.normalize(V)),d.add(se||s.normalize(z)),d]},reparameterize:function(e,t,i,r){for(var s=e;s<=t;s++)i[s-e]=this.findRoot(r,this.points[s],i[s-e]);s=1;for(var o=i.length;s<o;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(e,t,i){for(var r=[],s=[],o=0;o<=2;o++)r[o]=e[o+1].subtract(e[o]).multiply(3);for(o=0;o<=1;o++)s[o]=r[o+1].subtract(r[o]).multiply(2);var c=this.evaluate(3,e,i),l=this.evaluate(2,r,i),f=this.evaluate(1,s,i),d=c.subtract(t),b=l.dot(l)+d.dot(f);return Me.isMachineZero(b)?i:i-d.dot(l)/b},evaluate:function(e,t,i){for(var r=t.slice(),s=1;s<=e;s++)for(var o=0;o<=e-s;o++)r[o]=r[o].multiply(1-i).add(r[o+1].multiply(i));return r[0]},chordLengthParameterize:function(e,t){for(var i=[0],r=e+1;r<=t;r++)i[r-e]=i[r-e-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var s=t-e;r<=s;r++)i[r]/=i[s];return i},findMaxError:function(e,t,i,r){for(var s=Math.floor((t-e+1)/2),o=0,c=e+1;c<t;c++){var f=this.evaluate(3,i,r[c-e]).subtract(this.points[c]),d=f.x*f.x+f.y*f.y;d>=o&&(o=d,s=c)}return{error:o,index:s}}}),Kt=ke.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&W.isPlainObject(t)&&t.x===w&&t.y===w;this._initialize(i&&t,!i&&J.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),xi=Kt.extend({_class:"PointText",initialize:function(){Kt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new Rt(e.x,e.y,this,"setPoint")},setPoint:function(){var e=J.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,i){if(this._content){this._setStyles(e,t,i);var r=this._lines,s=this._style,o=s.hasFill(),c=s.hasStroke(),l=s.getLeading(),f=e.shadowColor;e.font=s.getFontStyle(),e.textAlign=s.getJustification();for(var d=0,b=r.length;d<b;d++){e.shadowColor=f;var _=r[d];o&&(e.fillText(_,0,0),e.shadowColor="rgba(0,0,0,0)"),c&&e.strokeText(_,0,0),e.translate(0,l)}}},_getBounds:function(e,t){var i=this._style,r=this._lines,s=r.length,o=i.getJustification(),c=i.getLeading(),l=this.getView().getTextWidth(i.getFontStyle(),r),f=0;"left"!==o&&(f-=l/("center"===o?2:1));var d=new xe(f,s?-.75*c:0,l,s*c);return e?e._transformBounds(d,d):d}}),st=W.extend(new function(){var r,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},i={transparent:[0,0,0,0]};function s(l){var b,f=l.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||l.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),d="rgb";if(f){var _=f[4]?4:3;b=new Array(_);for(var v=0;v<_;v++){var m=f[v+1];b[v]=parseInt(1==m.length?m+m:m,16)/255}}else if(f=l.match(/^(rgb|hsl)a?\((.*)\)$/)){d=f[1],b=f[2].trim().split(/[,\s]+/g);for(var D="hsl"===d,C=(v=0,Math.min(b.length,4));v<C;v++){var R=b[v];if(m=parseFloat(R),D)if(0===v){var y=R.match(/([a-z]*)$/)[1];m*={turn:360,rad:180/Math.PI,grad:.9}[y]||1}else v<3&&(m/=100);else v<3&&(m/=/%$/.test(R)?100:255);b[v]=m}}else{var E=i[l];if(!E)if(qe){r||((r=He.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=l,r.fillRect(0,0,1,1);var g=r.getImageData(0,0,1,1).data;E=i[l]=[g[0]/255,g[1]/255,g[2]/255]}else E=[0,0,0];b=E.slice()}return[d,b]}var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(l,f,d){var b=Math.max(l,f,d),v=b-Math.min(l,f,d);return[0===v?0:60*(b==l?(f-d)/v+(f<d?6:0):b==f?(d-l)/v+2:(l-f)/v+4),0===b?0:v/b,b]},"hsb-rgb":function(l,f,d){var _,b=(l=(l/60%6+6)%6)-(_=Math.floor(l)),v=[d,d*(1-f),d*(1-f*b),d*(1-f*(1-b))];return[v[(_=o[_])[0]],v[_[1]],v[_[2]]]},"rgb-hsl":function(l,f,d){var b=Math.max(l,f,d),_=Math.min(l,f,d),v=b-_,m=0===v,C=(b+_)/2;return[m?0:60*(b==l?(f-d)/v+(f<d?6:0):b==f?(d-l)/v+2:(l-f)/v+4),m?0:C<.5?v/(b+_):v/(2-b-_),C]},"hsl-rgb":function(l,f,d){if(0===f)return[d,d,d];for(var b=[(l=(l/360%1+1)%1)+1/3,l,l-1/3],_=d<.5?d*(1+f):d+f-d*f,v=2*d-_,m=[],D=0;D<3;D++){var C=b[D];C<0&&(C+=1),C>1&&(C-=1),m[D]=6*C<1?v+6*(_-v)*C:2*C<1?_:3*C<2?v+(_-v)*(2/3-C)*6:v}return m},"rgb-gray":function(l,f,d){return[.2989*l+.587*f+.114*d]},"gray-rgb":function(l){return[l,l,l]},"gray-hsb":function(l){return[0,0,l]},"gray-hsl":function(l){return[0,0,l]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return W.each(e,function(l,f){t[f]=[],W.each(l,function(d,b){var _=W.capitalize(d),v=/^(hue|saturation)$/.test(d),m=t[f][b]="gradient"===f?"gradient"===d?function(D){var C=this._components[0];return C!==(D=Yt.read(Array.isArray(D)?D:arguments,0,{readNull:!0}))&&(C&&C._removeOwner(this),D&&D._addOwner(this)),D}:function(){return J.read(arguments,0,{readNull:"highlight"===d,clone:!0})}:function(D){return null==D||isNaN(D)?0:+D};this["get"+_]=function(){return this._type===f||v&&/^hs[bl]$/.test(this._type)?this._components[b]:this._convert(f)[b]},this["set"+_]=function(D){this._type!==f&&!(v&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(f),this._properties=e[f],this._type=f),this._components[b]=m.call(this,D),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function l(f){var v,m,D,C,d=arguments,b=this.__read,_=0;Array.isArray(f)&&(f=(d=f)[0]);var R=null!=f&&typeof f;if("string"===R&&f in e&&(v=f,f=d[1],Array.isArray(f)?(m=f,D=d[2]):(b&&(_=1),d=W.slice(d,1),R=typeof f)),!m){if(C="number"===R?d:"object"===R&&null!=f.length?f:null){v||(v=C.length>=3?"rgb":"gray");var y=e[v].length;D=C[y],b&&(_+=C===arguments?y+(null!=D?1:0):1),C.length>y&&(C=W.slice(C,0,y))}else if("string"===R){var E=s(f);v=E[0],4===(m=E[1]).length&&(D=m[3],m.length--)}else if("object"===R)if(f.constructor===l){if(v=f._type,m=f._components.slice(),D=f._alpha,"gradient"===v)for(var g=1,I=m.length;g<I;g++){var P=m[g];P&&(m[g]=P.clone())}}else if(f.constructor===Yt)v="gradient",C=d;else{var L=e[v="hue"in f?"lightness"in f?"hsl":"hsb":"gradient"in f||"stops"in f||"radial"in f?"gradient":"gray"in f?"gray":"rgb"],T=t[v];for(this._components=m=[],g=0,I=L.length;g<I;g++)null==(N=f[L[g]])&&!g&&"gradient"===v&&"stops"in f&&(N={stops:f.stops,radial:f.radial}),null!=(N=T[g].call(this,N))&&(m[g]=N);D=f.alpha}b&&v&&(_=1)}if(this._type=v||"rgb",!m)for(this._components=m=[],g=0,I=(T=t[this._type]).length;g<I;g++){var N;null!=(N=T[g].call(this,C&&C[g]))&&(m[g]=N)}return this._components=m,this._properties=e[this._type],this._alpha=D,b&&(this.__read=_),this},set:"#initialize",_serialize:function(l,f){var d=this.getComponents();return W.serialize(/^(gray|rgb)$/.test(this._type)?d:[this._type].concat(d),l,!0,f)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(l){var f;return this._type===l?this._components.slice():(f=c[this._type+"-"+l])?f.apply(this,this._components):c["rgb-"+l].apply(this,c[this._type+"-rgb"].apply(this,this._components))},convert:function(l){return new st(l,this._convert(l),this._alpha)},getType:function(){return this._type},setType:function(l){this._components=this._convert(l),this._properties=e[l],this._type=l},getComponents:function(){var l=this._components.slice();return null!=this._alpha&&l.push(this._alpha),l},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(l){this._alpha=null==l?null:Math.min(Math.max(l,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(l){var f=W.isPlainValue(l,!0)?st.read(arguments):l;return f===this||f&&this._class===f._class&&this._type===f._type&&this.getAlpha()===f.getAlpha()&&W.equals(this._components,f._components)||!1},toString:function(){for(var l=this._properties,f=[],d="gradient"===this._type,b=ye.instance,_=0,v=l.length;_<v;_++){var m=this._components[_];null!=m&&f.push(l[_]+": "+(d?m:b.number(m)))}return null!=this._alpha&&f.push("alpha: "+b.number(this._alpha)),"{ "+f.join(", ")+" }"},toCSS:function(l){var f=this._convert("rgb"),d=l||null==this._alpha?1:this._alpha;function b(_){return Math.round(255*(_<0?0:_>1?1:_))}return f=[b(f[0]),b(f[1]),b(f[2])],d<1&&f.push(d<0?0:d),l?"#"+((1<<24)+(f[0]<<16)+(f[1]<<8)+f[2]).toString(16).slice(1):(4==f.length?"rgba(":"rgb(")+f.join(",")+")"},toCanvasStyle:function(l,f){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var R,d=this._components,b=d[0],_=b._stops,v=d[1],m=d[2],D=d[3],C=f&&f.inverted();if(C&&(v=C._transformPoint(v),m=C._transformPoint(m),D&&(D=C._transformPoint(D))),b._radial){var y=m.getDistance(v);if(D){var E=D.subtract(v);E.getLength()>y&&(D=v.add(E.normalize(y-.1)))}var g=D||v;R=l.createRadialGradient(g.x,g.y,0,v.x,v.y,y)}else R=l.createLinearGradient(v.x,v.y,m.x,m.y);for(var I=0,P=_.length;I<P;I++){var L=_[I];R.addColorStop(L._offset??I/(P-1),L._color.toCanvasStyle())}return this._canvasStyle=R},transform:function(l){if("gradient"===this._type){for(var f=this._components,d=1,b=f.length;d<b;d++){var _=f[d];l._transformPoint(_,_,!0)}this._changed()}},statics:{_types:e,random:function(){var l=Math.random;return new st(l(),l(),l())},_setOwner:function(l,f,d){return l&&(l._owner&&f&&l._owner!==f&&(l=l.clone()),!l._owner^!f&&(l._owner=f||null,l._setter=d||null)),l}}})},new function(){return W.each({add:function(t,i){return t+i},subtract:function(t,i){return t-i},multiply:function(t,i){return t*i},divide:function(t,i){return t/i}},function(t,i){this[i]=function(r){r=st.read(arguments);for(var s=this._type,o=this._components,c=r._convert(s),l=0,f=o.length;l<f;l++)c[l]=t(o[l],c[l]);return new st(s,c,null!=this._alpha?t(this._alpha,r.getAlpha()):null)}},{})}),Yt=W.extend({_class:"Gradient",initialize:function(t,i){this._id=ot.get(),t&&W.isPlainObject(t)&&(this.set(t),t=i=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof i&&"radial"===i||i||!1)},_serialize:function(e,t){return t.add(this,function(){return W.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=w))},clone:function(){for(var e=[],t=0,i=this._stops.length;t<i;t++)e[t]=this._stops[t].clone();return new Yt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var i=0,r=t.length;i<r;i++)t[i]._owner=w;for(i=0,r=(t=this._stops=fi.readList(e,0,{clone:!0})).length;i<r;i++)t[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,i=e._stops,r=t.length;if(r===i.length){for(var s=0;s<r;s++)if(!t[s].equals(i[s]))return!1;return!0}}return!1}}),fi=W.extend({_class:"GradientStop",initialize:function(t,i){var r=t,s=i;"object"==typeof t&&i===w&&(Array.isArray(t)&&"number"!=typeof t[0]?(r=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,s=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new fi(this._color.clone(),this._offset)},_serialize:function(e,t){var i=this._color,r=this._offset;return W.serialize(null==r?[i]:[i,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){st._setOwner(this._color,null),this._color=st._setOwner(st.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),ui=W.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new J,selectedColor:null},t=W.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=W.set({},t,{fillColor:new st}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(l,f,d){this._values={},this._owner=f,this._project=f&&f._project||d||Ve.project,this._defaults=!f||f instanceof Ft?t:f instanceof Kt?i:e,l&&this.set(l)}};return W.each(t,function(c,l){var f=/Color$/.test(l),d="shadowOffset"===l,b=W.capitalize(l),_=r[l],v="set"+b,m="get"+b;o[v]=function(D){var C=this._owner,R=C&&C._children,y=R&&R.length>0&&!(C instanceof Ct);if(y)for(var E=0,g=R.length;E<g;E++)R[E]._style[v](D);if(("selectedColor"===l||!y)&&l in this._defaults){var I=this._values[l];I!==D&&(f&&(I&&(st._setOwner(I,null),I._canvasStyle=null),D&&D.constructor===st&&(D=st._setOwner(D,C,y&&v))),this._values[l]=D,C&&C._changed(_||129))}},o[m]=function(D){var C=this._owner,R=C&&C._children,y=R&&R.length>0&&!(C instanceof Ct);if(y&&!D)for(var g=0,I=R.length;g<I;g++){var P=R[g]._style[m]();if(g){if(!W.equals(E,P))return w}else E=P}else if(l in this._defaults){var E;if((E=this._values[l])===w)(E=this._defaults[l])&&E.clone&&(E=E.clone());else{var L=f?st:d?J:null;L&&(!E||E.constructor!==L)&&(this._values[l]=E=L.read([E],0,{readNull:!0,clone:!0}))}}return E&&f&&(E=st._setOwner(E,C,y&&v)),E},s[m]=function(D){return this._style[m](D)},s[v]=function(D){this._style[v](D)}}),W.each({Font:"FontFamily",WindingRule:"FillRule"},function(c,l){var f="get"+l,d="set"+l;o[f]=s[f]="#get"+c,o[d]=s[d]="#set"+c}),ke.inject(s),o},{set:function(e){var t=e instanceof ui,i=t?e._values:e;if(i)for(var r in i)if(r in this._defaults){var s=i[r];this[r]=s&&t&&s.clone?s.clone():s}},equals:function(e){function t(i,r,s){var o=i._values,c=r._values,l=r._defaults;for(var f in o){var b=c[f];if(!(s&&f in c||W.equals(o[f],b===w?l[f]:b)))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),t??1.2*i}}),et=new function(){function e(t,i,r,s){for(var o=["","webkit","moz","Moz","ms","o"],c=i[0].toUpperCase()+i.substring(1),l=0;l<6;l++){var f=o[l],d=f?f+c:i;if(d in t){if(!r)return t[d];t[d]=s;break}}}return{getStyles:function(t){var i=t&&9!==t.nodeType?t.ownerDocument:t,r=i&&i.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,i){var c,r=t.ownerDocument,s=r.body,o=r.documentElement;try{c=t.getBoundingClientRect()}catch{c={left:0,top:0,width:0,height:0}}var l=c.left-(o.clientLeft||s.clientLeft||0),f=c.top-(o.clientTop||s.clientTop||0);if(!i){var d=r.defaultView;l+=d.pageXOffset||o.scrollLeft||s.scrollLeft,f+=d.pageYOffset||o.scrollTop||s.scrollTop}return new xe(l,f,c.width,c.height)},getViewportBounds:function(t){var i=t.ownerDocument,r=i.defaultView,s=i.documentElement;return new xe(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(t,i){return et.getBounds(t,i).getPoint()},getSize:function(t){return et.getBounds(t,!0).getSize()},isInvisible:function(t){return et.getSize(t).equals(new fe(0,0))},isInView:function(t){return!et.isInvisible(t)&&et.getViewportBounds(t).intersects(et.getBounds(t,!0))},isInserted:function(t){return We.body.contains(t)},getPrefixed:function(t,i){return t&&e(t,i)},setPrefixed:function(t,i,r){if("object"==typeof i)for(var s in i)e(t,s,!0,i[s]);else e(t,i,!0,r)}}},tt={add:function(e,t){if(e)for(var i in t)for(var r=t[i],s=i.split(/[\s,]+/g),o=0,c=s.length;o<c;o++){var l=s[o];e.addEventListener(l,r,e===We&&("touchstart"===l||"touchmove"===l)&&{passive:!1})}},remove:function(e,t){if(e)for(var i in t)for(var r=t[i],s=i.split(/[\s,]+/g),o=0,c=s.length;o<c;o++)e.removeEventListener(s[o],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new J(t.pageX||t.clientX+We.documentElement.scrollLeft,t.pageY||t.clientY+We.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return tt.getPoint(e).subtract(et.getOffset(t||tt.getTarget(e)))}};tt.requestAnimationFrame=new function(){var r,e=et.getPrefixed(qe,"requestAnimationFrame"),t=!1,i=[];function s(){var o=i;i=[];for(var c=0,l=o.length;c<l;c++)o[c]();(t=e&&i.length)&&e(s)}return function(o){i.push(o),e?t||(e(s),t=!0):r||(r=setInterval(s,16.666666666666668))}};var Qe=W.extend(ci,{_class:"View",initialize:function e(t,i){function r(_){return i[_]||parseInt(i.getAttribute(_),10)}function s(){var _=et.getSize(i);return _.isNaN()||_.isZero()?new fe(r("width"),r("height")):_}var o;if(qe&&i){this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="paper-view-"+e._id++),tt.add(i,this._viewEvents);var c="none";if(et.setPrefixed(i.style,{userDrag:c,userSelect:c,touchCallout:c,contentZooming:c,tapHighlightColor:"rgba(0,0,0,0)"}),xt.hasAttribute(i,"resize")){var l=this;tt.add(qe,this._windowEvents={resize:function(){l.setViewSize(s())}})}if(o=s(),xt.hasAttribute(i,"stats")&&typeof Stats<"u"){this._stats=new Stats;var f=this._stats.domElement,d=f.style,b=et.getOffset(i);d.position="absolute",d.left=b.x+"px",d.top=b.y+"px",We.body.appendChild(f)}}else o=new fe(i),i=null;this._project=t,this._scope=t._scope,this._element=i,this._pixelRatio||(this._pixelRatio=qe&&qe.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new Ze)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ve.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Qe._focused===this&&(Qe._focused=null),Qe._views.splice(Qe._views.indexOf(this),1),delete Qe._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),tt.remove(this._element,this._viewEvents),tt.remove(qe,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:W.each(ke._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;tt.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!et.getPrefixed(We,"hidden")||"true"===xt.getAttribute(t,"keepalive"))&&et.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ve=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new W({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var i=this._frameItems;t?(i[e._id]={item:e,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[e._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var i=this._frameItems[t];i.item.emit("frame",new W(e,{time:i.time+=e.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=w},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new O(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=fe.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var i=this._element;i&&(i.width!==e&&(i.width=e),i.height!==t&&(i.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new xe(new J,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return et.isInView(this._element)},isInserted:function(){return et.isInserted(this._element)},getPixelSize:function(e){var i,t=this._element;if(t){var r=t.parentNode,s=We.createElement("div");s.style.fontSize=e,r.appendChild(s),i=parseFloat(et.getStyles(s).fontSize),r.removeChild(s)}else i=parseFloat(i);return i},getTextWidth:function(e,t){return 0}},W.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var i=arguments,r=(t?W:J).read(i),s=J.read(i,0,{readNull:!0});return this.transform((new Ze)[e](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new Ze;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=J.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new Ze).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new Rt(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=J.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(J.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(J.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(J.read(arguments))},getEventPoint:function(e){return this.viewToProject(tt.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return We&&"string"==typeof t&&(t=We.getElementById(t)),new(qe?Si:Qe)(e,t)}}},new function(){if(qe){var e,t,f,d,b,i=!1,r=!1,l=qe.navigator;l.pointerEnabled||l.msPointerEnabled?(f="pointerdown MSPointerDown",d="pointermove MSPointerMove",b="pointerup pointercancel MSPointerUp MSPointerCancel"):(f="touchstart",d="touchmove",b="touchend touchcancel","ontouchstart"in qe&&l.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(f+=" mousedown",d+=" mousemove",b+=" mouseup"));var _={},v={mouseout:function(G){var j=Qe._focused,K=tt.getRelatedTarget(G);if(j&&(!K||"HTML"===K.nodeName)){var X=tt.getOffset(G,j._element),ee=X.x,se=Math.abs,le=se(ee),ge=le-(1<<25);X.x=se(ge)<le?ge*(ee<0?-1:1):ee,c(j,G,j.viewToProject(X))}},scroll:o};_[f]=function(G){var j=Qe._focused=s(G);i||(i=!0,j._handleMouseEvent("mousedown",G))},v[d]=function(G){var j=Qe._focused;if(!r){var K=s(G);K?j!==K&&(j&&c(j,G),e||(e=j),j=Qe._focused=t=K):t&&t===j&&(e&&!e.isInserted()&&(e=null),j=Qe._focused=e,e=null,o())}j&&c(j,G)},v[f]=function(){r=!0},v[b]=function(G){var j=Qe._focused;j&&i&&j._handleMouseEvent("mouseup",G),r=i=!1},tt.add(We,v),tt.add(qe,{load:o});var E,g,I,P,L,T,N,V,m=!1,D=!1,C={doubleclick:"click",mousedrag:"mousemove"},R=!1,H={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:_,_handleMouseEvent:function(G,j,K){var X=this._itemEvents,ee=X.native[G],se="mousemove"===G,le=this._scope.tool,pe=this;function ge(Se){return X.virtual[Se]||pe.responds(Se)||le&&le.responds(Se)}se&&i&&ge("mousedrag")&&(G="mousedrag"),K||(K=this.getEventPoint(j));var Q=this.getBounds().contains(K),ae=ee&&Q&&pe._project.hitTest(K,{tolerance:0,fill:!0,stroke:!0}),he=ae&&ae.item||null,be=!1,_e={};if(_e[G.substr(5)]=!0,ee&&he!==P&&(P&&z(P,null,"mouseleave",j,K),he&&z(he,null,"mouseenter",j,K),P=he),R^Q&&(z(this,null,Q?"mouseenter":"mouseleave",j,K),be=!0),(Q||_e.drag)&&!K.equals(g)&&(q(this,he,se?G:"mousemove",j,K,g),be=!0),R=Q,_e.down&&Q||_e.up&&E){if(q(this,he,G,j,K,E),_e.down){if(V=he===T&&Date.now()-N<300,I=T=he,!D&&he){for(var Ie=he;Ie&&!Ie.responds("mousedrag");)Ie=Ie._parent;Ie&&(L=he)}E=K}else _e.up&&(!D&&he===I&&(N=Date.now(),q(this,he,V?"doubleclick":"click",j,K,E),V=!1),I=L=null);R=!1,be=!0}g=K,be&&le&&(m=le._handleMouseEvent(G,j,K,_e)||m),!1!==j.cancelable&&(m&&!_e.move||_e.down&&ge("mouseup"))&&j.preventDefault()},_handleKeyEvent:function(G,j,K,X){var le,ee=this._scope,se=ee.tool;function pe(ge){ge.responds(G)&&(Ve=ee,ge.emit(G,le=le||new Ci(G,j,K,X)))}this.isVisible()&&(pe(this),se&&se.responds(G)&&pe(se))},_countItemEvent:function(G,j){var K=this._itemEvents,X=K.native,ee=K.virtual;for(var se in H)X[se]=(X[se]||0)+(H[se][G]||0)*j;ee[G]=(ee[G]||0)+j},statics:{updateFocus:o,_resetState:function(){i=r=m=R=!1,e=t=E=g=I=P=L=T=N=V=null}}}}function s(G){var j=tt.getTarget(G);return j.getAttribute&&Qe._viewsById[j.getAttribute("id")]}function o(){var G=Qe._focused;if(!G||!G.isVisible())for(var j=0,K=Qe._views.length;j<K;j++)if((G=Qe._views[j]).isVisible()){Qe._focused=t=G;break}}function c(G,j,K){G._handleMouseEvent("mousemove",j,K)}function z(G,j,K,X,ee,se,le){var ge,pe=!1;function Q(ae,he){if(ae.responds(he)){if(ge||(ge=new Li(he,X,ee,j||ae,se?ee.subtract(se):null)),ae.emit(he,ge)&&(m=!0,ge.prevented&&(D=!0),ge.stopped))return pe=!0}else{var be=C[he];if(be)return Q(ae,be)}}for(;G&&G!==le&&!Q(G,K);)G=G._parent;return pe}function q(G,j,K,X,ee,se){return G._project.removeOn(K),D=m=!1,L&&z(L,null,K,X,ee,se)||j&&j!==L&&!j.isDescendant(L)&&z(j,null,"mousedrag"===K?"mousemove":K,X,ee,se,L)||z(G,L||j||G,K,X,ee,se)}}),Si=Qe.extend({_class:"CanvasView",initialize:function(t,i){if(!(i instanceof qe.HTMLCanvasElement)){var r=fe.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+W.slice(arguments,1));i=He.getCanvas(r)}var s=this._context=i.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(xt.getAttribute(i,"hidpi"))){var o=qe.devicePixelRatio||1,c=et.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=o/c}Qe.call(this,t,i),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,i){var r=this._pixelRatio;if(e.base.call(this,t*r,i*r),1!==r){var s=this._element,o=this._context;if(!xt.hasAttribute(s,"resize")){var c=s.style;c.width=t+"px",c.height=i+"px"}o.restore(),o.save(),o.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var r,i=Ve.agent;if(i&&i.firefox)r=e.base.call(this,t);else{var s=this._context,o=s.font;s.font=t+" serif",r=parseFloat(s.font),s.font=o}return r},getTextWidth:function(e,t){var i=this._context,r=i.font,s=0;i.font=e;for(var o=0,c=t.length;o<c;o++)s=Math.max(s,i.measureText(t[o]).width);return i.font=r,s},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,i=this._viewSize;return t.clearRect(0,0,i.width+1,i.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Jt=W.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Vt.modifiers}}),Ci=Jt.extend({_class:"KeyEvent",initialize:function(t,i,r,s){this.type=t,this.event=i,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Vt=new function(){var s,o,e={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"\t",space:" ",enter:"\r"},i={},r={},c=new W({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var d=Ve&&Ve.agent;return d&&d.mac?this.meta:this.control}}});function l(d){var b=d.key||d.keyIdentifier;return b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):"Unidentified"===b||b===w?String.fromCharCode(d.keyCode):b,e[b]||(b.length>1?W.hyphenate(b):b.toLowerCase())}function f(d,b,_,v){var C,D=Qe._focused;if(i[b]=d,d?r[b]=_:delete r[b],b.length>1&&(C=W.camelize(b))in c){c[C]=d;var R=Ve&&Ve.agent;if("meta"===C&&R&&R.mac)if(d)s={};else{for(var y in s)y in r&&f(!1,y,s[y],v);s=null}}else d&&s&&(s[b]=_);D&&D._handleKeyEvent(d?"keydown":"keyup",v,b,_)}return tt.add(We,{keydown:function(d){var b=l(d),_=Ve&&Ve.agent;b.length>1||_&&_.chrome&&(d.altKey||_.mac&&d.metaKey||!_.mac&&d.ctrlKey)?f(!0,b,t[b]||(b.length>1?"":b),d):o=b},keypress:function(d){if(o){var b=l(d),_=d.charCode,v=_>=32?String.fromCharCode(_):b.length>1?"":b;b!==o&&(b=v.toLowerCase()),f(!0,b,v,d),o=null}},keyup:function(d){var b=l(d);b in r&&f(!1,b,r[b],d)}}),tt.add(qe,{blur:function(d){for(var b in r)f(!1,b,r[b],d)}}),{modifiers:c,isDown:function(d){return!!i[d]}}},Li=Jt.extend({_class:"MouseEvent",initialize:function(t,i,r,s,o){this.type=t,this.event=i,this.point=r,this.target=s,this.delta=o},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ki=Jt.extend({_class:"ToolEvent",_item:null,initialize:function(t,i,r){this.tool=t,this.type=i,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,i=t._parent;/^(Group|CompoundPath)$/.test(i._class);)t=i,i=i._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Ii=$e.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){$e.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,i,r){Ve=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var s=r.move||r.drag,o=this.responds(e),c=this.minDistance,l=this.maxDistance,f=!1,d=this;function b(v,m){var D=i,C=s?d._point:d._downPoint||D;if(s){if(d._moveCount>=0&&D.equals(C))return!1;if(C&&(null!=v||null!=m)){var R=D.subtract(C),y=R.getLength();if(y<(v||0))return!1;m&&(D=C.add(R.normalize(Math.min(y,m))))}d._moveCount++}return d._point=D,d._lastPoint=C||D,r.down&&(d._moveCount=-1,d._downPoint=D,d._downCount++),!0}function _(){o&&(f=d.emit(e,new ki(d,e,t))||f)}if(r.down)b(),_();else if(r.up)b(null,l),_();else if(o)for(;b(c,l);)_();return f}}),it=W.extend(ci,{_class:"Tween",statics:{easings:new W({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,i,r,s,o,c){this.object=t;var l=typeof o,f="function"===l;this.type=f?l:"string"===l?o:"linear",this.easing=f?o:e.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var d=i||r;this._keys=d?Object.keys(d):[],this._parsedKeys=this._parseKeys(this._keys),this._from=d&&this._getState(i),this._to=d&&this._getState(r),!1!==c&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),i=this._keys,r=function(b){return"function"==typeof b?b(t,e):b},s=0,o=i&&i.length;s<o;s++){var c=i[s],l=r(this._from[c]),f=r(this._to[c]),d=l&&f&&l.__add&&f.__add?f.__subtract(l).__multiply(t).__add(l):(f-l)*t+l;this._setProperty(this._parsedKeys[c],d)}this.responds("update")&&this.emit("update",new W({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,i=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(i)},_getState:function(e){for(var t=this._keys,i={},r=0,s=t.length;r<s;r++){var f,o=t[r],c=this._parsedKeys[o],l=this._getProperty(c);if(e){var d=this._resolveValue(l,e[o]);this._setProperty(c,d),f=(f=this._getProperty(c))&&f.clone?f.clone():f,this._setProperty(c,l)}else f=l&&l.clone?l.clone():l;i[o]=f}return i},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var i=t[0];return i&&i.match&&i.match(/^[+\-\*\/]=/)?this._calculate(e,i[0],t[1]):t}if("string"==typeof t){var r=t.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],s)}}}return t},_calculate:function(e,t,i){return Ve.PaperScript.calculateBinary(e,t,i)},_parseKeys:function(e){for(var t={},i=0,r=e.length;i<r;i++){var s=e[i],o=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[s]=o.split("/")}return t},_getProperty:function(e,t){for(var i=this.object,r=0,s=e.length-(t||0);r<s&&i;r++)i=i[e[r]];return i},_setProperty:function(e,t){var i=this._getProperty(e,1);i&&(i[e[e.length-1]]=t)}}),kt_request=function(e){var t=new Xe.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,W.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var i=t.status;0===i||200===i?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var i=t.status,r='Could not load "'+e.url+'" (Status: '+i+")";if(!e.onError)throw new Error(r);e.onError(r,i)},t.send(null)},He=W.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,i){if(!qe)return null;var r,s=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=We.createElement("canvas"),s=!1);var o=r.getContext("2d",i||{});if(!o)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?s&&o.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),o.save(),r},getContext:function(e,t,i){var r=this.getCanvas(e,t,i);return r?r.getContext("2d",i||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},Mi=new function(){var r,s,o,c,l,f,d,b,_,v,m,e=Math.min,t=Math.max,i=Math.abs;function D(P,L,T){return.2989*P+.587*L+.114*T}function C(P,L,T,z){var V=z-D(P,L,T),q=(z=D(_=P+V,v=L+V,m=T+V),e(_,v,m)),H=t(_,v,m);if(q<0){var G=z-q;_=z+(_-z)*z/G,v=z+(v-z)*z/G,m=z+(m-z)*z/G}if(H>255){var j=255-z,K=H-z;_=z+(_-z)*j/K,v=z+(v-z)*j/K,m=z+(m-z)*j/K}}function R(P,L,T){return t(P,L,T)-e(P,L,T)}function y(P,L,T,N){var H,V=[P,L,T],z=t(P,L,T),q=e(P,L,T);H=0===e(q=q===P?0:q===L?1:2,z=z===P?0:z===L?1:2)?1===t(q,z)?2:1:0,V[z]>V[q]?(V[H]=(V[H]-V[q])*N/(V[z]-V[q]),V[z]=N):V[H]=V[z]=0,V[q]=0,_=V[0],v=V[1],m=V[2]}var E={multiply:function(){_=l*r/255,v=f*s/255,m=d*o/255},screen:function(){_=l+r-l*r/255,v=f+s-f*s/255,m=d+o-d*o/255},overlay:function(){_=l<128?2*l*r/255:255-2*(255-l)*(255-r)/255,v=f<128?2*f*s/255:255-2*(255-f)*(255-s)/255,m=d<128?2*d*o/255:255-2*(255-d)*(255-o)/255},"soft-light":function(){var P=r*l/255;_=P+l*(255-(255-l)*(255-r)/255-P)/255,v=(P=s*f/255)+f*(255-(255-f)*(255-s)/255-P)/255,m=(P=o*d/255)+d*(255-(255-d)*(255-o)/255-P)/255},"hard-light":function(){_=r<128?2*r*l/255:255-2*(255-r)*(255-l)/255,v=s<128?2*s*f/255:255-2*(255-s)*(255-f)/255,m=o<128?2*o*d/255:255-2*(255-o)*(255-d)/255},"color-dodge":function(){_=0===l?0:255===r?255:e(255,255*l/(255-r)),v=0===f?0:255===s?255:e(255,255*f/(255-s)),m=0===d?0:255===o?255:e(255,255*d/(255-o))},"color-burn":function(){_=255===l?255:0===r?0:t(0,255-255*(255-l)/r),v=255===f?255:0===s?0:t(0,255-255*(255-f)/s),m=255===d?255:0===o?0:t(0,255-255*(255-d)/o)},darken:function(){_=l<r?l:r,v=f<s?f:s,m=d<o?d:o},lighten:function(){_=l>r?l:r,v=f>s?f:s,m=d>o?d:o},difference:function(){(_=l-r)<0&&(_=-_),(v=f-s)<0&&(v=-v),(m=d-o)<0&&(m=-m)},exclusion:function(){_=l+r*(255-l-l)/255,v=f+s*(255-f-f)/255,m=d+o*(255-d-d)/255},hue:function(){y(r,s,o,R(l,f,d)),C(_,v,m,D(l,f,d))},saturation:function(){y(l,f,d,R(r,s,o)),C(_,v,m,D(l,f,d))},luminosity:function(){C(l,f,d,D(r,s,o))},color:function(){C(r,s,o,D(l,f,d))},add:function(){_=e(l+r,255),v=e(f+s,255),m=e(d+o,255)},subtract:function(){_=t(l-r,0),v=t(f-s,0),m=t(d-o,0)},average:function(){_=(l+r)/2,v=(f+s)/2,m=(d+o)/2},negation:function(){_=255-i(255-r-l),v=255-i(255-s-f),m=255-i(255-o-d)}},g=this.nativeModes=W.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(P){this[P]=!0},{}),I=He.getContext(1,1,{willReadFrequently:!0});I&&(W.each(E,function(P,L){var T="darken"===L,N=!1;I.save();try{I.fillStyle=T?"#300":"#a00",I.fillRect(0,0,1,1),I.globalCompositeOperation=L,I.globalCompositeOperation===L&&(I.fillStyle=T?"#a00":"#300",I.fillRect(0,0,1,1),N=I.getImageData(0,0,1,1).data[0]!==T?170:51)}catch{}I.restore(),g[L]=N}),He.release(I)),this.process=function(P,L,T,N,V){var z=L.canvas,q="normal"===P;if(q||g[P])T.save(),T.setTransform(1,0,0,1,0,0),T.globalAlpha=N,q||(T.globalCompositeOperation=P),T.drawImage(z,V.x,V.y),T.restore();else{var H=E[P];if(!H)return;for(var G=T.getImageData(V.x,V.y,z.width,z.height),j=G.data,K=L.getImageData(0,0,z.width,z.height).data,X=0,ee=j.length;X<ee;X+=4){r=K[X],l=j[X],s=K[X+1],f=j[X+1],o=K[X+2],d=j[X+2],c=K[X+3],b=j[X+3],H();var se=c*N/255,le=1-se;j[X]=se*_+le*l,j[X+1]=se*v+le*f,j[X+2]=se*m+le*d,j[X+3]=c*N+le*b}T.putImageData(G,V.x,V.y)}}},Ke=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",r={href:i,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function c(l,f,d){for(var b in f){var _=f[b],v=r[b];"number"==typeof _&&d&&(_=d.number(_)),v?l.setAttributeNS(v,b,_):l.setAttribute(b,_)}return l}return{svg:e,xmlns:t,xlink:i,create:function s(l,f,d){return c(We.createElementNS(e,l),f,d)},get:function o(l,f){var d=r[f],b=d?l.getAttributeNS(d,f):l.getAttribute(f);return"null"===b?null:b},set:c}},Te=W.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Zt||e instanceof St||e instanceof Kt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var i=W.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&W.each(r,function(s,o){this[s]=o},{}),exportFilter:e[3],get:"get"+i,set:"set"+i}},{});new function(){var e;function t(E,g,I){var T,P=new W,L=E.getTranslation();if(g&&(E.isInvertible()?(T=(E=E._shiftless())._inverseTransform(L),L=null):T=new J,P[I?"cx":"x"]=T.x,P[I?"cy":"y"]=T.y),!E.isIdentity()){var N=E.decompose();if(N){var V=[],z=N.rotation,q=N.scaling,H=N.skewing;L&&!L.isZero()&&V.push("translate("+e.point(L)+")"),z&&V.push("rotate("+e.number(z)+")"),(!Me.isZero(q.x-1)||!Me.isZero(q.y-1))&&V.push("scale("+e.point(q)+")"),H.x&&V.push("skewX("+e.number(H.x)+")"),H.y&&V.push("skewY("+e.number(H.y)+")"),P.transform=V.join(" ")}else P.transform="matrix("+E.getValues().join(",")+")"}return P}function i(E,g){for(var I=t(E._matrix),P=E._children,L=Ke.create("g",I,e),T=0,N=P.length;T<N;T++){var V=P[T],z=R(V,g);if(z)if(V.isClipMask()){var q=Ke.create("clipPath");q.appendChild(z),D(V,q,"clip"),Ke.set(L,{"clip-path":"url(#"+q.id+")"})}else L.appendChild(z)}return L}function o(E){var g=E._type,I=E._radius,P=t(E._matrix,!0,"rectangle"!==g);if("rectangle"===g){g="rect";var L=E._size,T=L.width,N=L.height;P.x-=T/2,P.y-=N/2,P.width=T,P.height=N,I.isZero()&&(I=null)}return I&&("circle"===g?P.r=I:(P.rx=I.width,P.ry=I.height)),Ke.create(g,P,e)}var v,b={Group:i,Layer:i,Raster:function r(E,g){var I=t(E._matrix,!0),P=E.getSize(),L=E.getImage();return I.x-=P.width/2,I.y-=P.height/2,I.width=P.width,I.height=P.height,I.href=0==g.embedImages&&L&&L.src||E.toDataURL(),Ke.create("image",I,e)},Path:function s(E,g){var I=g.matchShapes;if(I){var P=E.toShape(!1);if(P)return o(P)}var N,L=E._segments,T=L.length,V=t(E._matrix);if(I&&T>=2&&!E.hasHandles())if(T>2){N=E._closed?"polygon":"polyline";for(var z=[],q=0;q<T;q++)z.push(e.point(L[q]._point));V.points=z.join(" ")}else{N="line";var H=L[0]._point,G=L[1]._point;V.set({x1:H.x,y1:H.y,x2:G.x,y2:G.y})}else N="path",V.d=E.getPathData(null,g.precision);return Ke.create(N,V,e)},Shape:o,CompoundPath:function c(E,g){var I=t(E._matrix),P=E.getPathData(null,g.precision);return P&&(I.d=P),Ke.create("path",I,e)},SymbolItem:function l(E,g){var I=t(E._matrix,!0),P=E._definition,L=m(P,"symbol"),T=P._item,N=T.getStrokeBounds();return L||((L=Ke.create("symbol",{viewBox:e.rectangle(N)})).appendChild(R(T,g)),D(P,L,"symbol")),I.href="#"+L.id,I.x+=N.x,I.y+=N.y,I.width=N.width,I.height=N.height,I.overflow="visible",Ke.create("use",I,e)},PointText:function d(E){var g=Ke.create("text",t(E._matrix,!0),e);return g.textContent=E._content,g}};function m(E,g){return v||(v={ids:{},svgs:{}}),E&&v.svgs[g+"-"+(E._id||E.__id||(E.__id=ot.get("svg")))]}function D(E,g,I){v||m();var P=v.ids[I]=(v.ids[I]||0)+1;g.id=I+"-"+P,v.svgs[I+"-"+(E._id||E.__id)]=g}function C(E,g){var I=E,P=null;if(v){for(var L in I="svg"===E.nodeName.toLowerCase()&&E,v.svgs)P||(I||(I=Ke.create("svg")).appendChild(E),P=I.insertBefore(Ke.create("defs"),I.firstChild)),P.appendChild(v.svgs[L]);v=null}return g.asString?(new Xe.XMLSerializer).serializeToString(I):I}function R(E,g,I){var P=b[E._class],L=P&&P(E,g);if(L){var T=g.onExport;T&&(L=T(E,L,g)||L);var N=JSON.stringify(E._data);N&&"{}"!==N&&"null"!==N&&L.setAttribute("data-paper-data",N)}return L&&function _(E,g,I){var P={},L=!I&&E.getParent(),T=[];return null!=E._name&&(P.id=E._name),W.each(Te,function(N){var V=N.get,z=N.type,q=E[V]();if(N.exportFilter?N.exportFilter(E,q):!L||!W.equals(L[V](),q)){if("color"===z&&null!=q){var H=q.getAlpha();H<1&&(P[N.attribute+"-opacity"]=H)}"style"===z?T.push(N.attribute+": "+q):P[N.attribute]=null==q?"none":"color"===z?q.gradient?function f(E){var g=m(E,"color");if(!g){var N,I=E.getGradient(),P=I._radial,L=E.getOrigin(),T=E.getDestination();if(P){N={cx:L.x,cy:L.y,r:L.getDistance(T)};var V=E.getHighlight();V&&(N.fx=V.x,N.fy=V.y)}else N={x1:L.x,y1:L.y,x2:T.x,y2:T.y};N.gradientUnits="userSpaceOnUse",g=Ke.create((P?"radial":"linear")+"Gradient",N,e);for(var z=I._stops,q=0,H=z.length;q<H;q++){var G=z[q],j=G._color,K=j.getAlpha();N={offset:G._offset??q/(H-1)},j&&(N["stop-color"]=j.toCSS(!0)),K<1&&(N["stop-opacity"]=K),g.appendChild(Ke.create("stop",N,e))}D(E,g,"color")}return"url(#"+g.id+")"}(q):q.toCSS(!0):"array"===z?q.join(","):"lookup"===z?N.toSVG[q]:q}}),T.length&&(P.style=T.join(";")),1===P.opacity&&delete P.opacity,E._visible||(P.visibility="hidden"),Ke.set(g,P,e)}(E,L,I)}function y(E){return E||(E={}),e=new ye(E.precision),E}ke.inject({exportSVG:function(E){return C(R(this,E=y(E),!0),E)}}),Wt.inject({exportSVG:function(E){E=y(E);var g=this._children,I=this.getView(),P=W.pick(E.bounds,"view"),L=E.matrix||"view"===P&&I._matrix,T=L&&Ze.read([L]),N="view"===P?new xe([0,0],I.getViewSize()):"content"===P?ke._getBounds(g,T,{stroke:!0}).rect:xe.read([P],0,{readNull:!0}),V={version:"1.1",xmlns:Ke.svg,"xmlns:xlink":Ke.xlink};N&&(V.width=N.width,V.height=N.height,(N.x||0===N.x||N.y||0===N.y)&&(V.viewBox=e.rectangle(N)));var z=Ke.create("svg",V,e),q=z;T&&!T.isIdentity()&&(q=z.appendChild(Ke.create("g",t(T),e)));for(var H=0,G=g.length;H<G;H++)q.appendChild(R(g[H],E,!0));return C(z,E)}})},new function(){var t,e={};function i(g,I,P,L,T,N){var V=Ke.get(g,I)||N,z=null==V?L?null:P?"":0:P?V:parseFloat(V);return/%\s*$/.test(V)?z/100*(T?1:t[/x|^width/.test(I)?"width":"height"]):z}function r(g,I,P,L,T,N,V){return I=i(g,I||"x",!1,L,T,N),P=i(g,P||"y",!1,L,T,V),!L||null!=I&&null!=P?new J(I,P):null}function s(g,I,P,L,T){return I=i(g,I||"width",!1,L,T),P=i(g,P||"height",!1,L,T),!L||null!=I&&null!=P?new fe(I,P):null}function o(g,I,P){return"none"===g?null:"number"===I?parseFloat(g):"array"===I?g?g.split(/[\s,]+/g).map(parseFloat):[]:"color"===I?R(g)||g:"lookup"===I?P[g]:g}function c(g,I,P,L){var T=g.childNodes,N="clippath"===I,V="defs"===I,z=new Ft,q=z._project,H=q._currentStyle,G=[];if(!N&&!V&&(z=C(z,g,L),q._currentStyle=z._style.clone()),L)for(var j=g.querySelectorAll("defs"),K=0,X=j.length;K<X;K++)y(j[K],P,!1);for(K=0,X=T.length;K<X;K++){var se,ee=T[K];1===ee.nodeType&&!/^defs$/i.test(ee.nodeName)&&(se=y(ee,P,!1))&&!(se instanceof ht)&&G.push(se)}return z.addChildren(G),N&&(z=C(z.reduce(),g,L)),q._currentStyle=H,(N||V)&&(z.remove(),z=null),z}function l(g,I){for(var P=g.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),L=[],T=0,N=P.length;T<N;T+=2)L.push(new J(parseFloat(P[T]),parseFloat(P[T+1])));var V=new Ue(L);return"polygon"===I&&V.closePath(),V}function d(g,I){var T,P=(i(g,"href",!0)||"").substring(1),L="radialgradient"===I;if(P)(T=e[P].getGradient())._radial^L&&((T=T.clone())._radial=L);else{for(var N=g.childNodes,V=[],z=0,q=N.length;z<q;z++){var H=N[z];1===H.nodeType&&V.push(C(new fi,H))}T=new Yt(V,L)}var G,j,K,X="userSpaceOnUse"!==i(g,"gradientUnits",!0);return L?(j=(G=r(g,"cx","cy",!1,X,"50%","50%")).add(i(g,"r",!1,!1,X,"50%"),0),K=r(g,"fx","fy",!0,X)):(G=r(g,"x1","y1",!1,X,"0%","0%"),j=r(g,"x2","y2",!1,X,"100%","0%")),C(new st(T,G,j,K),g)._scaleToBounds=X,null}var b={"#document":function(g,I,P,L){for(var T=g.childNodes,N=0,V=T.length;N<V;N++){var z=T[N];if(1===z.nodeType)return y(z,P,L)}},g:c,svg:c,clippath:c,polygon:l,polyline:l,path:function f(g){return Zt.create(g.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(g){var I=new Nt(i(g,"href",!0));return I.on("load",function(){var P=s(g);this.setSize(P);var L=r(g).add(P.divide(2));this._matrix.append((new Ze).translate(L))}),I},symbol:function(g,I,P,L){return new ht(c(g,I,P,L),!0)},defs:c,use:function(g){var I=(i(g,"href",!0)||"").substring(1),P=e[I],L=r(g);return P?P instanceof ht?P.place(L):P.clone().translate(L):null},circle:function(g){return new St.Circle(r(g,"cx","cy"),i(g,"r"))},ellipse:function(g){return new St.Ellipse({center:r(g,"cx","cy"),radius:s(g,"rx","ry")})},rect:function(g){return new St.Rectangle(new xe(r(g),s(g)),s(g,"rx","ry"))},line:function(g){return new Ue.Line(r(g,"x1","y1"),r(g,"x2","y2"))},text:function(g){var I=new xi(r(g).add(r(g,"dx","dy")));return I.setContent(g.textContent.trim()||""),I},switch:c};function _(g,I,P,L){if(g.transform){for(var T=(L.getAttribute(P)||"").split(/\)\s*/g),N=new Ze,V=0,z=T.length;V<z;V++){var q=T[V];if(!q)break;for(var H=q.split(/\(\s*/),G=H[0],j=H[1].split(/[\s,]+/g),K=0,X=j.length;K<X;K++)j[K]=parseFloat(j[K]);switch(G){case"matrix":N.append(new Ze(j[0],j[1],j[2],j[3],j[4],j[5]));break;case"rotate":N.rotate(j[0],j[1]||0,j[2]||0);break;case"translate":N.translate(j[0],j[1]||0);break;case"scale":N.scale(j);break;case"skewX":N.skew(j[0],0);break;case"skewY":N.skew(0,j[0])}}g.transform(N)}}function v(g,I,P){var L="fill-opacity"===P?"getFillColor":"getStrokeColor",T=g[L]&&g[L]();T&&T.setAlpha(parseFloat(I))}var m=W.set(W.each(Te,function(g){this[g.attribute]=function(I,P){if(I[g.set]&&(I[g.set](o(P,g.type,g.fromSVG)),"color"===g.type)){var L=I[g.get]();if(L&&L._scaleToBounds){var T=I.getBounds();L.transform((new Ze).translate(T.getPoint()).scale(T.getSize()))}}}},{}),{id:function(g,I){e[I]=g,g.setName&&g.setName(I)},"clip-path":function(g,I){var P=R(I);if(P){if((P=P.clone()).setClipMask(!0),!(g instanceof Ft))return new Ft(P,g);g.insertChild(0,P)}},gradientTransform:_,transform:_,"fill-opacity":v,"stroke-opacity":v,visibility:function(g,I){g.setVisible&&g.setVisible("visible"===I)},display:function(g,I){g.setVisible&&g.setVisible(null!==I)},"stop-color":function(g,I){g.setColor&&g.setColor(I)},"stop-opacity":function(g,I){g._color&&g._color.setAlpha(parseFloat(I))},offset:function(g,I){if(g.setOffset){var P=I.match(/(.*)%$/);g.setOffset(P?P[1]/100:parseFloat(I))}},viewBox:function(g,I,P,L,T){var z,N=new xe(o(I,"array")),V=s(L,null,null,!0);if(g instanceof Ft){var H=V?V.divide(N.getSize()):1,q=(new Ze).scale(H).translate(N.getPoint().negate());z=g}else g instanceof ht&&(V&&N.setSize(V),z=g._item);if(z){if("visible"!==D(L,"overflow",T)){var G=new St.Rectangle(N);G.setClipMask(!0),z.addChild(G)}q&&z.transform(q)}}});function D(g,I,P){var L=g.attributes[I],T=L&&L.value;if(!T&&g.style){var N=W.camelize(I);!(T=g.style[N])&&P.node[N]!==P.parent[N]&&(T=P.node[N])}return T?"none"===T?null:T:w}function C(g,I,P){var L=I.parentNode,T={node:et.getStyles(I)||{},parent:!P&&!/^defs$/i.test(L.tagName)&&et.getStyles(L)||{}};return W.each(m,function(N,V){var z=D(I,V,T);g=z!==w&&N(g,z,V,I,T)||g}),g}function R(g){var I=g&&g.match(/\((?:["'#]*)([^"')]+)/),P=I&&I[1],L=P&&e[qe?P.replace(qe.location.href.split("#")[0]+"#",""):P];return L&&L._scaleToBounds&&((L=L.clone())._scaleToBounds=!0),L}function y(g,I,P){var V,z,q,L=g.nodeName.toLowerCase(),T="#document"!==L,N=We.body;P&&T&&(t=Ve.getView().getSize(),t=s(g,null,null,!0)||t,V=Ke.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),z=g.parentNode,q=g.nextSibling,V.appendChild(g),N.appendChild(V));var H=Ve.settings,G=H.applyMatrix,j=H.insertItems;H.applyMatrix=!1,H.insertItems=!1;var K=b[L],X=K&&K(g,L,I,P)||null;if(H.insertItems=j,H.applyMatrix=G,X){T&&!(X instanceof Ft)&&(X=C(X,g,P));var ee=I.onImport,se=T&&g.getAttribute("data-paper-data");ee&&(X=ee(g,X,I)||X),I.expandShapes&&X instanceof St&&(X.remove(),X=X.toPath()),se&&(X._data=JSON.parse(se))}return V&&(N.removeChild(V),z&&(q?z.insertBefore(g,q):z.appendChild(g))),P&&(e={},X&&W.pick(I.applyMatrix,G)&&X.matrix.apply(!0,!0)),X}function E(g,I,P){if(!g)return null;I="function"==typeof I?{onLoad:I}:I||{};var L=Ve,T=null;function N(H){try{var G="object"==typeof H?H:(new Xe.DOMParser).parseFromString(H.trim(),"image/svg+xml");if(!G.nodeName)throw G=null,new Error("Unsupported SVG source: "+g);Ve=L,T=y(G,I,!0),(!I||!1!==I.insert)&&P._insertItem(w,T);var j=I.onLoad;j&&j(T,H)}catch(K){V(K)}}function V(H,G){var j=I.onError;if(!j)throw new Error(H);j(H,G)}if("string"!=typeof g||/^[\s\S]*</.test(g)){if(typeof File<"u"&&g instanceof File){var q=new FileReader;return q.onload=function(){N(q.result)},q.onerror=function(){V(q.error)},q.readAsText(g)}N(g)}else{var z=We.getElementById(g);z?N(z):kt_request({url:g,async:!0,onLoad:N,onError:V})}return T}ke.inject({importSVG:function(g,I){return E(g,I,this)}}),Wt.inject({importSVG:function(g,I){return this.activate(),E(g,I,this)}})},W.exports.PaperScript=function(){var i,r,R,e=this,t=e.acorn;if(!t)try{t=we(7077)}catch{}function s(C,R){return(e.acorn||t).parse(C,R)}t||(t=i=r={},R=function(C){"use strict";var R,y,E,g;C.version="0.5.0",C.parse=function(U,Y){return y=String(U),E=y.length,P(Y),An(),function Cr(U){ee=se=T,R.locations&&(le=new pi),pe=Q=null,ge=[],gi();var Y=U||bt(),ne=!0;for(U||(Y.body=[]);H!==Re;){var oe=Qt();Y.body.push(oe),ne&&ln(oe)&&un(!0),ne=!1}return Be(Y,"Program")}(R.program)};var I=C.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function P(U){for(var Y in R=U||{},I)Object.prototype.hasOwnProperty.call(R,Y)||(R[Y]=I[Y]);g=R.sourceFile||null}var T,N,V,z,q,H,G,j,K,X,ee,se,le,pe,ge,Q,L=C.getLineInfo=function(U,Y){for(var ne=1,oe=0;;){Pi.lastIndex=oe;var Ae=Pi.exec(U);if(!(Ae&&Ae.index<Y))break;++ne,oe=Ae.index+Ae[0].length}return{line:ne,column:Y-oe}};function ae(U,Y){var ne=L(y,U),oe=new SyntaxError(Y+=" ("+ne.line+":"+ne.column+")");throw oe.pos=U,oe.loc=ne,oe.raisedAt=T,oe}C.tokenize=function(U,Y){y=String(U),E=y.length,P(Y),An();var ne={};function oe(Ae){return se=V,gi(Ae),ne.start=N,ne.end=V,ne.startLoc=z,ne.endLoc=q,ne.type=H,ne.value=G,ne}return oe.jumpTo=function(Ae,Le){if(T=Ae,R.locations){K=1,X=Pi.lastIndex=0;for(var Ne;(Ne=Pi.exec(y))&&Ne.index<Ae;)++K,X=Ne.index+Ne[0].length}j=Le,Ai()},oe};var he=[],be={type:"num"},_e={type:"regexp"},Ie={type:"string"},Se={type:"name"},Re={type:"eof"},Fe={keyword:"break"},De={keyword:"case",beforeExpr:!0},nt={keyword:"catch"},ut={keyword:"continue"},dt={keyword:"debugger"},rt={keyword:"default"},je={keyword:"do",isLoop:!0},Ce={keyword:"else",beforeExpr:!0},It={keyword:"finally"},lt={keyword:"for",isLoop:!0},At={keyword:"function"},$t={keyword:"if"},zt={keyword:"return",beforeExpr:!0},Bt={keyword:"switch"},Et={keyword:"throw",beforeExpr:!0},n={keyword:"try"},u={keyword:"var"},S={keyword:"while",isLoop:!0},M={keyword:"with"},B={keyword:"new",beforeExpr:!0},te={keyword:"this"},re={keyword:"null",atomValue:null},ce={keyword:"true",atomValue:!0},me={keyword:"false",atomValue:!1},Oe={keyword:"in",binop:7,beforeExpr:!0},ze={break:Fe,case:De,catch:nt,continue:ut,debugger:dt,default:rt,do:je,else:Ce,finally:It,for:lt,function:At,if:$t,return:zt,switch:Bt,throw:Et,try:n,var:u,while:S,with:M,null:re,true:ce,false:me,new:B,in:Oe,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:te,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ct={type:"[",beforeExpr:!0},jt={type:"]"},qt={type:"{",beforeExpr:!0},Mt={type:"}"},Dt={type:"(",beforeExpr:!0},_t={type:")"},Tt={type:",",beforeExpr:!0},ii={type:";",beforeExpr:!0},Ei={type:":",beforeExpr:!0},nn={type:"."},rn={type:"?",beforeExpr:!0},sn={binop:10,beforeExpr:!0},an={isAssign:!0,beforeExpr:!0},di={isAssign:!0,beforeExpr:!0},$n={postfix:!0,prefix:!0,isUpdate:!0},xn={prefix:!0,beforeExpr:!0},Sn={binop:1,beforeExpr:!0},Cn={binop:2,beforeExpr:!0},Qn={binop:3,beforeExpr:!0},Xn={binop:4,beforeExpr:!0},er={binop:5,beforeExpr:!0},tr={binop:6,beforeExpr:!0},ir={binop:7,beforeExpr:!0},nr={binop:8,beforeExpr:!0},rr={binop:9,prefix:!0,beforeExpr:!0},sr={binop:10,beforeExpr:!0};for(var kn in C.tokTypes={bracketL:ct,bracketR:jt,braceL:qt,braceR:Mt,parenL:Dt,parenR:_t,comma:Tt,semi:ii,colon:Ei,dot:nn,question:rn,slash:sn,eq:an,name:Se,eof:Re,num:be,regexp:_e,string:Ie},ze)C.tokTypes["_"+kn]=ze[kn];function Ti(U){U=U.split(" ");var Y="",ne=[];e:for(var oe=0;oe<U.length;++oe){for(var Ae=0;Ae<ne.length;++Ae)if(ne[Ae][0].length==U[oe].length){ne[Ae].push(U[oe]);continue e}ne.push([U[oe]])}function Le(Ye){if(1==Ye.length)return Y+="return str === "+JSON.stringify(Ye[0])+";";Y+="switch(str){";for(var Xt=0;Xt<Ye.length;++Xt)Y+="case "+JSON.stringify(Ye[Xt])+":";Y+="return true}return false;"}if(ne.length>3){for(ne.sort(function(Ye,Xt){return Xt.length-Ye.length}),Y+="switch(str.length){",oe=0;oe<ne.length;++oe){var Ne=ne[oe];Y+="case "+Ne[0].length+":",Le(Ne)}Y+="}"}else Le(U);return new Function("str",Y)}var Di,ar=Ti("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),or=Ti("class enum extends super const export import"),In=Ti("implements interface let package private protected public static yield"),ji=Ti("eval arguments"),ur=Ti("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),lr=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,En="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Tn=new RegExp("["+En+"]"),cr=new RegExp("["+En+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),qi=/[\n\r\u2028\u2029]/,Pi=/\r\n|[\n\r\u2028\u2029]/g,Wi=C.isIdentifierStart=function(U){return U<65?36===U:U<91||(U<97?95===U:U<123||U>=170&&Tn.test(String.fromCharCode(U)))},Pn=C.isIdentifierChar=function(U){return U<48?36===U:U<58||!(U<65)&&(U<91||(U<97?95===U:U<123||U>=170&&cr.test(String.fromCharCode(U))))};function pi(){this.line=K,this.column=T-X}function An(){K=1,T=X=0,j=!0,Ai()}function mt(U,Y){V=T,R.locations&&(q=new pi),H=U,Ai(),G=Y,j=U.beforeExpr}function fr(){var U=R.onComment&&R.locations&&new pi,Y=T,ne=y.indexOf("*/",T+=2);if(-1===ne&&ae(T-2,"Unterminated comment"),T=ne+2,R.locations){Pi.lastIndex=Y;for(var oe;(oe=Pi.exec(y))&&oe.index<T;)++K,X=oe.index+oe[0].length}R.onComment&&R.onComment(!0,y.slice(Y+2,ne),Y,T,U,R.locations&&new pi)}function on(){for(var U=T,Y=R.onComment&&R.locations&&new pi,ne=y.charCodeAt(T+=2);T<E&&10!==ne&&13!==ne&&8232!==ne&&8233!==ne;)++T,ne=y.charCodeAt(T);R.onComment&&R.onComment(!1,y.slice(U+2,T),U,T,Y,R.locations&&new pi)}function Ai(){for(;T<E;){var U=y.charCodeAt(T);if(32===U)++T;else if(13===U)++T,10===(Y=y.charCodeAt(T))&&++T,R.locations&&(++K,X=T);else if(10===U||8232===U||8233===U)++T,R.locations&&(++K,X=T);else if(U>8&&U<14)++T;else if(47===U){var Y;if(42===(Y=y.charCodeAt(T+1)))fr();else{if(47!==Y)break;on()}}else if(160===U)++T;else{if(!(U>=5760&&lr.test(String.fromCharCode(U))))break;++T}}}function gi(U){if(U?T=N+1:N=T,R.locations&&(z=new pi),U)return Dn();if(T>=E)return mt(Re);var Y=y.charCodeAt(T);if(Wi(Y)||92===Y)return Mn();var ne=function wr(U){switch(U){case 46:return function dr(){var U=y.charCodeAt(T+1);return U>=48&&U<=57?Rn(!0):(++T,mt(nn))}();case 40:return++T,mt(Dt);case 41:return++T,mt(_t);case 59:return++T,mt(ii);case 44:return++T,mt(Tt);case 91:return++T,mt(ct);case 93:return++T,mt(jt);case 123:return++T,mt(qt);case 125:return++T,mt(Mt);case 58:return++T,mt(Ei);case 63:return++T,mt(rn);case 48:var Y=y.charCodeAt(T+1);if(120===Y||88===Y)return function xr(){T+=2;var U=Oi(16);return null==U&&ae(N+2,"Expected hexadecimal number"),Wi(y.charCodeAt(T))&&ae(T,"Identifier directly after number"),mt(be,U)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Rn(!1);case 34:case 39:return function Sr(U){T++;for(var Y="";;){T>=E&&ae(N,"Unterminated string constant");var ne=y.charCodeAt(T);if(ne===U)return++T,mt(Ie,Y);if(92===ne){ne=y.charCodeAt(++T);var oe=/^[0-7]+/.exec(y.slice(T,T+3));for(oe&&(oe=oe[0]);oe&&parseInt(oe,8)>255;)oe=oe.slice(0,-1);if("0"===oe&&(oe=null),++T,oe)Q&&ae(T-2,"Octal literal in strict mode"),Y+=String.fromCharCode(parseInt(oe,8)),T+=oe.length-1;else switch(ne){case 110:Y+="\n";break;case 114:Y+="\r";break;case 120:Y+=String.fromCharCode(Gi(2));break;case 117:Y+=String.fromCharCode(Gi(4));break;case 85:Y+=String.fromCharCode(Gi(8));break;case 116:Y+="\t";break;case 98:Y+="\b";break;case 118:Y+="\v";break;case 102:Y+="\f";break;case 48:Y+="\0";break;case 13:10===y.charCodeAt(T)&&++T;case 10:R.locations&&(X=T,++K);break;default:Y+=String.fromCharCode(ne)}}else(13===ne||10===ne||8232===ne||8233===ne)&&ae(N,"Unterminated string constant"),Y+=String.fromCharCode(ne),++T}}(U);case 47:return function pr(){var U=y.charCodeAt(T+1);return j?(++T,Dn()):61===U?vt(di,2):vt(sn,1)}();case 37:case 42:return function gr(){return 61===y.charCodeAt(T+1)?vt(di,2):vt(sr,1)}();case 124:case 38:return function _r(U){var Y=y.charCodeAt(T+1);return Y===U?vt(124===U?Sn:Cn,2):61===Y?vt(di,2):vt(124===U?Qn:er,1)}(U);case 94:return function mr(){return 61===y.charCodeAt(T+1)?vt(di,2):vt(Xn,1)}();case 43:case 45:return function vr(U){var Y=y.charCodeAt(T+1);return Y===U?45==Y&&62==y.charCodeAt(T+2)&&qi.test(y.slice(se,T))?(T+=3,on(),Ai(),gi()):vt($n,2):61===Y?vt(di,2):vt(rr,1)}(U);case 60:case 62:return function br(U){var Y=y.charCodeAt(T+1),ne=1;return Y===U?(ne=62===U&&62===y.charCodeAt(T+2)?3:2,61===y.charCodeAt(T+ne)?vt(di,ne+1):vt(nr,ne)):33==Y&&60==U&&45==y.charCodeAt(T+2)&&45==y.charCodeAt(T+3)?(T+=4,on(),Ai(),gi()):(61===Y&&(ne=61===y.charCodeAt(T+2)?3:2),vt(ir,ne))}(U);case 61:case 33:return function yr(U){return 61===y.charCodeAt(T+1)?vt(tr,61===y.charCodeAt(T+2)?3:2):vt(61===U?an:xn,1)}(U);case 126:return vt(xn,1)}return!1}(Y);if(!1===ne){var oe=String.fromCharCode(Y);if("\\"===oe||Tn.test(oe))return Mn();ae(T,"Unexpected character '"+oe+"'")}return ne}function vt(U,Y){var ne=y.slice(T,T+Y);T+=Y,mt(U,ne)}function Dn(){for(var U,Y,ne=T;;){T>=E&&ae(ne,"Unterminated regular expression");var oe=y.charAt(T);if(qi.test(oe)&&ae(ne,"Unterminated regular expression"),U)U=!1;else{if("["===oe)Y=!0;else if("]"===oe&&Y)Y=!1;else if("/"===oe&&!Y)break;U="\\"===oe}++T}var Ae=y.slice(ne,T);++T;var Le=Ln();Le&&!/^[gmsiy]*$/.test(Le)&&ae(ne,"Invalid regexp flag");try{var Ne=new RegExp(Ae,Le)}catch(Ye){Ye instanceof SyntaxError&&ae(ne,Ye.message),ae(Ye)}return mt(_e,Ne)}function Oi(U,Y){for(var ne=T,oe=0,Ae=0,Le=Y??1/0;Ae<Le;++Ae){var Ye,Ne=y.charCodeAt(T);if((Ye=Ne>=97?Ne-97+10:Ne>=65?Ne-65+10:Ne>=48&&Ne<=57?Ne-48:1/0)>=U)break;++T,oe=oe*U+Ye}return T===ne||null!=Y&&T-ne!==Y?null:oe}function Rn(U){var Y=T,ne=!1,oe=48===y.charCodeAt(T);!U&&null===Oi(10)&&ae(Y,"Invalid number"),46===y.charCodeAt(T)&&(++T,Oi(10),ne=!0);var Ae=y.charCodeAt(T);(69===Ae||101===Ae)&&((43===(Ae=y.charCodeAt(++T))||45===Ae)&&++T,null===Oi(10)&&ae(Y,"Invalid number"),ne=!0),Wi(y.charCodeAt(T))&&ae(T,"Identifier directly after number");var Ne,Le=y.slice(Y,T);return ne?Ne=parseFloat(Le):oe&&1!==Le.length?/[89]/.test(Le)||Q?ae(Y,"Invalid number"):Ne=parseInt(Le,8):Ne=parseInt(Le,10),mt(be,Ne)}function Gi(U){var Y=Oi(16,U);return null===Y&&ae(N,"Bad character escape sequence"),Y}function Ln(){Di=!1;for(var U,Y=!0,ne=T;;){var oe=y.charCodeAt(T);if(Pn(oe))Di&&(U+=y.charAt(T)),++T;else{if(92!==oe)break;Di||(U=y.slice(ne,T)),Di=!0,117!=y.charCodeAt(++T)&&ae(T,"Expecting Unicode escape sequence \\uXXXX"),++T;var Ae=Gi(4),Le=String.fromCharCode(Ae);Le||ae(T-1,"Invalid Unicode escape"),(Y?Wi(Ae):Pn(Ae))||ae(T-4,"Invalid Unicode escape"),U+=Le}Y=!1}return Di?U:y.slice(ne,T)}function Mn(){var U=Ln(),Y=Se;return!Di&&ur(U)&&(Y=ze[U]),mt(Y,U)}function Ge(){ee=N,se=V,le=q,gi()}function un(U){if(Q=U,T=N,R.locations)for(;T<X;)X=y.lastIndexOf("\n",X-2)+1,--K;Ai(),gi()}function On(){this.type=null,this.start=N,this.end=null}function Fn(){this.start=z,this.end=null,null!==g&&(this.source=g)}function bt(){var U=new On;return R.locations&&(U.loc=new Fn),R.directSourceFile&&(U.sourceFile=R.directSourceFile),R.ranges&&(U.range=[N,0]),U}function li(U){var Y=new On;return Y.start=U.start,R.locations&&(Y.loc=new Fn,Y.loc.start=U.loc.start),R.ranges&&(Y.range=[U.range[0],0]),Y}function Be(U,Y){return U.type=Y,U.end=se,R.locations&&(U.loc.end=le),R.ranges&&(U.range[1]=se),U}function ln(U){return R.ecmaVersion>=5&&"ExpressionStatement"===U.type&&"Literal"===U.expression.type&&"use strict"===U.expression.value}function at(U){if(H===U)return Ge(),!0}function Ki(){return!R.strictSemicolons&&(H===Re||H===Mt||qi.test(y.slice(se,N)))}function _i(){!at(ii)&&!Ki()&&ni()}function pt(U){H===U?Ge():ni()}function ni(){ae(N,"Unexpected token")}function Fi(U){"Identifier"!==U.type&&"MemberExpression"!==U.type&&ae(U.start,"Assigning to rvalue"),Q&&"Identifier"===U.type&&ji(U.name)&&ae(U.start,"Assigning to "+U.name+" in strict mode")}var Ni={kind:"loop"},kr={kind:"switch"};function Qt(){(H===sn||H===di&&"/="==G)&&gi(!0);var U=H,Y=bt();switch(U){case Fe:case ut:Ge();var ne=U===Fe;at(ii)||Ki()?Y.label=null:H!==Se?ni():(Y.label=ri(),_i());for(var oe=0;oe<ge.length;++oe){var Ae=ge[oe];if((null==Y.label||Ae.name===Y.label.name)&&(null!=Ae.kind&&(ne||"loop"===Ae.kind)||Y.label&&ne))break}return oe===ge.length&&ae(Y.start,"Unsyntactic "+U.keyword),Be(Y,ne?"BreakStatement":"ContinueStatement");case dt:return Ge(),_i(),Be(Y,"DebuggerStatement");case je:return Ge(),ge.push(Ni),Y.body=Qt(),ge.pop(),pt(S),Y.test=mi(),_i(),Be(Y,"DoWhileStatement");case lt:if(Ge(),ge.push(Ni),pt(Dt),H===ii)return Yi(Y,null);if(H===u){var Le=bt();return Ge(),hn(Le,!0),Be(Le,"VariableDeclaration"),1===Le.declarations.length&&at(Oe)?Nn(Y,Le):Yi(Y,Le)}return Le=Pt(!1,!0),at(Oe)?(Fi(Le),Nn(Y,Le)):Yi(Y,Le);case At:return Ge(),Ji(Y,!0);case $t:return Ge(),Y.test=mi(),Y.consequent=Qt(),Y.alternate=at(Ce)?Qt():null,Be(Y,"IfStatement");case zt:return!pe&&!R.allowReturnOutsideFunction&&ae(N,"'return' outside of function"),Ge(),at(ii)||Ki()?Y.argument=null:(Y.argument=Pt(),_i()),Be(Y,"ReturnStatement");case Bt:Ge(),Y.discriminant=mi(),Y.cases=[],pt(qt),ge.push(kr);for(var Ne,Ye;H!=Mt;)if(H===De||H===rt){var Xt=H===De;Ne&&Be(Ne,"SwitchCase"),Y.cases.push(Ne=bt()),Ne.consequent=[],Ge(),Xt?Ne.test=Pt():(Ye&&ae(ee,"Multiple default clauses"),Ye=!0,Ne.test=null),pt(Ei)}else Ne||ni(),Ne.consequent.push(Qt());return Ne&&Be(Ne,"SwitchCase"),Ge(),ge.pop(),Be(Y,"SwitchStatement");case Et:return Ge(),qi.test(y.slice(se,N))&&ae(se,"Illegal newline after throw"),Y.argument=Pt(),_i(),Be(Y,"ThrowStatement");case n:if(Ge(),Y.block=Vi(),Y.handler=null,H===nt){var vi=bt();Ge(),pt(Dt),vi.param=ri(),Q&&ji(vi.param.name)&&ae(vi.param.start,"Binding "+vi.param.name+" in strict mode"),pt(_t),vi.guard=null,vi.body=Vi(),Y.handler=Be(vi,"CatchClause")}return Y.guardedHandlers=he,Y.finalizer=at(It)?Vi():null,!Y.handler&&!Y.finalizer&&ae(Y.start,"Missing catch or finally clause"),Be(Y,"TryStatement");case u:return Ge(),hn(Y),_i(),Be(Y,"VariableDeclaration");case S:return Ge(),Y.test=mi(),ge.push(Ni),Y.body=Qt(),ge.pop(),Be(Y,"WhileStatement");case M:return Q&&ae(N,"'with' in strict mode"),Ge(),Y.object=mi(),Y.body=Qt(),Be(Y,"WithStatement");case qt:return Vi();case ii:return Ge(),Be(Y,"EmptyStatement");default:var _n=G,Qi=Pt();if(U===Se&&"Identifier"===Qi.type&&at(Ei)){for(oe=0;oe<ge.length;++oe)ge[oe].name===_n&&ae(Qi.start,"Label '"+_n+"' is already declared");return ge.push({name:_n,kind:H.isLoop?"loop":H===Bt?"switch":null}),Y.body=Qt(),ge.pop(),Y.label=Qi,Be(Y,"LabeledStatement")}return Y.expression=Qi,_i(),Be(Y,"ExpressionStatement")}}function mi(){pt(Dt);var U=Pt();return pt(_t),U}function Vi(U){var Ae,Y=bt(),ne=!0,oe=!1;for(Y.body=[],pt(qt);!at(Mt);){var Le=Qt();Y.body.push(Le),ne&&U&&ln(Le)&&(Ae=oe,un(oe=!0)),ne=!1}return oe&&!Ae&&un(!1),Be(Y,"BlockStatement")}function Yi(U,Y){return U.init=Y,pt(ii),U.test=H===ii?null:Pt(),pt(ii),U.update=H===_t?null:Pt(),pt(_t),U.body=Qt(),ge.pop(),Be(U,"ForStatement")}function Nn(U,Y){return U.left=Y,U.right=Pt(),pt(_t),U.body=Qt(),ge.pop(),Be(U,"ForInStatement")}function hn(U,Y){for(U.declarations=[],U.kind="var";;){var ne=bt();if(ne.id=ri(),Q&&ji(ne.id.name)&&ae(ne.id.start,"Binding "+ne.id.name+" in strict mode"),ne.init=at(an)?Pt(!0,Y):null,U.declarations.push(Be(ne,"VariableDeclarator")),!at(Tt))break}return U}function Pt(U,Y){var ne=cn(Y);if(!U&&H===Tt){var oe=li(ne);for(oe.expressions=[ne];at(Tt);)oe.expressions.push(cn(Y));return Be(oe,"SequenceExpression")}return ne}function cn(U){var Y=function Ir(U){var Y=function Er(U){return fn(dn(),-1,U)}(U);if(at(rn)){var ne=li(Y);return ne.test=Y,ne.consequent=Pt(!0),pt(Ei),ne.alternate=Pt(!0,U),Be(ne,"ConditionalExpression")}return Y}(U);if(H.isAssign){var ne=li(Y);return ne.operator=G,ne.left=Y,Ge(),ne.right=cn(U),Fi(Y),Be(ne,"AssignmentExpression")}return Y}function fn(U,Y,ne){var oe=H.binop;if(null!=oe&&(!ne||H!==Oe)&&oe>Y){var Ae=li(U);Ae.left=U,Ae.operator=G;var Le=H;return Ge(),Ae.right=fn(dn(),oe,ne),fn(Be(Ae,Le===Sn||Le===Cn?"LogicalExpression":"BinaryExpression"),Y,ne)}return U}function dn(){if(H.prefix){var U=bt(),Y=H.isUpdate;return U.operator=G,U.prefix=!0,j=!0,Ge(),U.argument=dn(),Y?Fi(U.argument):Q&&"delete"===U.operator&&"Identifier"===U.argument.type&&ae(U.start,"Deleting local variable in strict mode"),Be(U,Y?"UpdateExpression":"UnaryExpression")}for(var ne=function Tr(){return zi(pn())}();H.postfix&&!Ki();)(U=li(ne)).operator=G,U.prefix=!1,U.argument=ne,Fi(ne),Ge(),ne=Be(U,"UpdateExpression");return ne}function zi(U,Y){var ne;return at(nn)?((ne=li(U)).object=U,ne.property=ri(!0),ne.computed=!1,zi(Be(ne,"MemberExpression"),Y)):at(ct)?((ne=li(U)).object=U,ne.property=Pt(),ne.computed=!0,pt(jt),zi(Be(ne,"MemberExpression"),Y)):!Y&&at(Dt)?((ne=li(U)).callee=U,ne.arguments=$i(_t,!1),zi(Be(ne,"CallExpression"),Y)):U}function pn(){switch(H){case te:var oe=bt();return Ge(),Be(oe,"ThisExpression");case Se:return ri();case be:case Ie:case _e:return(oe=bt()).value=G,oe.raw=y.slice(N,V),Ge(),Be(oe,"Literal");case re:case ce:case me:return(oe=bt()).value=H.atomValue,oe.raw=H.keyword,Ge(),Be(oe,"Literal");case Dt:var U=z,Y=N;Ge();var ne=Pt();return ne.start=Y,ne.end=V,R.locations&&(ne.loc.start=U,ne.loc.end=q),R.ranges&&(ne.range=[Y,V]),pt(_t),ne;case ct:return oe=bt(),Ge(),oe.elements=$i(jt,!0,!0),Be(oe,"ArrayExpression");case qt:return function Vn(){var U=bt(),Y=!0,ne=!1;for(U.properties=[],Ge();!at(Mt);){if(Y)Y=!1;else if(pt(Tt),R.allowTrailingCommas&&at(Mt))break;var Le,oe={key:gn()},Ae=!1;if(at(Ei)?(oe.value=Pt(!0),Le=oe.kind="init"):R.ecmaVersion>=5&&"Identifier"===oe.key.type&&("get"===oe.key.name||"set"===oe.key.name)?(Ae=ne=!0,Le=oe.kind=oe.key.name,oe.key=gn(),H!==Dt&&ni(),oe.value=Ji(bt(),!1)):ni(),"Identifier"===oe.key.type&&(Q||ne))for(var Ne=0;Ne<U.properties.length;++Ne){var Ye=U.properties[Ne];if(Ye.key.name===oe.key.name){var Xt=Le==Ye.kind||Ae&&"init"===Ye.kind||"init"===Le&&("get"===Ye.kind||"set"===Ye.kind);Xt&&!Q&&"init"===Le&&"init"===Ye.kind&&(Xt=!1),Xt&&ae(oe.key.start,"Redefinition of property")}}U.properties.push(oe)}return Be(U,"ObjectExpression")}();case At:return oe=bt(),Ge(),Ji(oe,!1);case B:return function Pr(){var U=bt();return Ge(),U.callee=zi(pn(),!0),U.arguments=at(Dt)?$i(_t,!1):he,Be(U,"NewExpression")}();default:ni()}}function gn(){return H===be||H===Ie?pn():ri(!0)}function Ji(U,Y){H===Se?U.id=ri():Y?ni():U.id=null,U.params=[];var ne=!0;for(pt(Dt);!at(_t);)ne?ne=!1:pt(Tt),U.params.push(ri());var oe=pe,Ae=ge;if(pe=!0,ge=[],U.body=Vi(!0),pe=oe,ge=Ae,Q||U.body.body.length&&ln(U.body.body[0]))for(var Le=U.id?-1:0;Le<U.params.length;++Le){var Ne=Le<0?U.id:U.params[Le];if((In(Ne.name)||ji(Ne.name))&&ae(Ne.start,"Defining '"+Ne.name+"' in strict mode"),Le>=0)for(var Ye=0;Ye<Le;++Ye)Ne.name===U.params[Ye].name&&ae(Ne.start,"Argument name clash in strict mode")}return Be(U,Y?"FunctionDeclaration":"FunctionExpression")}function $i(U,Y,ne){for(var oe=[],Ae=!0;!at(U);){if(Ae)Ae=!1;else if(pt(Tt),Y&&R.allowTrailingCommas&&at(U))break;oe.push(ne&&H===Tt?null:Pt(!0))}return oe}function ri(U){var Y=bt();return U&&"everywhere"==R.forbidReserved&&(U=!1),H===Se?(!U&&(R.forbidReserved&&(3===R.ecmaVersion?ar:or)(G)||Q&&In(G))&&-1==y.slice(N,V).indexOf("\\")&&ae(N,"The keyword '"+G+"' is reserved"),Y.name=G):U&&H.keyword?Y.name=H.keyword:ni(),j=!1,Ge(),Be(Y,"Identifier")}},"object"==typeof i&&"object"==typeof r?R(i):(wt=[i],(ti="function"==typeof(Ot=R)?Ot.apply(i,wt):Ot)!==w&&(r.exports=ti)),t.version||(t=null));var o={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},c={"-":"__negate","+":"__self"},l=W.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(C){this["__"+C]="#"+C},{__self:function(){return this}});function f(C,R,y){var E=o[R];if(C&&C[E]){var g=C[E](y);return"!="===R?!g:g}switch(R){case"+":return C+y;case"-":return C-y;case"*":return C*y;case"/":return C/y;case"%":return C%y;case"==":return C==y;case"!=":return C!=y}}function d(C,R){var y=c[C];if(R&&R[y])return R[y]();switch(C){case"+":return+R;case"-":return-R}}function b(C,R){if(!C)return"";var y=[];function E(Q){for(var ae=0,he=y.length;ae<he;ae++){var be=y[ae];if(be[0]>=Q)break;Q+=be[1]}return Q}function g(Q){return C.substring(E(Q.range[0]),E(Q.range[1]))}function P(Q,ae){for(var he=E(Q.range[0]),be=E(Q.range[1]),_e=0,Ie=y.length-1;Ie>=0;Ie--)if(he>y[Ie][0]){_e=Ie+1;break}y.splice(_e,0,[he,ae.length-be+he]),C=C.substring(0,he)+ae+C.substring(be)}var le,z=(R=R||{}).url||"",q=R.sourceMaps,H=R.paperFeatures||{},G=R.source||C,j=R.offset||0,K=Ve.agent,X=K.versionNumber,ee=!1,se=/\r\n|\n|\r/gm;if(q&&(K.chrome&&X>=30||K.webkit&&X>=537.76||K.firefox&&X>=23||K.node)){if(K.node)j-=2;else if(qe&&z&&!qe.location.href.indexOf(z)){var pe=We.getElementsByTagName("html")[0].innerHTML;j=pe.substr(0,pe.indexOf(C)+1).match(se).length+1}var ge=["AA"+function V(Q){var ae="";for(Q=(Math.abs(Q)<<1)+(Q<0?1:0);Q||!ae;){var be=31&Q;(Q>>=5)&&(be|=32),ae+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[be]}return ae}((ee=j>0&&!(K.chrome&&X>=36||K.safari&&X>=600||K.firefox&&X>=40||K.node))?0:j)+"A"];ge.length=(C.match(se)||[]).length+1+(ee?j:0),le={version:3,file:z,names:[],mappings:ge.join(";AACA"),sourceRoot:"",sources:[z],sourcesContent:[G]}}return(!1!==H.operatorOverloading||!1!==H.moduleExports)&&function N(Q,ae,he){if(Q){for(var be in Q)if("range"!==be&&"loc"!==be){var _e=Q[be];if(Array.isArray(_e))for(var Ie=0,Se=_e.length;Ie<Se;Ie++)N(_e[Ie],Q,he);else _e&&"object"==typeof _e&&N(_e,Q,he)}!1!==he.operatorOverloading&&function L(Q,ae){switch(Q.type){case"UnaryExpression":if(Q.operator in c&&"Literal"!==Q.argument.type){var he=g(Q.argument);P(Q,'$__("'+Q.operator+'", '+he+")")}break;case"BinaryExpression":if(Q.operator in o&&"Literal"!==Q.left.type){var be=g(Q.left),_e=g(Q.right),Ie=function I(Q,ae){return C.substring(E(Q.range[1]),E(ae.range[0]))}(Q.left,Q.right),Se=Q.operator;P(Q,"__$__("+be+","+Ie.replace(new RegExp("\\"+Se),'"'+Se+'"')+", "+_e+")")}break;case"UpdateExpression":case"AssignmentExpression":var Re=ae&&ae.type;if(!("ForStatement"===Re||"BinaryExpression"===Re&&/^[=!<>]/.test(ae.operator)||"MemberExpression"===Re&&ae.computed))if("UpdateExpression"===Q.type){var De=(he=g(Q.argument))+" = "+(Fe="__$__("+he+', "'+Q.operator[0]+'", 1)');Q.prefix?De="("+De+")":("AssignmentExpression"===Re||"VariableDeclarator"===Re||"BinaryExpression"===Re)&&(g(ae.left||ae.id)===he&&(De=Fe),De=he+"; "+De),P(Q,De)}else if(/^.=$/.test(Q.operator)&&"Literal"!==Q.left.type){be=g(Q.left),_e=g(Q.right);var Fe=be+" = __$__("+be+', "'+Q.operator[0]+'", '+_e+")";P(Q,/^\(.*\)$/.test(g(Q))?"("+Fe+")":Fe)}}}(Q,ae),!1!==he.moduleExports&&function T(Q){switch(Q.type){case"ExportDefaultDeclaration":P({range:[Q.start,Q.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var ae=Q.declaration,he=Q.specifiers;if(ae){var be=ae.declarations;be&&(be.forEach(function(Ie){P(Ie,"module.exports."+g(Ie))}),P({range:[Q.start,ae.start+ae.kind.length]},""))}else if(he){var _e=he.map(function(Ie){var Se=g(Ie);return"module.exports."+Se+" = "+Se+"; "}).join("");_e&&P(Q,_e)}}}(Q)}}(s(C,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,H),le&&(ee&&(C=new Array(j+1).join("\n")+C),/^(inline|both)$/.test(q)&&(C+="\n//# sourceMappingURL=data:application/json;base64,"+Xe.btoa(unescape(encodeURIComponent(JSON.stringify(le))))),C+="\n//# sourceURL="+(z||"paperscript")),{url:z,source:G,code:C,map:le}}function _(C,R,y){Ve=R;var N,E=R.getView(),g=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(C)&&!/\bnew\s+Tool\b/.test(C)?new Ii:null,I=g?g._events:[],P=["onFrame","onResize"].concat(I),L=[],T=[],V="object"==typeof C?C:b(C,y);function z(X,ee){for(var se in X)(ee||!/^_/.test(se))&&new RegExp("([\\b\\s\\W]|^)"+se.replace(/\$/g,"\\$")+"\\b").test(C)&&(L.push(se),T.push(X[se]))}C=V.code,z({__$__:f,$__:d,paper:R,tool:g},!0),z(R),C="var module = { exports: {} }; "+C,(j=W.each(P,function(X){new RegExp("\\s+"+X+"\\b").test(C)&&(L.push(X),this.push("module.exports."+X+" = "+X+";"))},[]).join("\n"))&&(C+="\n"+j),C+="\nreturn module.exports;";var q=Ve.agent;if(We&&(q.chrome||q.firefox&&q.versionNumber<40)){var H=We.createElement("script"),G=We.head||We.getElementsByTagName("head")[0];q.firefox&&(C="\n"+C),H.appendChild(We.createTextNode("document.__paperscript__ = function("+L+") {"+C+"\n}")),G.appendChild(H),N=We.__paperscript__,delete We.__paperscript__,G.removeChild(H)}else N=Function(L,C);var j,K=(j=N&&N.apply(R,T))||{};return W.each(I,function(X){var ee=K[X];ee&&(g[X]=ee)}),E&&(K.onResize&&E.setOnResize(K.onResize),E.emit("resize",{size:E.size,delta:new J}),K.onFrame&&E.setOnFrame(K.onFrame),E.requestUpdate()),j}function v(C){if(/^text\/(?:x-|)paperscript$/.test(C.type)&&"true"!==xt.getAttribute(C,"ignore")){var R=xt.getAttribute(C,"canvas"),y=We.getElementById(R),E=C.src||C.getAttribute("data-src"),g=xt.hasAttribute(C,"async"),I="data-paper-scope";if(!y)throw new Error('Unable to find canvas with id "'+R+'"');var P=xt.get(y.getAttribute(I))||(new xt).setup(y);return y.setAttribute(I,P._id),E?kt_request({url:E,async:g,mimeType:"text/plain",onLoad:function(L){_(L,P,E)}}):_(C.innerHTML,P,C.baseURI),C.setAttribute("data-paper-ignore","true"),P}}function m(){W.each(We&&We.getElementsByTagName("script"),v)}return J.inject(l),fe.inject(l),st.inject(l),qe&&("complete"===We.readyState?setTimeout(m):tt.add(qe,{load:m})),{compile:b,execute:_,load:function D(C){return C?v(C):m()},parse:s,calculateBinary:f,calculateUnary:d}}.call(this);var Ve=new(xt.inject(W.exports,{Base:W,Numerical:Me,Key:Vt,DomEvent:tt,DomElement:et,document:We,window:qe,Symbol:ht,PlacedSymbol:Ht}));return Ve.agent.node&&we(1839)(Ve),(ti="function"==typeof(Ot=Ve)?Ot.call(yi,we,yi,Hi):Ot)!==w&&(Hi.exports=ti),Ve}).call(this,"object"==typeof self?self:null)},1839:()=>{},4158:()=>{}}]);